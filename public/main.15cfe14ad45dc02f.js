"use strict";(self.webpackChunkwedding_shop=self.webpackChunkwedding_shop||[]).push([[179],{2011:(at,Ie,N)=>{N.d(Ie,{Dh:()=>he,GT:()=>ge,cc:()=>Se,hO:()=>We,on:()=>H,pX:()=>ee,xv:()=>ce});var c=N(5e3),Y=N(127),P=N(5813);at=N.hmd(at);const oe=["ngOnDestroy"],ee=(Ee,nt,Ye,Te={})=>new Proxy(Ee,{get:(ve,we)=>Ye.runOutsideAngular(()=>{var Ge;if(Ee[we])return(null===(Ge=null==Te?void 0:Te.spy)||void 0===Ge?void 0:Ge.get)&&Te.spy.get(we,Ee[we]),Ee[we];if(oe.indexOf(we)>-1)return()=>{};const $e=nt.toPromise().then(re=>{const Ke=re&&re[we];return"function"==typeof Ke?Ke.bind(re):Ke&&Ke.then?Ke.then(X=>Ye.run(()=>X)):Ye.run(()=>Ke)});return new Proxy(()=>{},{get:(re,Ke)=>$e[Ke],apply:(re,Ke,X)=>$e.then(ae=>{var ne;const De=ae&&ae(...X);return(null===(ne=null==Te?void 0:Te.spy)||void 0===ne?void 0:ne.apply)&&Te.spy.apply(we,X,De),De})})})}),ge=(Ee,nt)=>{nt.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(Te=>{Object.defineProperty(Ee.prototype,Te,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,Te))})})};class ie{constructor(nt){return nt}}const he=new c.OlP("angularfire2.app.options"),ce=new c.OlP("angularfire2.app.name");function H(Ee,nt,Ye){const ve="object"==typeof Ye&&Ye||{};ve.name=ve.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const Ge=Y.Z.apps.filter($e=>$e&&$e.name===ve.name)[0]||nt.runOutsideAngular(()=>Y.Z.initializeApp(Ee,ve));try{JSON.stringify(Ee)!==JSON.stringify(Ge.options)&&$("error",`${Ge.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch($e){}return new ie(Ge)}const $=(Ee,...nt)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[Ee](...nt)},J={provide:ie,useFactory:H,deps:[he,c.R0b,[new c.FiY,ce]]};let We=(()=>{class Ee{constructor(Ye){Y.Z.registerVersion("angularfire",P.q4.full,"core"),Y.Z.registerVersion("angularfire",P.q4.full,"app-compat"),Y.Z.registerVersion("angular",c.q4F.full,Ye.toString())}static initializeApp(Ye,Te){return{ngModule:Ee,providers:[{provide:he,useValue:Ye},{provide:ce,useValue:Te}]}}}return Ee.\u0275fac=function(Ye){return new(Ye||Ee)(c.LFG(c.Lbi))},Ee.\u0275mod=c.oAB({type:Ee}),Ee.\u0275inj=c.cJS({providers:[J]}),Ee})();function Se(Ee,nt,Ye,Te,ve){const[,we,Ge]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===Ee)||[];if(we)return function ke(Ee,nt){try{return Ee.toString()===nt.toString()}catch(Ye){return Ee===nt}}(ve,Ge)||(fe("error",`${nt} was already initialized on the ${Ye} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:ve,was:Ge})),we;{const $e=Te();return globalThis.\u0275AngularfireInstanceCache.push([Ee,$e,ve]),$e}}const Ve=!!at.hot,fe=(Ee,...nt)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[Ee](...nt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(at,Ie,N)=>{N.d(Ie,{q4:()=>El,iC:()=>Tl,HU:()=>fu,vb:()=>Xc,JM:()=>Hs});var c=N(5e3),Y=N(5867),P=N(5861),oe=N(9681),ee=N(2090),ge=N(4859),ie=N(1877);const he="@firebase/installations",$="w:0.5.8",J="FIS_v2",Ee=new ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(C){return C instanceof ee.ZR&&C.code.includes("request-failed")}function Ye({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Te(C){return{token:C.token,requestStatus:2,expiresIn:X(C.expiresIn),creationTime:Date.now()}}function ve(C,I){return we.apply(this,arguments)}function we(){return(we=(0,P.Z)(function*(C,I){const L=(yield I.json()).error;return Ee.create("request-failed",{requestName:C,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Ge({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function $e(C,{refreshToken:I}){const R=Ge(C);return R.append("Authorization",function ae(C){return`${J} ${C}`}(I)),R}function re(C){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,P.Z)(function*(C){const I=yield C();return I.status>=500&&I.status<600?C():I})).apply(this,arguments)}function X(C){return Number(C.replace("s","000"))}function ne(C,I){return De.apply(this,arguments)}function De(){return(De=(0,P.Z)(function*({appConfig:C,heartbeatServiceProvider:I},{fid:R}){const L=Ye(C),q=Ge(C),te=I.getImmediate({optional:!0});if(te){const wt=yield te.getHeartbeatsHeader();wt&&q.append("x-firebase-client",wt)}const xe={method:"POST",headers:q,body:JSON.stringify({fid:R,authVersion:J,appId:C.appId,sdkVersion:$})},et=yield re(()=>fetch(L,xe));if(et.ok){const wt=yield et.json();return{fid:wt.fid||R,registrationStatus:2,refreshToken:wt.refreshToken,authToken:Te(wt.authToken)}}throw yield ve("Create Installation",et)})).apply(this,arguments)}function me(C){return new Promise(I=>{setTimeout(I,C)})}const Et=/^[cdef][\w-]{21}$/;function nn(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const R=function ze(C){return function Le(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Et.test(R)?R:""}catch(C){return""}}function Bt(C){return`${C.appName}!${C.appId}`}const Zn=new Map;function vn(C,I){const R=Bt(C);Wt(R,I),function jt(C,I){const R=function ei(){return!nr&&"BroadcastChannel"in self&&(nr=new BroadcastChannel("[Firebase] FID Change"),nr.onmessage=C=>{Wt(C.data.key,C.data.fid)}),nr}();R&&R.postMessage({key:C,fid:I}),function ys(){0===Zn.size&&nr&&(nr.close(),nr=null)}()}(R,I)}function Wt(C,I){const R=Zn.get(C);if(R)for(const L of R)L(I)}let nr=null;const Sr="firebase-installations-store";let Wi=null;function Zi(){return Wi||(Wi=(0,ee.X3)("firebase-installations-database",1,(C,I)=>{0===I&&C.createObjectStore(Sr)})),Wi}function lt(C,I){return jr.apply(this,arguments)}function jr(){return(jr=(0,P.Z)(function*(C,I){const R=Bt(C),q=(yield Zi()).transaction(Sr,"readwrite"),te=q.objectStore(Sr),Me=yield te.get(R);return yield te.put(I,R),yield q.complete,(!Me||Me.fid!==I.fid)&&vn(C,I.fid),I})).apply(this,arguments)}function Kn(C){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,P.Z)(function*(C){const I=Bt(C),L=(yield Zi()).transaction(Sr,"readwrite");yield L.objectStore(Sr).delete(I),yield L.complete})).apply(this,arguments)}function ti(C,I){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,P.Z)(function*(C,I){const R=Bt(C),q=(yield Zi()).transaction(Sr,"readwrite"),te=q.objectStore(Sr),Me=yield te.get(R),xe=I(Me);return void 0===xe?yield te.delete(R):yield te.put(xe,R),yield q.complete,xe&&(!Me||Me.fid!==xe.fid)&&vn(C,xe.fid),xe})).apply(this,arguments)}function fn(C){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,P.Z)(function*(C){let I;const R=yield ti(C.appConfig,L=>{const q=vs(L),te=oa(C,q);return I=te.registrationPromise,te.installationEntry});return""===R.fid?{installationEntry:yield I}:{installationEntry:R,registrationPromise:I}})).apply(this,arguments)}function vs(C){return Vt(C||{fid:nn(),registrationStatus:0})}function oa(C,I){if(0===I.registrationStatus){if(!navigator.onLine)return{installationEntry:I,registrationPromise:Promise.reject(Ee.create("app-offline"))};const R={fid:I.fid,registrationStatus:1,registrationTime:Date.now()},L=function Ht(C,I){return ot.apply(this,arguments)}(C,R);return{installationEntry:R,registrationPromise:L}}return 1===I.registrationStatus?{installationEntry:I,registrationPromise:yt(C)}:{installationEntry:I}}function ot(){return(ot=(0,P.Z)(function*(C,I){try{const R=yield ne(C,I);return lt(C.appConfig,R)}catch(R){throw nt(R)&&409===R.customData.serverCode?yield Kn(C.appConfig):yield lt(C.appConfig,{fid:I.fid,registrationStatus:0}),R}})).apply(this,arguments)}function yt(C){return rr.apply(this,arguments)}function rr(){return(rr=(0,P.Z)(function*(C){let I=yield ki(C.appConfig);for(;1===I.registrationStatus;)yield me(100),I=yield ki(C.appConfig);if(0===I.registrationStatus){const{installationEntry:R,registrationPromise:L}=yield fn(C);return L||R}return I})).apply(this,arguments)}function ki(C){return ti(C,I=>{if(!I)throw Ee.create("installation-not-found");return Vt(I)})}function Vt(C){return function Qs(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function dr(C,I){return ir.apply(this,arguments)}function ir(){return(ir=(0,P.Z)(function*({appConfig:C,heartbeatServiceProvider:I},R){const L=ct(C,R),q=$e(C,R),te=I.getImmediate({optional:!0});if(te){const wt=yield te.getHeartbeatsHeader();wt&&q.append("x-firebase-client",wt)}const xe={method:"POST",headers:q,body:JSON.stringify({installation:{sdkVersion:$,appId:C.appId}})},et=yield re(()=>fetch(L,xe));if(et.ok)return Te(yield et.json());throw yield ve("Generate Auth Token",et)})).apply(this,arguments)}function ct(C,{fid:I}){return`${Ye(C)}/${I}/authTokens:generate`}function hr(C){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,P.Z)(function*(C,I=!1){let R;const L=yield ti(C.appConfig,te=>{if(!Rt(te))throw Ee.create("not-registered");const Me=te.authToken;if(!I&&j(Me))return te;if(1===Me.requestStatus)return R=Je(C,I),te;{if(!navigator.onLine)throw Ee.create("app-offline");const xe=G(te);return R=dt(C,xe),xe}});return R?yield R:L.authToken})).apply(this,arguments)}function Je(C,I){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,P.Z)(function*(C,I){let R=yield Xe(C.appConfig);for(;1===R.authToken.requestStatus;)yield me(100),R=yield Xe(C.appConfig);const L=R.authToken;return 0===L.requestStatus?hr(C,I):L})).apply(this,arguments)}function Xe(C){return ti(C,I=>{if(!Rt(I))throw Ee.create("not-registered");return function de(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(I.authToken)?Object.assign(Object.assign({},I),{authToken:{requestStatus:0}}):I})}function dt(C,I){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,P.Z)(function*(C,I){try{const R=yield dr(C,I),L=Object.assign(Object.assign({},I),{authToken:R});return yield lt(C.appConfig,L),R}catch(R){if(!nt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const L=Object.assign(Object.assign({},I),{authToken:{requestStatus:0}});yield lt(C.appConfig,L)}else yield Kn(C.appConfig);throw R}})).apply(this,arguments)}function Rt(C){return void 0!==C&&2===C.registrationStatus}function j(C){return 2===C.requestStatus&&!function V(C){const I=Date.now();return I<C.creationTime||C.creationTime+C.expiresIn<I+36e5}(C)}function G(C){const I={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:I})}function Ue(){return(Ue=(0,P.Z)(function*(C){const I=C,{installationEntry:R,registrationPromise:L}=yield fn(I);return L?L.catch(console.error):hr(I).catch(console.error),R.fid})).apply(this,arguments)}function Zt(){return(Zt=(0,P.Z)(function*(C,I=!1){const R=C;return yield fr(R),(yield hr(R,I)).token})).apply(this,arguments)}function fr(C){return $t.apply(this,arguments)}function $t(){return($t=(0,P.Z)(function*(C){const{registrationPromise:I}=yield fn(C);I&&(yield I)})).apply(this,arguments)}function Un(C){return Ee.create("missing-app-config-values",{valueName:C})}const ua="installations",Ne=C=>{const I=C.getProvider("app").getImmediate(),R=function Ki(C){if(!C||!C.options)throw Un("App Configuration");if(!C.name)throw Un("App Name");const I=["projectId","apiKey","appId"];for(const R of I)if(!C.options[R])throw Un(R);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(I);return{app:I,appConfig:R,heartbeatServiceProvider:(0,oe._getProvider)(I,"heartbeat"),_delete:()=>Promise.resolve()}},Mt=C=>{const I=C.getProvider("app").getImmediate(),R=(0,oe._getProvider)(I,ua).getImmediate();return{getId:()=>function Q(C){return Ue.apply(this,arguments)}(R),getToken:q=>function gt(C){return Zt.apply(this,arguments)}(R,q)}};(function ln(){(0,oe._registerComponent)(new ge.wA(ua,Ne,"PUBLIC")),(0,oe._registerComponent)(new ge.wA("installations-internal",Mt,"PRIVATE"))})(),(0,oe.registerVersion)(he,"0.5.8"),(0,oe.registerVersion)(he,"0.5.8","esm2017");const sr="@firebase/remote-config",Sn=new ee.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class wh{constructor(I,R,L,q){this.client=I,this.storage=R,this.storageCache=L,this.logger=q}isCachedDataFresh(I,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-R,q=L<=I;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${I}. Is cache hit: ${q}.`),q}fetch(I){var R=this;return(0,P.Z)(function*(){const[L,q]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(q&&R.isCachedDataFresh(I.cacheMaxAgeMillis,L))return q;I.eTag=q&&q.eTag;const te=yield R.client.fetch(I),Me=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&Me.push(R.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(Me),te})()}}function xc(C=navigator){return C.languages&&C.languages[0]||C.language}class Wa{constructor(I,R,L,q,te,Me){this.firebaseInstallations=I,this.sdkVersion=R,this.namespace=L,this.projectId=q,this.apiKey=te,this.appId=Me}fetch(I){var R=this;return(0,P.Z)(function*(){const[L,q]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,xe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":I.eTag||"*"},et={sdk_version:R.sdkVersion,app_instance_id:L,app_instance_id_token:q,app_id:R.appId,language_code:xc()},wt={method:"POST",headers:xe,body:JSON.stringify(et)},Tt=fetch(Me,wt),Dt=new Promise((ci,bi)=>{I.signal.addEventListener(()=>{const po=new Error("The operation was aborted.");po.name="AbortError",bi(po)})});let Ln;try{yield Promise.race([Tt,Dt]),Ln=yield Tt}catch(ci){let bi="fetch-client-network";throw"AbortError"===ci.name&&(bi="fetch-timeout"),Sn.create(bi,{originalErrorMessage:ci.message})}let bn=Ln.status;const Wo=Ln.headers.get("ETag")||void 0;let fo,Or;if(200===Ln.status){let ci;try{ci=yield Ln.json()}catch(bi){throw Sn.create("fetch-client-parse",{originalErrorMessage:bi.message})}fo=ci.entries,Or=ci.state}if("INSTANCE_STATE_UNSPECIFIED"===Or?bn=500:"NO_CHANGE"===Or?bn=304:("NO_TEMPLATE"===Or||"EMPTY_CONFIG"===Or)&&(fo={}),304!==bn&&200!==bn)throw Sn.create("fetch-status",{httpStatus:bn});return{status:bn,eTag:Wo,config:fo}})()}}class Op{constructor(I,R){this.client=I,this.storage=R}fetch(I){var R=this;return(0,P.Z)(function*(){const L=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(I,L)})()}attemptFetch(I,{throttleEndTimeMillis:R,backoffCount:L}){var q=this;return(0,P.Z)(function*(){yield function Nn(C,I){return new Promise((R,L)=>{const q=Math.max(I-Date.now(),0),te=setTimeout(R,q);C.addEventListener(()=>{clearTimeout(te),L(Sn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(I.signal,R);try{const te=yield q.client.fetch(I);return yield q.storage.deleteThrottleMetadata(),te}catch(te){if(!function Rc(C){if(!(C instanceof ee.ZR&&C.customData))return!1;const I=Number(C.customData.httpStatus);return 429===I||500===I||503===I||504===I}(te))throw te;const Me={throttleEndTimeMillis:Date.now()+(0,ee.$s)(L),backoffCount:L+1};return yield q.storage.setThrottleMetadata(Me),q.attemptFetch(I,Me)}})()}}class Oc{constructor(I,R,L,q,te){this.app=I,this._client=R,this._storageCache=L,this._storage=q,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ju(C,I){const R=C.target.error||void 0;return Sn.create(I,{originalErrorMessage:R&&R.message})}const bs="app_namespace_store";class Nc{constructor(I,R,L,q=function Pp(){return new Promise((C,I)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=L=>{I(Ju(L,"storage-open"))},R.onsuccess=L=>{C(L.target.result)},R.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(bs,{keyPath:"compositeKey"})}}catch(R){I(Sn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=I,this.appName=R,this.namespace=L,this.openDbPromise=q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(I){return this.set("last_fetch_status",I)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(I){return this.set("last_successful_fetch_timestamp_millis",I)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(I){return this.set("last_successful_fetch_response",I)}getActiveConfig(){return this.get("active_config")}setActiveConfig(I){return this.set("active_config",I)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(I){return this.set("active_config_etag",I)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(I){return this.set("throttle_metadata",I)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(I){var R=this;return(0,P.Z)(function*(){const L=yield R.openDbPromise;return new Promise((q,te)=>{const xe=L.transaction([bs],"readonly").objectStore(bs),et=R.createCompositeKey(I);try{const wt=xe.get(et);wt.onerror=Tt=>{te(Ju(Tt,"storage-get"))},wt.onsuccess=Tt=>{const Dt=Tt.target.result;q(Dt?Dt.value:void 0)}}catch(wt){te(Sn.create("storage-get",{originalErrorMessage:wt&&wt.message}))}})})()}set(I,R){var L=this;return(0,P.Z)(function*(){const q=yield L.openDbPromise;return new Promise((te,Me)=>{const et=q.transaction([bs],"readwrite").objectStore(bs),wt=L.createCompositeKey(I);try{const Tt=et.put({compositeKey:wt,value:R});Tt.onerror=Dt=>{Me(Ju(Dt,"storage-set"))},Tt.onsuccess=()=>{te()}}catch(Tt){Me(Sn.create("storage-set",{originalErrorMessage:Tt&&Tt.message}))}})})()}delete(I){var R=this;return(0,P.Z)(function*(){const L=yield R.openDbPromise;return new Promise((q,te)=>{const xe=L.transaction([bs],"readwrite").objectStore(bs),et=R.createCompositeKey(I);try{const wt=xe.delete(et);wt.onerror=Tt=>{te(Ju(Tt,"storage-delete"))},wt.onsuccess=()=>{q()}}catch(wt){te(Sn.create("storage-delete",{originalErrorMessage:wt&&wt.message}))}})})()}createCompositeKey(I){return[this.appId,this.appName,this.namespace,I].join()}}class Pc{constructor(I){this.storage=I}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var I=this;return(0,P.Z)(function*(){const R=I.storage.getLastFetchStatus(),L=I.storage.getLastSuccessfulFetchTimestampMillis(),q=I.storage.getActiveConfig(),te=yield R;te&&(I.lastFetchStatus=te);const Me=yield L;Me&&(I.lastSuccessfulFetchTimestampMillis=Me);const xe=yield q;xe&&(I.activeConfig=xe)})()}setLastFetchStatus(I){return this.lastFetchStatus=I,this.storage.setLastFetchStatus(I)}setLastSuccessfulFetchTimestampMillis(I){return this.lastSuccessfulFetchTimestampMillis=I,this.storage.setLastSuccessfulFetchTimestampMillis(I)}setActiveConfig(I){return this.activeConfig=I,this.storage.setActiveConfig(I)}}function eo(){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,P.Z)(function*(){if(!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch(C){return!1}})).apply(this,arguments)}!function ko(){(0,oe._registerComponent)(new ge.wA("remote-config",function C(I,{instanceIdentifier:R}){const L=I.getProvider("app").getImmediate(),q=I.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Sn.create("registration-window");if(!(0,ee.hl)())throw Sn.create("indexed-db-unavailable");const{projectId:te,apiKey:Me,appId:xe}=L.options;if(!te)throw Sn.create("registration-project-id");if(!Me)throw Sn.create("registration-api-key");if(!xe)throw Sn.create("registration-app-id");const et=new Nc(xe,L.name,R=R||"firebase"),wt=new Pc(et),Tt=new ie.Yd(sr);Tt.logLevel=ie.in.ERROR;const Dt=new Wa(q,oe.SDK_VERSION,R,te,Me,xe),Ln=new Op(Dt,et),bn=new wh(Ln,et,wt,Tt),Wo=new Oc(L,bn,wt,et,Tt);return function Mr(C){const I=(0,ee.m9)(C);I._initializePromise||(I._initializePromise=I._storageCache.loadFromStorage().then(()=>{I._isInitializationComplete=!0}))}(Wo),Wo},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(sr,"0.3.7"),(0,oe.registerVersion)(sr,"0.3.7","esm2017")}();const Xu="/firebase-messaging-sw.js",Is="/firebase-cloud-messaging-push-scope",$r="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",to="google.c.a.c_id",ca="google.c.a.c_l",Fc="google.c.a.ts",Fp="google.c.a.e";var Ts=(()=>{return(C=Ts||(Ts={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Ts;var C})();function ii(C){const I=new Uint8Array(C);return btoa(String.fromCharCode(...I)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ka(C){const R=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(R),q=new Uint8Array(L.length);for(let te=0;te<L.length;++te)q[te]=L.charCodeAt(te);return q}const Ya="fcm_token_details_db",or="fcm_token_object_Store";function Dh(C){return Qa.apply(this,arguments)}function Qa(){return Qa=(0,P.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Ya))return null;let I=null;return(yield(0,ee.X3)(Ya,5,function(){var L=(0,P.Z)(function*(q,te,Me,xe){var et;if(te<2||!q.objectStoreNames.contains(or))return;const wt=xe.objectStore(or),Tt=yield wt.index("fcmSenderId").get(C);if(yield wt.clear(),Tt)if(2===te){const Dt=Tt;if(!Dt.auth||!Dt.p256dh||!Dt.endpoint)return;I={token:Dt.fcmToken,createTime:null!==(et=Dt.createTime)&&void 0!==et?et:Date.now(),subscriptionOptions:{auth:Dt.auth,p256dh:Dt.p256dh,endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:"string"==typeof Dt.vapidKey?Dt.vapidKey:ii(Dt.vapidKey)}}}else if(3===te){const Dt=Tt;I={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:ii(Dt.auth),p256dh:ii(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:ii(Dt.vapidKey)}}}else if(4===te){const Dt=Tt;I={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:ii(Dt.auth),p256dh:ii(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:ii(Dt.vapidKey)}}}});return function(q,te,Me,xe){return L.apply(this,arguments)}}())).close(),yield(0,ee.Lj)(Ya),yield(0,ee.Lj)("fcm_vapid_details_db"),yield(0,ee.Lj)("undefined"),Lc(I)?I:null}),Qa.apply(this,arguments)}function Lc(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:I}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof I.auth&&I.auth.length>0&&"string"==typeof I.p256dh&&I.p256dh.length>0&&"string"==typeof I.endpoint&&I.endpoint.length>0&&"string"==typeof I.swScope&&I.swScope.length>0&&"string"==typeof I.vapidKey&&I.vapidKey.length>0}const Xi="firebase-messaging-store";let da=null;function el(){return da||(da=(0,ee.X3)("firebase-messaging-database",1,(C,I)=>{0===I&&C.createObjectStore(Xi)})),da}function dn(C){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,P.Z)(function*(C){const I=ro(C),L=yield(yield el()).transaction(Xi).objectStore(Xi).get(I);if(L)return L;{const q=yield Dh(C.appConfig.senderId);if(q)return yield As(C,q),q}})).apply(this,arguments)}function As(C,I){return on.apply(this,arguments)}function on(){return(on=(0,P.Z)(function*(C,I){const R=ro(C),q=(yield el()).transaction(Xi,"readwrite");return yield q.objectStore(Xi).put(I,R),yield q.complete,I})).apply(this,arguments)}function Vc(C){return no.apply(this,arguments)}function no(){return(no=(0,P.Z)(function*(C){const I=ro(C),L=(yield el()).transaction(Xi,"readwrite");yield L.objectStore(Xi).delete(I),yield L.complete})).apply(this,arguments)}function ro({appConfig:C}){return C.appId}const Mn=new ee.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ha(C,I){return _i.apply(this,arguments)}function _i(){return(_i=(0,P.Z)(function*(C,I){const R=yield Ms(C),L=ht(I),q={method:"POST",headers:R,body:JSON.stringify(L)};let te;try{te=yield(yield fetch(Gr(C.appConfig),q)).json()}catch(Me){throw Mn.create("token-subscribe-failed",{errorInfo:Me})}if(te.error)throw Mn.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw Mn.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function gr(C,I){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,P.Z)(function*(C,I){const R=yield Ms(C),L=ht(I.subscriptionOptions),q={method:"PATCH",headers:R,body:JSON.stringify(L)};let te;try{te=yield(yield fetch(`${Gr(C.appConfig)}/${I.token}`,q)).json()}catch(Me){throw Mn.create("token-update-failed",{errorInfo:Me})}if(te.error)throw Mn.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw Mn.create("token-update-no-token");return te.token})).apply(this,arguments)}function es(C,I){return eu.apply(this,arguments)}function eu(){return(eu=(0,P.Z)(function*(C,I){const L={method:"DELETE",headers:yield Ms(C)};try{const te=yield(yield fetch(`${Gr(C.appConfig)}/${I}`,L)).json();if(te.error)throw Mn.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(q){throw Mn.create("token-unsubscribe-failed",{errorInfo:q})}})).apply(this,arguments)}function Gr({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function Ms(C){return xs.apply(this,arguments)}function xs(){return(xs=(0,P.Z)(function*({appConfig:C,installations:I}){const R=yield I.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function ht({p256dh:C,auth:I,endpoint:R,vapidKey:L}){const q={web:{endpoint:R,auth:I,p256dh:C}};return L!==$r&&(q.web.applicationPubKey=L),q}const tu=6048e5;function fa(C){return nu.apply(this,arguments)}function nu(){return(nu=(0,P.Z)(function*(C){const I=yield rl(C.swRegistration,C.vapidKey),R={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:I.endpoint,auth:ii(I.getKey("auth")),p256dh:ii(I.getKey("p256dh"))},L=yield dn(C.firebaseDependencies);if(L){if(Lo(L.subscriptionOptions,R))return Date.now()>=L.createTime+tu?tl(C,{token:L.token,createTime:Date.now(),subscriptionOptions:R}):L.token;try{yield es(C.firebaseDependencies,L.token)}catch(q){console.warn(q)}return Ce(C.firebaseDependencies,R)}return Ce(C.firebaseDependencies,R)})).apply(this,arguments)}function ru(C){return iu.apply(this,arguments)}function iu(){return(iu=(0,P.Z)(function*(C){const I=yield dn(C.firebaseDependencies);I&&(yield es(C.firebaseDependencies,I.token),yield Vc(C.firebaseDependencies));const R=yield C.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function tl(C,I){return nl.apply(this,arguments)}function nl(){return(nl=(0,P.Z)(function*(C,I){try{const R=yield gr(C.firebaseDependencies,I),L=Object.assign(Object.assign({},I),{token:R,createTime:Date.now()});return yield As(C.firebaseDependencies,L),R}catch(R){throw yield ru(C),R}})).apply(this,arguments)}function Ce(C,I){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,P.Z)(function*(C,I){const L={token:yield ha(C,I),createTime:Date.now(),subscriptionOptions:I};return yield As(C,L),L.token})).apply(this,arguments)}function rl(C,I){return pn.apply(this,arguments)}function pn(){return(pn=(0,P.Z)(function*(C,I){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ka(I)})})).apply(this,arguments)}function Lo(C,I){return I.vapidKey===C.vapidKey&&I.endpoint===C.endpoint&&I.auth===C.auth&&I.p256dh===C.p256dh}function Vo(C){const I={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function zr(C,I){if(!I.notification)return;C.notification={};const R=I.notification.title;R&&(C.notification.title=R);const L=I.notification.body;L&&(C.notification.body=L);const q=I.notification.image;q&&(C.notification.image=q)}(I,C),function il(C,I){!I.data||(C.data=I.data)}(I,C),function sl(C,I){if(!I.fcmOptions)return;C.fcmOptions={};const R=I.fcmOptions.link;R&&(C.fcmOptions.link=R);const L=I.fcmOptions.analytics_label;L&&(C.fcmOptions.analyticsLabel=L)}(I,C),I}function Uc(C){return"object"==typeof C&&!!C&&to in C}function ol(C,I){const R=[];for(let L=0;L<C.length;L++)R.push(C.charAt(L)),L<I.length&&R.push(I.charAt(L));return R.join("")}function Rs(C){return Mn.create("missing-app-config-values",{valueName:C})}ol("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ol("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ar{constructor(I,R,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const q=function su(C){if(!C||!C.options)throw Rs("App Configuration Object");if(!C.name)throw Rs("App Name");const I=["projectId","apiKey","appId","messagingSenderId"],{options:R}=C;for(const L of I)if(!R[L])throw Rs(L);return{appName:C.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(I);this.firebaseDependencies={app:I,appConfig:q,installations:R,analyticsProvider:L}}_delete(){return Promise.resolve()}}function si(C){return ou.apply(this,arguments)}function ou(){return(ou=(0,P.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(Xu,{scope:Is}),C.swRegistration.update().catch(()=>{})}catch(I){throw Mn.create("failed-service-worker-registration",{browserErrorMessage:I.message})}})).apply(this,arguments)}function Os(C,I){return yi.apply(this,arguments)}function yi(){return(yi=(0,P.Z)(function*(C,I){if(!I&&!C.swRegistration&&(yield si(C)),I||!C.swRegistration){if(!(I instanceof ServiceWorkerRegistration))throw Mn.create("invalid-sw-registration");C.swRegistration=I}})).apply(this,arguments)}function al(C,I){return au.apply(this,arguments)}function au(){return(au=(0,P.Z)(function*(C,I){I?C.vapidKey=I:C.vapidKey||(C.vapidKey=$r)})).apply(this,arguments)}function ul(){return(ul=(0,P.Z)(function*(C,I){if(!navigator)throw Mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Mn.create("permission-blocked");return yield al(C,null==I?void 0:I.vapidKey),yield Os(C,null==I?void 0:I.serviceWorkerRegistration),fa(C)})).apply(this,arguments)}function pa(C,I,R){return ga.apply(this,arguments)}function ga(){return(ga=(0,P.Z)(function*(C,I,R){const L=ll(I);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:R[to],message_name:R[ca],message_time:R[Fc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ll(C){switch(C){case Ts.NOTIFICATION_CLICKED:return"notification_open";case Ts.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Bc(){return(Bc=(0,P.Z)(function*(C,I){const R=I.data;if(!R.isFirebaseMessaging)return;C.onMessageHandler&&R.messageType===Ts.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Vo(R)):C.onMessageHandler.next(Vo(R)));const L=R.data;Uc(L)&&"1"===L[Fp]&&(yield pa(C,R.messageType,L))})).apply(this,arguments)}const dl="@firebase/messaging",jc=C=>{const I=new ar(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function cl(C,I){return Bc.apply(this,arguments)}(I,R)),I},so=C=>{const I=C.getProvider("messaging").getImmediate();return{getToken:L=>function uu(C,I){return ul.apply(this,arguments)}(I,L)}};function $c(){return oo.apply(this,arguments)}function oo(){return(oo=(0,P.Z)(function*(){try{yield(0,ee.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,ee.hl)()&&(0,ee.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Hc(){(0,oe._registerComponent)(new ge.wA("messaging",jc,"PUBLIC")),(0,oe._registerComponent)(new ge.wA("messaging-internal",so,"PRIVATE")),(0,oe.registerVersion)(dl,"0.9.12"),(0,oe.registerVersion)(dl,"0.9.12","esm2017")}();const fl="analytics",n_="firebase_id",ma="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lu="https://www.googletagmanager.com/gtag/js",Pn=new ie.Yd("@firebase/analytics");function Gc(C){return Promise.all(C.map(I=>I.catch(R=>R)))}function Lp(C,I){const R=document.createElement("script");R.src=`${lu}?l=${C}&id=${I}`,R.async=!0,document.head.appendChild(R)}function Uo(C,I,R,L,q,te){return zc.apply(this,arguments)}function zc(){return(zc=(0,P.Z)(function*(C,I,R,L,q,te){const Me=L[q];try{if(Me)yield I[Me];else{const et=(yield Gc(R)).find(wt=>wt.measurementId===q);et&&(yield I[et.appId])}}catch(xe){Pn.error(xe)}C("config",q,te)})).apply(this,arguments)}function gl(C,I,R,L,q){return ao.apply(this,arguments)}function ao(){return(ao=(0,P.Z)(function*(C,I,R,L,q){try{let te=[];if(q&&q.send_to){let Me=q.send_to;Array.isArray(Me)||(Me=[Me]);const xe=yield Gc(R);for(const et of Me){const wt=xe.find(Dt=>Dt.measurementId===et),Tt=wt&&I[wt.appId];if(!Tt){te=[];break}te.push(Tt)}}0===te.length&&(te=Object.values(I)),yield Promise.all(te),C("event",L,q||{})}catch(te){Pn.error(te)}})).apply(this,arguments)}function Vp(){const C=window.document.getElementsByTagName("script");for(const I of Object.values(C))if(I.src&&I.src.includes(lu))return I;return null}const xn=new ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),_r=new class Rr{constructor(I={},R=1e3){this.throttleMetadata=I,this.intervalMillis=R}getThrottleMetadata(I){return this.throttleMetadata[I]}setThrottleMetadata(I,R){this.throttleMetadata[I]=R}deleteThrottleMetadata(I){delete this.throttleMetadata[I]}};function Bo(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Wc(C){return cn.apply(this,arguments)}function cn(){return(cn=(0,P.Z)(function*(C){var I;const{appId:R,apiKey:L}=C,q={method:"GET",headers:Bo(L)},te=ma.replace("{app-id}",R),Me=yield fetch(te,q);if(200!==Me.status&&304!==Me.status){let xe="";try{const et=yield Me.json();(null===(I=et.error)||void 0===I?void 0:I.message)&&(xe=et.error.message)}catch(et){}throw xn.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:xe})}return Me.json()})).apply(this,arguments)}function Ih(C){return vi.apply(this,arguments)}function vi(){return(vi=(0,P.Z)(function*(C,I=_r,R){const{appId:L,apiKey:q,measurementId:te}=C.options;if(!L)throw xn.create("no-app-id");if(!q){if(te)return{measurementId:te,appId:L};throw xn.create("no-api-key")}const Me=I.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},xe=new ml;return setTimeout((0,P.Z)(function*(){xe.abort()}),void 0!==R?R:6e4),cu({appId:L,apiKey:q,measurementId:te},Me,xe,I)})).apply(this,arguments)}function cu(C,I,R){return oi.apply(this,arguments)}function oi(){return(oi=(0,P.Z)(function*(C,{throttleEndTimeMillis:I,backoffCount:R},L,q=_r){const{appId:te,measurementId:Me}=C;try{yield Pt(L,I)}catch(xe){if(Me)return Pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:te,measurementId:Me};throw xe}try{const xe=yield Wc(C);return q.deleteThrottleMetadata(te),xe}catch(xe){if(!Zc(xe)){if(q.deleteThrottleMetadata(te),Me)return Pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:te,measurementId:Me};throw xe}const et=503===Number(xe.customData.httpStatus)?(0,ee.$s)(R,q.intervalMillis,30):(0,ee.$s)(R,q.intervalMillis),wt={throttleEndTimeMillis:Date.now()+et,backoffCount:R+1};return q.setThrottleMetadata(te,wt),Pn.debug(`Calling attemptFetch again in ${et} millis`),cu(C,wt,L,q)}})).apply(this,arguments)}function Pt(C,I){return new Promise((R,L)=>{const q=Math.max(I-Date.now(),0),te=setTimeout(R,q);C.addEventListener(()=>{clearTimeout(te),L(xn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}function Zc(C){if(!(C instanceof ee.ZR&&C.customData))return!1;const I=Number(C.customData.httpStatus);return 429===I||500===I||503===I||504===I}class ml{constructor(){this.listeners=[]}addEventListener(I){this.listeners.push(I)}abort(){this.listeners.forEach(I=>I())}}function Kc(){return uo.apply(this,arguments)}function uo(){return(uo=(0,P.Z)(function*(){if(!(0,ee.hl)())return Pn.warn(xn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ee.eu)()}catch(C){return Pn.warn(xn.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function rs(){return(rs=(0,P.Z)(function*(C,I,R,L,q,te,Me){var xe;const et=Ih(C);et.then(bn=>{R[bn.measurementId]=bn.appId,C.options.measurementId&&bn.measurementId!==C.options.measurementId&&Pn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${bn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(bn=>Pn.error(bn)),I.push(et);const wt=Kc().then(bn=>{if(bn)return L.getId()}),[Tt,Dt]=yield Promise.all([et,wt]);Vp()||Lp(te,Tt.measurementId),q("js",new Date);const Ln=null!==(xe=null==Me?void 0:Me.config)&&void 0!==xe?xe:{};return Ln.origin="firebase",Ln.update=!0,null!=Dt&&(Ln[n_]=Dt),q("config",Tt.measurementId,Ln),Tt.measurementId})).apply(this,arguments)}class jo{constructor(I){this.app=I}_delete(){return delete ai[this.app.options.appId],Promise.resolve()}}let ai={},Ps=[];const lo={};let Fs,Fi,Pi="dataLayer",yl=!1;function wi(C,I,R){!function Ls(){const C=[];if((0,ee.ru)()&&C.push("This is a browser extension environment."),(0,ee.zI)()||C.push("Cookies are not available."),C.length>0){const I=C.map((L,q)=>`(${q+1}) ${L}`).join(" "),R=xn.create("invalid-analytics-context",{errorInfo:I});Pn.warn(R.message)}}();const L=C.options.appId;if(!L)throw xn.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw xn.create("no-api-key");Pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ai[L])throw xn.create("already-exists",{id:L});if(!yl){!function ns(C){let I=[];Array.isArray(window[C])?I=window[C]:window[C]=I}(Pi);const{wrappedGtag:te,gtagCore:Me}=function bh(C,I,R,L,q){let te=function(...Me){window[L].push(arguments)};return window[q]&&"function"==typeof window[q]&&(te=window[q]),window[q]=function qc(C,I,R,L){function te(){return(te=(0,P.Z)(function*(Me,xe,et){try{"event"===Me?yield gl(C,I,R,xe,et):"config"===Me?yield Uo(C,I,R,L,xe,et):C("set",xe)}catch(wt){Pn.error(wt)}})).apply(this,arguments)}return function q(Me,xe,et){return te.apply(this,arguments)}}(te,C,I,R),{gtagCore:te,wrappedGtag:window[q]}}(ai,Ps,lo,Pi,"gtag");Fi=te,Fs=Me,yl=!0}return ai[L]=function gn(C,I,R,L,q,te,Me){return rs.apply(this,arguments)}(C,Ps,lo,I,Fs,Pi,R),new jo(C)}function $o(){return($o=(0,P.Z)(function*(C,I,R,L,q){if(q&&q.global)C("event",R,L);else{const te=yield I;C("event",R,Object.assign(Object.assign({},L),{send_to:te}))}})).apply(this,arguments)}function Cn(){return Us.apply(this,arguments)}function Us(){return(Us=(0,P.Z)(function*(){if((0,ee.ru)()||!(0,ee.zI)()||!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch(C){return!1}})).apply(this,arguments)}const Bs="@firebase/analytics";!function Hp(){(0,oe._registerComponent)(new ge.wA(fl,(I,{options:R})=>wi(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,oe._registerComponent)(new ge.wA("analytics-internal",function C(I){try{const R=I.getProvider(fl).getImmediate();return{logEvent:(L,q,te)=>function jp(C,I,R,L){C=(0,ee.m9)(C),function Ho(C,I,R,L,q){return $o.apply(this,arguments)}(Fi,ai[C.app.options.appId],I,R,L).catch(q=>Pn.error(q))}(R,L,q,te)}}catch(R){throw xn.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,oe.registerVersion)(Bs,"0.7.8"),(0,oe.registerVersion)(Bs,"0.7.8","esm2017")}();var js=N(4408),du=N(7565);const vl=new class _n extends du.v{}(class ss extends js.o{constructor(I,R){super(I,R),this.scheduler=I,this.work=R}schedule(I,R=0){return R>0?super.schedule(I,R):(this.delay=R,this.state=I,this.scheduler.flush(this),this)}execute(I,R){return R>0||this.closed?super.execute(I,R):this._execute(I,R)}requestAsyncId(I,R,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(I,R,L):I.flush(this)}});var $p=N(4986),wl=N(8505),vr=N(9468),ui=N(5363);const El=new c.GfV("7.3.0"),os="__angularfire_symbol__analyticsIsSupportedValue",Ci="__angularfire_symbol__analyticsIsSupported",Vi="__angularfire_symbol__remoteConfigIsSupportedValue",_a="__angularfire_symbol__remoteConfigIsSupported",Dl="__angularfire_symbol__messagingIsSupportedValue",Cl="__angularfire_symbol__messagingIsSupported";function Hs(C,I,R){if(I){if(1===I.length)return I[0];const te=I.filter(Me=>Me.app===R);if(1===te.length)return te[0]}return R.container.getProvider(C).getImmediate({optional:!0})}globalThis[Ci]||(globalThis[Ci]=Cn().then(C=>globalThis[os]=C).catch(()=>globalThis[os]=!1)),globalThis[Cl]||(globalThis[Cl]=$c().then(C=>globalThis[Dl]=C).catch(()=>globalThis[Dl]=!1)),globalThis[_a]||(globalThis[_a]=eo().then(C=>globalThis[Vi]=C).catch(()=>globalThis[Vi]=!1));const Xc=(C,I)=>{const R=I?[I]:(0,Y.C6)(),L=[];return R.forEach(q=>{q.container.getProvider(C).instances.forEach(Me=>{L.includes(Me)||L.push(Me)})}),L};function co(){}class hu{constructor(I,R=vl){this.zone=I,this.delegate=R}now(){return this.delegate.now()}schedule(I,R,L){const q=this.zone;return this.delegate.schedule(function(Me){q.runGuarded(()=>{I.apply(this,[Me])})},R,L)}}class Ui{constructor(I){this.zone=I,this.task=null}call(I,R){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",co,{},co,co)),R.pipe((0,wl.b)({next:L,complete:L,error:L})).subscribe(I).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let fu=(()=>{class C{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new hu(Zone.current)),this.insideAngular=R.run(()=>new hu(Zone.current,$p.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(R){return new(R||C)(c.LFG(c.R0b))},C.\u0275prov=c.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Bi(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Tl(C){return Bi(),function ho(C){return function(R){return(R=R.lift(new Ui(C.ngZone))).pipe((0,vr.R)(C.outsideAngular),(0,ui.Q)(C.insideAngular))}}(Bi())(C)}},2090:(at,Ie,N)=>{N.d(Ie,{$s:()=>Qs,BH:()=>Se,G6:()=>re,L:()=>ce,LL:()=>Le,Lj:()=>Lt,Mn:()=>Ge,Sg:()=>ke,UG:()=>Ee,US:()=>ie,X3:()=>dt,ZB:()=>J,ZR:()=>me,b$:()=>Te,d:()=>ve,eu:()=>X,hl:()=>Ke,jU:()=>nt,m9:()=>ct,ne:()=>lt,pd:()=>Wi,r3:()=>Wt,ru:()=>Ye,tV:()=>H,uI:()=>fe,vZ:()=>ys,w1:()=>we,xO:()=>Oi,xb:()=>nr,z$:()=>Ve,zI:()=>ae,zd:()=>Sr});var c=N(5861);const ee=function(j){const V=[];let G=0;for(let de=0;de<j.length;de++){let Q=j.charCodeAt(de);Q<128?V[G++]=Q:Q<2048?(V[G++]=Q>>6|192,V[G++]=63&Q|128):55296==(64512&Q)&&de+1<j.length&&56320==(64512&j.charCodeAt(de+1))?(Q=65536+((1023&Q)<<10)+(1023&j.charCodeAt(++de)),V[G++]=Q>>18|240,V[G++]=Q>>12&63|128,V[G++]=Q>>6&63|128,V[G++]=63&Q|128):(V[G++]=Q>>12|224,V[G++]=Q>>6&63|128,V[G++]=63&Q|128)}return V},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,V){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,de=[];for(let Q=0;Q<j.length;Q+=3){const Ue=j[Q],gt=Q+1<j.length,Zt=gt?j[Q+1]:0,fr=Q+2<j.length,$t=fr?j[Q+2]:0;let un=(15&Zt)<<2|$t>>6,Qn=63&$t;fr||(Qn=64,gt||(un=64)),de.push(G[Ue>>2],G[(3&Ue)<<4|Zt>>4],G[un],G[Qn])}return de.join("")},encodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(j):this.encodeByteArray(ee(j),V)},decodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(j):function(j){const V=[];let G=0,de=0;for(;G<j.length;){const Q=j[G++];if(Q<128)V[de++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Ue=j[G++];V[de++]=String.fromCharCode((31&Q)<<6|63&Ue)}else if(Q>239&&Q<365){const fr=((7&Q)<<18|(63&j[G++])<<12|(63&j[G++])<<6|63&j[G++])-65536;V[de++]=String.fromCharCode(55296+(fr>>10)),V[de++]=String.fromCharCode(56320+(1023&fr))}else{const Ue=j[G++],gt=j[G++];V[de++]=String.fromCharCode((15&Q)<<12|(63&Ue)<<6|63&gt)}}return V.join("")}(this.decodeStringToByteArray(j,V))},decodeStringToByteArray(j,V){this.init_();const G=V?this.charToByteMapWebSafe_:this.charToByteMap_,de=[];for(let Q=0;Q<j.length;){const Ue=G[j.charAt(Q++)],Zt=Q<j.length?G[j.charAt(Q)]:0;++Q;const $t=Q<j.length?G[j.charAt(Q)]:64;++Q;const St=Q<j.length?G[j.charAt(Q)]:64;if(++Q,null==Ue||null==Zt||null==$t||null==St)throw Error();de.push(Ue<<2|Zt>>4),64!==$t&&(de.push(Zt<<4&240|$t>>2),64!==St&&de.push($t<<6&192|St))}return de},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},ce=function(j){return function(j){const V=ee(j);return ie.encodeByteArray(V,!0)}(j).replace(/\./g,"")},H=function(j){try{return ie.decodeString(j,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function J(j,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return V}for(const G in V)!V.hasOwnProperty(G)||!We(G)||(j[G]=J(j[G],V[G]));return j}function We(j){return"__proto__"!==j}class Se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,G)=>{this.resolve=V,this.reject=G})}wrapCallback(V){return(G,de)=>{G?this.reject(G):this.resolve(de),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(G):V(G,de))}}}function ke(j,V){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const de=V||"demo-project",Q=j.iat||0,Ue=j.sub||j.user_id;if(!Ue)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const gt=Object.assign({iss:`https://securetoken.google.com/${de}`,aud:de,iat:Q,exp:Q+3600,auth_time:Q,sub:Ue,user_id:Ue,firebase:{sign_in_provider:"custom",identities:{}}},j);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(gt)),""].join(".")}function Ve(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function nt(){return"object"==typeof self&&self.self===self}function Ye(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Te(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ve(){return Ve().indexOf("Electron/")>=0}function we(){const j=Ve();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ge(){return Ve().indexOf("MSAppHost/")>=0}function re(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ke(){return"object"==typeof indexedDB}function X(){return new Promise((j,V)=>{try{let G=!0;const de="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(de);Q.onsuccess=()=>{Q.result.close(),G||self.indexedDB.deleteDatabase(de),j(!0)},Q.onupgradeneeded=()=>{G=!1},Q.onerror=()=>{var Ue;V((null===(Ue=Q.error)||void 0===Ue?void 0:Ue.message)||"")}}catch(G){V(G)}})}function ae(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class me extends Error{constructor(V,G,de){super(G),this.code=V,this.customData=de,this.name="FirebaseError",Object.setPrototypeOf(this,me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Le.prototype.create)}}class Le{constructor(V,G,de){this.service=V,this.serviceName=G,this.errors=de}create(V,...G){const de=G[0]||{},Q=`${this.service}/${V}`,Ue=this.errors[V],gt=Ue?function Et(j,V){return j.replace(zt,(G,de)=>{const Q=V[de];return null!=Q?String(Q):`<${de}?>`})}(Ue,de):"Error";return new me(Q,`${this.serviceName}: ${gt} (${Q}).`,de)}}const zt=/\{\$([^}]+)}/g;function Wt(j,V){return Object.prototype.hasOwnProperty.call(j,V)}function nr(j){for(const V in j)if(Object.prototype.hasOwnProperty.call(j,V))return!1;return!0}function ys(j,V){if(j===V)return!0;const G=Object.keys(j),de=Object.keys(V);for(const Q of G){if(!de.includes(Q))return!1;const Ue=j[Q],gt=V[Q];if(Ar(Ue)&&Ar(gt)){if(!ys(Ue,gt))return!1}else if(Ue!==gt)return!1}for(const Q of de)if(!G.includes(Q))return!1;return!0}function Ar(j){return null!==j&&"object"==typeof j}function Oi(j){const V=[];for(const[G,de]of Object.entries(j))Array.isArray(de)?de.forEach(Q=>{V.push(encodeURIComponent(G)+"="+encodeURIComponent(Q))}):V.push(encodeURIComponent(G)+"="+encodeURIComponent(de));return V.length?"&"+V.join("&"):""}function Sr(j){const V={};return j.replace(/^\?/,"").split("&").forEach(de=>{if(de){const[Q,Ue]=de.split("=");V[decodeURIComponent(Q)]=decodeURIComponent(Ue)}}),V}function Wi(j){const V=j.indexOf("?");if(!V)return"";const G=j.indexOf("#",V);return j.substring(V,G>0?G:void 0)}function lt(j,V){const G=new jr(j,V);return G.subscribe.bind(G)}class jr{constructor(V,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{V(this)}).catch(de=>{this.error(de)})}next(V){this.forEachObserver(G=>{G.next(V)})}error(V){this.forEachObserver(G=>{G.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,G,de){let Q;if(void 0===V&&void 0===G&&void 0===de)throw new Error("Missing Observer.");Q=function Vn(j,V){if("object"!=typeof j||null===j)return!1;for(const G of V)if(G in j&&"function"==typeof j[G])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:G,complete:de},void 0===Q.next&&(Q.next=ti),void 0===Q.error&&(Q.error=ti),void 0===Q.complete&&(Q.complete=ti);const Ue=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch(gt){}}),this.observers.push(Q),Ue}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,V)}sendOne(V,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{G(this.observers[V])}catch(de){"undefined"!=typeof console&&console.error&&console.error(de)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ti(){}function Qs(j,V=1e3,G=2){const de=V*Math.pow(G,j),Q=Math.round(.5*de*(Math.random()-.5)*2);return Math.min(144e5,de+Q)}function ct(j){return j&&j._delegate?j._delegate:j}function hr(j,V){return new Promise((G,de)=>{j.onsuccess=Q=>{G(Q.target.result)},j.onerror=Q=>{var Ue;de(`${V}: ${null===(Ue=Q.target.error)||void 0===Ue?void 0:Ue.message}`)}})}class Nt{constructor(V){this._db=V,this.objectStoreNames=this._db.objectStoreNames}transaction(V,G="readonly"){return new Je(this._db.transaction.call(this._db,V,G))}createObjectStore(V,G){return new Ae(this._db.createObjectStore(V,G))}close(){this._db.close()}}class Je{constructor(V){this._transaction=V,this.complete=new Promise((G,de)=>{this._transaction.oncomplete=function(){G()},this._transaction.onerror=()=>{de(this._transaction.error)},this._transaction.onabort=()=>{de(this._transaction.error)}})}objectStore(V){return new Ae(this._transaction.objectStore(V))}}class Ae{constructor(V){this._store=V}index(V){return new Xe(this._store.index(V))}createIndex(V,G,de){return new Xe(this._store.createIndex(V,G,de))}get(V){return hr(this._store.get(V),"Error reading from IndexedDB")}put(V,G){return hr(this._store.put(V,G),"Error writing to IndexedDB")}delete(V){return hr(this._store.delete(V),"Error deleting from IndexedDB")}clear(){return hr(this._store.clear(),"Error clearing IndexedDB object store")}}class Xe{constructor(V){this._index=V}get(V){return hr(this._index.get(V),"Error reading from IndexedDB")}}function dt(j,V,G){return new Promise((de,Q)=>{try{const Ue=indexedDB.open(j,V);Ue.onsuccess=gt=>{de(new Nt(gt.target.result))},Ue.onerror=gt=>{var Zt;Q(`Error opening indexedDB: ${null===(Zt=gt.target.error)||void 0===Zt?void 0:Zt.message}`)},Ue.onupgradeneeded=gt=>{G(new Nt(Ue.result),gt.oldVersion,gt.newVersion,new Je(Ue.transaction))}}catch(Ue){Q(`Error opening indexedDB: ${Ue.message}`)}})}function Lt(j){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,c.Z)(function*(j){return new Promise((V,G)=>{try{const de=indexedDB.deleteDatabase(j);de.onsuccess=()=>{V()},de.onerror=Q=>{var Ue;G(`Error deleting indexedDB database "${j}": ${null===(Ue=Q.target.error)||void 0===Ue?void 0:Ue.message}`)}}catch(de){G(`Error deleting indexedDB database "${j}": ${de.message}`)}})})).apply(this,arguments)}},2805:(at,Ie,N)=>{var c=N(5e3);let Y=null;function P(){return Y}const ie=new c.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function ce(){return(0,c.LFG)($)}()},providedIn:"platform"}),n})();const H=new c.OlP("Location Initialized");let $=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){J()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){J()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function We(){return new $((0,c.LFG)(ie))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ve(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ee(n){const e=(0,c.LFG)(ie).location;return new Ye((0,c.LFG)(he),e&&e.origin||"")}()},providedIn:"root"}),n})();const nt=new c.OlP("appBaseHref");let Ye=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ve(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const h=this.prepareExternalUrl(s+Ve(u));this._platformLocation.pushState(t,r,h)}replaceState(t,r,s,u){const h=this.prepareExternalUrl(s+Ve(u));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he),c.LFG(nt,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let h=this.prepareExternalUrl(s+Ve(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,s,u){let h=this.prepareExternalUrl(s+Ve(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he),c.LFG(nt,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),ve=(()=>{class n{constructor(t,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const s=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=ke($e(s)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ve(r))}normalize(t){return n.stripTrailingSlash(function Ge(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._platformStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),s)}replaceState(t,r="",s=null){this._platformStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformStrategy).historyGo)||void 0===s||s.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=Ve,n.joinWithSlash=Se,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(c.LFG(fe),c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function we(){return new ve((0,c.LFG)(fe),(0,c.LFG)(he))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}var ae=(()=>((ae=ae||{})[ae.Format=0]="Format",ae[ae.Standalone=1]="Standalone",ae))(),ne=(()=>((ne=ne||{})[ne.Narrow=0]="Narrow",ne[ne.Abbreviated=1]="Abbreviated",ne[ne.Wide=2]="Wide",ne[ne.Short=3]="Short",ne))(),De=(()=>((De=De||{})[De.Short=0]="Short",De[De.Medium=1]="Medium",De[De.Long=2]="Long",De[De.Full=3]="Full",De))(),me=(()=>((me=me||{})[me.Decimal=0]="Decimal",me[me.Group=1]="Group",me[me.List=2]="List",me[me.PercentSign=3]="PercentSign",me[me.PlusSign=4]="PlusSign",me[me.MinusSign=5]="MinusSign",me[me.Exponential=6]="Exponential",me[me.SuperscriptingExponent=7]="SuperscriptingExponent",me[me.PerMille=8]="PerMille",me[me.Infinity=9]="Infinity",me[me.NaN=10]="NaN",me[me.TimeSeparator=11]="TimeSeparator",me[me.CurrencyDecimal=12]="CurrencyDecimal",me[me.CurrencyGroup=13]="CurrencyGroup",me))();function Qt(n,e){return Kn((0,c.cg1)(n)[c.wAp.DateFormat],e)}function gi(n,e){return Kn((0,c.cg1)(n)[c.wAp.TimeFormat],e)}function Wt(n,e){return Kn((0,c.cg1)(n)[c.wAp.DateTimeFormat],e)}function jt(n,e){const t=(0,c.cg1)(n),r=t[c.wAp.NumberSymbols][e];if(void 0===r){if(e===me.CurrencyDecimal)return t[c.wAp.NumberSymbols][me.Decimal];if(e===me.CurrencyGroup)return t[c.wAp.NumberSymbols][me.Group]}return r}function Wi(n){if(!n[c.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[c.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Kn(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Vn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Yn=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,vs={},oa=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ht=(()=>((Ht=Ht||{})[Ht.Short=0]="Short",Ht[Ht.ShortGMT=1]="ShortGMT",Ht[Ht.Long=2]="Long",Ht[Ht.Extended=3]="Extended",Ht))(),ot=(()=>((ot=ot||{})[ot.FullYear=0]="FullYear",ot[ot.Month=1]="Month",ot[ot.Date=2]="Date",ot[ot.Hours=3]="Hours",ot[ot.Minutes=4]="Minutes",ot[ot.Seconds=5]="Seconds",ot[ot.FractionalSeconds=6]="FractionalSeconds",ot[ot.Day=7]="Day",ot))(),yt=(()=>((yt=yt||{})[yt.DayPeriods=0]="DayPeriods",yt[yt.Days=1]="Days",yt[yt.Months=2]="Months",yt[yt.Eras=3]="Eras",yt))();function rr(n,e,t,r){let s=function Zt(n){if($t(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[s,u=1,h=1]=n.split("-").map(m=>+m);return ki(s,u-1,h)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Yn))return function fr(n){const e=new Date(0);let t=0,r=0;const s=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),s.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const h=Number(n[4]||0)-t,m=Number(n[5]||0)-r,w=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,h,m,w,b),e}(r)}const e=new Date(n);if(!$t(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Vt(t,e)||e;let m,h=[];for(;e;){if(m=oa.exec(e),!m){h.push(e);break}{h=h.concat(m.slice(1));const x=h.pop();if(!x)break;e=x}}let w=s.getTimezoneOffset();r&&(w=Q(r,w),s=function gt(n,e,t){const r=t?-1:1,s=n.getTimezoneOffset();return function Ue(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Q(e,s)-s))}(s,r,!0));let b="";return h.forEach(x=>{const O=function de(n){if(G[n])return G[n];let e;switch(n){case"G":case"GG":case"GGG":e=Nt(yt.Eras,ne.Abbreviated);break;case"GGGG":e=Nt(yt.Eras,ne.Wide);break;case"GGGGG":e=Nt(yt.Eras,ne.Narrow);break;case"y":e=ct(ot.FullYear,1,0,!1,!0);break;case"yy":e=ct(ot.FullYear,2,0,!0,!0);break;case"yyy":e=ct(ot.FullYear,3,0,!1,!0);break;case"yyyy":e=ct(ot.FullYear,4,0,!1,!0);break;case"Y":e=V(1);break;case"YY":e=V(2,!0);break;case"YYY":e=V(3);break;case"YYYY":e=V(4);break;case"M":case"L":e=ct(ot.Month,1,1);break;case"MM":case"LL":e=ct(ot.Month,2,1);break;case"MMM":e=Nt(yt.Months,ne.Abbreviated);break;case"MMMM":e=Nt(yt.Months,ne.Wide);break;case"MMMMM":e=Nt(yt.Months,ne.Narrow);break;case"LLL":e=Nt(yt.Months,ne.Abbreviated,ae.Standalone);break;case"LLLL":e=Nt(yt.Months,ne.Wide,ae.Standalone);break;case"LLLLL":e=Nt(yt.Months,ne.Narrow,ae.Standalone);break;case"w":e=j(1);break;case"ww":e=j(2);break;case"W":e=j(1,!0);break;case"d":e=ct(ot.Date,1);break;case"dd":e=ct(ot.Date,2);break;case"c":case"cc":e=ct(ot.Day,1);break;case"ccc":e=Nt(yt.Days,ne.Abbreviated,ae.Standalone);break;case"cccc":e=Nt(yt.Days,ne.Wide,ae.Standalone);break;case"ccccc":e=Nt(yt.Days,ne.Narrow,ae.Standalone);break;case"cccccc":e=Nt(yt.Days,ne.Short,ae.Standalone);break;case"E":case"EE":case"EEE":e=Nt(yt.Days,ne.Abbreviated);break;case"EEEE":e=Nt(yt.Days,ne.Wide);break;case"EEEEE":e=Nt(yt.Days,ne.Narrow);break;case"EEEEEE":e=Nt(yt.Days,ne.Short);break;case"a":case"aa":case"aaa":e=Nt(yt.DayPeriods,ne.Abbreviated);break;case"aaaa":e=Nt(yt.DayPeriods,ne.Wide);break;case"aaaaa":e=Nt(yt.DayPeriods,ne.Narrow);break;case"b":case"bb":case"bbb":e=Nt(yt.DayPeriods,ne.Abbreviated,ae.Standalone,!0);break;case"bbbb":e=Nt(yt.DayPeriods,ne.Wide,ae.Standalone,!0);break;case"bbbbb":e=Nt(yt.DayPeriods,ne.Narrow,ae.Standalone,!0);break;case"B":case"BB":case"BBB":e=Nt(yt.DayPeriods,ne.Abbreviated,ae.Format,!0);break;case"BBBB":e=Nt(yt.DayPeriods,ne.Wide,ae.Format,!0);break;case"BBBBB":e=Nt(yt.DayPeriods,ne.Narrow,ae.Format,!0);break;case"h":e=ct(ot.Hours,1,-12);break;case"hh":e=ct(ot.Hours,2,-12);break;case"H":e=ct(ot.Hours,1);break;case"HH":e=ct(ot.Hours,2);break;case"m":e=ct(ot.Minutes,1);break;case"mm":e=ct(ot.Minutes,2);break;case"s":e=ct(ot.Seconds,1);break;case"ss":e=ct(ot.Seconds,2);break;case"S":e=ct(ot.FractionalSeconds,1);break;case"SS":e=ct(ot.FractionalSeconds,2);break;case"SSS":e=ct(ot.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ae(Ht.Short);break;case"ZZZZZ":e=Ae(Ht.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ae(Ht.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ae(Ht.Long);break;default:return null}return G[n]=e,e}(x);b+=O?O(s,t,w):"''"===x?"'":x.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function ki(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Vt(n,e){const t=function Et(n){return(0,c.cg1)(n)[c.wAp.LocaleId]}(n);if(vs[t]=vs[t]||{},vs[t][e])return vs[t][e];let r="";switch(e){case"shortDate":r=Qt(n,De.Short);break;case"mediumDate":r=Qt(n,De.Medium);break;case"longDate":r=Qt(n,De.Long);break;case"fullDate":r=Qt(n,De.Full);break;case"shortTime":r=gi(n,De.Short);break;case"mediumTime":r=gi(n,De.Medium);break;case"longTime":r=gi(n,De.Long);break;case"fullTime":r=gi(n,De.Full);break;case"short":const s=Vt(n,"shortTime"),u=Vt(n,"shortDate");r=Qs(Wt(n,De.Short),[s,u]);break;case"medium":const h=Vt(n,"mediumTime"),m=Vt(n,"mediumDate");r=Qs(Wt(n,De.Medium),[h,m]);break;case"long":const w=Vt(n,"longTime"),b=Vt(n,"longDate");r=Qs(Wt(n,De.Long),[w,b]);break;case"full":const x=Vt(n,"fullTime"),O=Vt(n,"fullDate");r=Qs(Wt(n,De.Full),[x,O])}return r&&(vs[t][e]=r),r}function Qs(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function dr(n,e,t="-",r,s){let u="";(n<0||s&&n<=0)&&(s?n=1-n:(n=-n,u=t));let h=String(n);for(;h.length<e;)h="0"+h;return r&&(h=h.substr(h.length-e)),u+h}function ct(n,e,t=0,r=!1,s=!1){return function(u,h){let m=function hr(n,e){switch(n){case ot.FullYear:return e.getFullYear();case ot.Month:return e.getMonth();case ot.Date:return e.getDate();case ot.Hours:return e.getHours();case ot.Minutes:return e.getMinutes();case ot.Seconds:return e.getSeconds();case ot.FractionalSeconds:return e.getMilliseconds();case ot.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||m>-t)&&(m+=t),n===ot.Hours)0===m&&-12===t&&(m=12);else if(n===ot.FractionalSeconds)return function ir(n,e){return dr(n,3).substr(0,e)}(m,e);const w=jt(h,me.MinusSign);return dr(m,e,w,r,s)}}function Nt(n,e,t=ae.Format,r=!1){return function(s,u){return function Je(n,e,t,r,s,u){switch(t){case yt.Months:return function ze(n,e,t){const r=(0,c.cg1)(n),u=Kn([r[c.wAp.MonthsFormat],r[c.wAp.MonthsStandalone]],e);return Kn(u,t)}(e,s,r)[n.getMonth()];case yt.Days:return function nn(n,e,t){const r=(0,c.cg1)(n),u=Kn([r[c.wAp.DaysFormat],r[c.wAp.DaysStandalone]],e);return Kn(u,t)}(e,s,r)[n.getDay()];case yt.DayPeriods:const h=n.getHours(),m=n.getMinutes();if(u){const b=function Zi(n){const e=(0,c.cg1)(n);return Wi(e),(e[c.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Vn(r):[Vn(r[0]),Vn(r[1])])}(e),x=function lt(n,e,t){const r=(0,c.cg1)(n);Wi(r);const u=Kn([r[c.wAp.ExtraData][0],r[c.wAp.ExtraData][1]],e)||[];return Kn(u,t)||[]}(e,s,r),O=b.findIndex(U=>{if(Array.isArray(U)){const[K,le]=U,Oe=h>=K.hours&&m>=K.minutes,qe=h<le.hours||h===le.hours&&m<le.minutes;if(K.hours<le.hours){if(Oe&&qe)return!0}else if(Oe||qe)return!0}else if(U.hours===h&&U.minutes===m)return!0;return!1});if(-1!==O)return x[O]}return function zt(n,e,t){const r=(0,c.cg1)(n),u=Kn([r[c.wAp.DayPeriodsFormat],r[c.wAp.DayPeriodsStandalone]],e);return Kn(u,t)}(e,s,r)[h<12?0:1];case yt.Eras:return function Bt(n,e){return Kn((0,c.cg1)(n)[c.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(s,u,n,e,t,r)}}function Ae(n){return function(e,t,r){const s=-1*r,u=jt(t,me.MinusSign),h=s>0?Math.floor(s/60):Math.ceil(s/60);switch(n){case Ht.Short:return(s>=0?"+":"")+dr(h,2,u)+dr(Math.abs(s%60),2,u);case Ht.ShortGMT:return"GMT"+(s>=0?"+":"")+dr(h,1,u);case Ht.Long:return"GMT"+(s>=0?"+":"")+dr(h,2,u)+":"+dr(Math.abs(s%60),2,u);case Ht.Extended:return 0===r?"Z":(s>=0?"+":"")+dr(h,2,u)+":"+dr(Math.abs(s%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function Rt(n){return ki(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function j(n,e=!1){return function(t,r){let s;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,h=t.getDate();s=1+Math.floor((h+u)/7)}else{const u=Rt(t),h=function Lt(n){const e=ki(n,0,1).getDay();return ki(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),m=u.getTime()-h.getTime();s=1+Math.round(m/6048e5)}return dr(s,n,jt(r,me.MinusSign))}}function V(n,e=!1){return function(t,r){return dr(Rt(t).getFullYear(),n,jt(r,me.MinusSign),e)}}const G={};function Q(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function $t(n){return n instanceof Date&&!isNaN(n.valueOf())}class Ds{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Jn=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,h)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Ds(s.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,h),Yi(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Yi(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Yi(n,e){n.context.$implicit=e.item}let Mr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new sn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ga("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ga("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class sn{constructor(){this.$implicit=null,this.ngIf=null}}function Ga(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}const Pp=new c.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Nc=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",s,u){var h;if(null==t||""===t||t!=t)return null;try{return rr(t,r,u||this.locale,null!==(h=null!=s?s:this.defaultTimezone)&&void 0!==h?h:void 0)}catch(m){throw function Nn(n,e){return new c.vHH(2100,"")}()}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16),c.Y36(Pp,24))},n.\u0275pipe=c.Yjl({name:"date",type:n,pure:!0}),n})(),Po=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Ts="browser";function or(n){return"server"===n}let Ja=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new Xa((0,c.LFG)(ie),window)}),n})();class Xa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function da(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const h=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(h)return h}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Xi(this.window.history)||Xi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Xi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class As extends class Fo extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ee(n){Y||(Y=n)}(new As)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Vc(){return on=on||document.querySelector("base"),on?on.getAttribute("href"):null}();return null==t?null:function ro(n){no=no||document.createElement("a"),no.setAttribute("href",n);const e=no.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){on=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Oo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let no,on=null;const pr=new c.OlP("TRANSITION_ID"),ha=[{provide:c.ip1,useFactory:function Mn(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=P(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[pr,ie,c.zs3],multi:!0}];class _i{static init(){(0,c.VLi)(new _i)}addToWindow(e){c.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const s=c.dqk.getAllAngularTestabilities();let u=s.length,h=!1;const m=function(w){h=h||w,u--,0==u&&r(h)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const s=e.getTestability(t);return null!=s?s:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let gr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Ss=new c.OlP("EventManagerPlugins");let es=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const h=s[u];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ss),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class eu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=P().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let Gr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ms=(()=>{class n extends Gr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const h=this._doc.createElement("style");h.textContent=u,s.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(xs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(xs))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function xs(n){P().remove(n)}const ht={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},tu=/%COMP%/g;function Ce(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?Ce(n,s,t):(s=s.replace(tu,n),t.push(s))}return t}function Ot(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let pn=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Lo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new il(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case c.ifc.ShadowDom:return new sl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=Ce(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(es),c.LFG(Ms),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Lo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ht[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=ht[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=ht[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,s&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ot(r)):this.eventManager.addEventListener(e,t,Ot(r))}}class il extends Lo{constructor(e,t,r,s){super(e),this.component=r;const u=Ce(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function tl(n){return"_ngcontent-%COMP%".replace(tu,n)}(s+"-"+r.id),this.hostAttr=function nl(n){return"_nghost-%COMP%".replace(tu,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class sl extends Lo{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ce(s.id,s.styles,[]);for(let h=0;h<u.length;h++){const m=document.createElement("style");m.textContent=u[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Uc=(()=>{class n extends eu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const ol=["alt","control","meta","shift"],Rs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ar={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},si={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ou=(()=>{class n extends eu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),h=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let h="";if(ol.forEach(w=>{const b=r.indexOf(w);b>-1&&(r.splice(b,1),h+=w+".")}),h+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=s,m.fullKey=h,m}static getEventFullKey(t){let r="",s=function Os(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ar.hasOwnProperty(e)&&(e=ar[e]))}return Rs[e]||e}(t);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),ol.forEach(u=>{u!=s&&si[u](t)&&(r+=u+".")}),r+=s,r}static eventCallback(t,r,s){return u=>{n.getEventFullKey(u)===t&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const ul=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:Ts},{provide:c.g9A,useValue:function yi(){As.makeCurrent(),_i.init()},multi:!0},{provide:ie,useFactory:function au(){return(0,c.RDi)(document),document},deps:[]}]),pa=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function al(){return new c.qLn},deps:[]},{provide:Ss,useClass:Uc,multi:!0,deps:[ie,c.R0b,c.Lbi]},{provide:Ss,useClass:ou,multi:!0,deps:[ie]},{provide:pn,useClass:pn,deps:[es,Ms,c.AFp]},{provide:c.FYo,useExisting:pn},{provide:Gr,useExisting:Ms},{provide:Ms,useClass:Ms,deps:[ie]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:es,useClass:es,deps:[Ss,c.R0b]},{provide:class dn{},useClass:gr,deps:[]}];let ga=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:pr,useExisting:c.AFp},ha]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:pa,imports:[Po,c.hGG]}),n})();"undefined"!=typeof window&&window;var Dn=N(8996),xn=N(3269);function ft(...n){const e=(0,xn.yG)(n);return(0,Dn.D)(n,e)}var Fn=N(7579);class Rr extends Fn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var _r=N(8306);const{isArray:Bo}=Array,{getPrototypeOf:Wc,prototype:cn,keys:Ih}=Object;function vi(n){if(1===n.length){const e=n[0];if(Bo(e))return{args:e,keys:null};if(function cu(n){return n&&"object"==typeof n&&Wc(n)===cn}(e)){const t=Ih(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var oi=N(4671),Pt=N(4004);const{isArray:Zc}=Array;function Kc(n){return(0,Pt.U)(e=>function ml(n,e){return Zc(e)?n(...e):n(e)}(n,e))}function uo(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var gn=N(5403),rs=N(9672);function Ps(n,e,t){n?(0,rs.f)(t,n,e):e()}var lo=N(576);function Pi(n,e){const t=(0,lo.m)(n)?n:()=>n,r=s=>s.error(t());return new _r.y(e?s=>e.schedule(r,0,s):r)}const Fs=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Fi=N(8189);function Yc(...n){return function yl(){return(0,Fi.J)(1)}()((0,Dn.D)(n,(0,xn.yG)(n)))}var Ls=N(8421);function wi(n){return new _r.y(e=>{(0,Ls.Xf)(n()).subscribe(e)})}var Ho=N(515),$o=N(727),ur=N(4482);function Ei(){return(0,ur.e)((n,e)=>{let t=null;n._refCount++;const r=(0,gn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Qc extends _r.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ur.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $o.w0;const t=this.getSubject();e.add(this.source.subscribe((0,gn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$o.w0.EMPTY)}return e}refCount(){return Ei()(this)}}function Rn(n,e){return(0,ur.e)((t,r)=>{let s=null,u=0,h=!1;const m=()=>h&&!s&&r.complete();t.subscribe((0,gn.x)(r,w=>{null==s||s.unsubscribe();let b=0;const x=u++;(0,Ls.Xf)(n(w,x)).subscribe(s=(0,gn.x)(r,O=>r.next(e?e(w,O,x,b++):O),()=>{s=null,m()}))},()=>{h=!0,m()}))})}var Vs=N(5698);function Di(...n){const e=(0,xn.yG)(n);return(0,ur.e)((t,r)=>{(e?Yc(n,t,e):Yc(n,t)).subscribe(r)})}function Go(n,e,t,r,s){return(u,h)=>{let m=t,w=e,b=0;u.subscribe((0,gn.x)(h,x=>{const O=b++;w=m?n(w,x,O):(m=!0,x),r&&h.next(w)},s&&(()=>{m&&h.next(w),h.complete()})))}}function yr(n,e){return(0,ur.e)(Go(n,e,arguments.length>=2,!0))}function is(n,e){return(0,ur.e)((t,r)=>{let s=0;t.subscribe((0,gn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}function Li(n){return(0,ur.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,gn.x)(t,void 0,void 0,h=>{u=(0,Ls.Xf)(n(h,Li(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Cn=N(5577);function Us(n,e){return(0,lo.m)(e)?(0,Cn.z)(n,e,1):(0,Cn.z)(n,1)}function Jc(n){return n<=0?()=>Ho.E:(0,ur.e)((e,t)=>{let r=[];e.subscribe((0,gn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function mn(n=Up){return(0,ur.e)((e,t)=>{let r=!1;e.subscribe((0,gn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Up(){return new Fs}function Bp(n){return(0,ur.e)((e,t)=>{let r=!1;e.subscribe((0,gn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Bs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?is((s,u)=>n(s,u,r)):oi.y,(0,Vs.q)(1),t?Bp(e):mn(()=>new Fs))}var qr=N(8505);class js{constructor(e,t){this.id=e,this.url=t}}class ss extends js{constructor(e,t,r="imperative",s=null){super(e,t),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class du extends js{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _n extends js{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vl extends js{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zo extends js{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $p extends js{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wl extends js{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vr extends js{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ui extends js{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class El{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class os{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ci{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vi{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _a{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const xt="primary";class bl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Bn(n){return new bl(n)}const Il="ngNavigationCancelingError";function Hs(n){const e=Error("NavigationCancelingError: "+n);return e[Il]=!0,e}function co(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const h=r[u],m=n[u];if(h.startsWith(":"))s[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Ui(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!fu(n[s],e[s]))return!1;return!0}function fu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function Bi(n){return Array.prototype.concat.apply([],n)}function ed(n){return n.length>0?n[n.length-1]:null}function jn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function li(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,Dn.D)(Promise.resolve(n)):ft(n)}const ho={exact:function I(n,e,t){if(!Tt(n.segments,e.segments)||!te(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!I(n.children[r],e.children[r],t))return!1;return!0},subset:L},qo={exact:function C(n,e){return Ui(n,e)},subset:function R(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>fu(n[t],e[t]))},ignored:()=>!0};function pu(n,e,t){return ho[t.paths](n.root,e.root,t.matrixParams)&&qo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function L(n,e,t){return q(n,e,e.segments,t)}function q(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Tt(s,t)||e.hasChildren()||!te(s,t,r))}if(n.segments.length===t.length){if(!Tt(n.segments,t)||!te(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!L(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Tt(n.segments,s)&&te(n.segments,s,r)&&n.children[xt])&&q(n.children[xt],e,u,r)}}function te(n,e,t){return e.every((r,s)=>qo[t](n[s].parameters,r.parameters))}class Me{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bn(this.queryParams)),this._queryParamMap}toString(){return Wo.serialize(this)}}class xe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,jn(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fo(this)}}class et{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Bn(this.parameters)),this._parameterMap}toString(){return ya(this)}}function Tt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Ln{}class bn{parse(e){const t=new nd(e);return new Me(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Or(e.root,!0)}`,r=function r_(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${bi(t)}=${bi(s)}`).join("&"):`${bi(t)}=${bi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function po(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Wo=new bn;function fo(n){return n.segments.map(e=>ya(e)).join("/")}function Or(n,e){if(!n.hasChildren())return fo(n);if(e){const t=n.children[xt]?Or(n.children[xt],!1):"",r=[];return jn(n.children,(s,u)=>{u!==xt&&r.push(`${u}:${Or(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Dt(n,e){let t=[];return jn(n.children,(r,s)=>{s===xt&&(t=t.concat(e(r,s)))}),jn(n.children,(r,s)=>{s!==xt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===xt?[Or(n.children[xt],!1)]:[`${s}:${Or(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xt]?`${fo(n)}/${t[0]}`:`${fo(n)}/(${t.join("//")})`}}function ci(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bi(n){return ci(n).replace(/%3B/gi,";")}function td(n){return ci(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Al(n){return decodeURIComponent(n)}function Sl(n){return Al(n.replace(/\+/g,"%20"))}function ya(n){return`${td(n.path)}${function Gp(n){return Object.keys(n).map(e=>`;${td(e)}=${td(n[e])}`).join("")}(n.parameters)}`}const i_=/^[^\/()?;=#]+/;function as(n){const e=n.match(i_);return e?e[0]:""}const Ml=/^[^=?&#]+/,o_=/^[^&#]+/;class nd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xt]=new xe(e,t)),r}parseSegment(){const e=as(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new et(Al(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=as(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=as(this.remaining);s&&(r=s,this.capture(r))}e[Al(t)]=Al(r)}parseQueryParam(e){const t=function s_(n){const e=n.match(Ml);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function zp(n){const e=n.match(o_);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const s=Sl(t),u=Sl(r);if(e.hasOwnProperty(s)){let h=e[s];Array.isArray(h)||(h=[h],e[s]=h),h.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=as(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=xt);const h=this.parseChildren();t[u]=1===Object.keys(h).length?h[xt]:new xe([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class a_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Th(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Th(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ah(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Ah(e,this._root).map(t=>t.value)}}function Th(n,e){if(n===e.value)return e;for(const t of e.children){const r=Th(n,t);if(r)return r}return null}function Ah(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ah(n,t);if(r.length)return r.unshift(e),r}return[]}class go{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function mo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class rd extends a_{constructor(e,t){super(e),this.snapshot=t,sd(this,e)}toString(){return this.snapshot.toString()}}function va(n,e){const t=function u_(n,e){const h=new gu([],{},{},"",{},xt,e,null,n.root,-1,{});return new Sh("",new go(h,[]))}(n,e),r=new Rr([new et("",{})]),s=new Rr({}),u=new Rr({}),h=new Rr({}),m=new Rr(""),w=new Zo(r,s,h,m,u,xt,e,t.root);return w.snapshot=t.root,new rd(new go(w,[]),t)}class Zo{constructor(e,t,r,s,u,h,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=h,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Pt.U)(e=>Bn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Pt.U)(e=>Bn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function l_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function id(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class gu{constructor(e,t,r,s,u,h,m,w,b,x,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=h,this.component=m,this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=x,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Bn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Sh extends a_{constructor(e,t){super(t),this.url=e,sd(this,t)}toString(){return od(this._root)}}function sd(n,e){e.value._routerState=n,e.children.forEach(t=>sd(n,t))}function od(n){const e=n.children.length>0?` { ${n.children.map(od).join(", ")} } `:"";return`${n.value}${e}`}function ad(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ui(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ui(e.params,t.params)||n.params.next(t.params),function hu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ui(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ui(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Mh(n,e){const t=Ui(n.params,e.params)&&function wt(n,e){return Tt(n,e)&&n.every((t,r)=>Ui(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Mh(n.parent,e.parent))}function xl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function xh(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return xl(n,r,s);return xl(n,r)})}(n,e,t);return new go(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const h=u.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(m=>xl(n,m)),h}}const r=function d_(n){return new Zo(new Rr(n.url),new Rr(n.params),new Rr(n.queryParams),new Rr(n.fragment),new Rr(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>xl(n,u));return new go(r,s)}}function Ko(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function mu(n){return"object"==typeof n&&null!=n&&n.outlets}function qp(n,e,t,r,s){let u={};if(r&&jn(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(b=>`${b}`):`${m}`}),n===e)return new Me(t,u,s);const h=Rh(n,e,t);return new Me(h,u,s)}function Rh(n,e,t){const r={};return jn(n.children,(s,u)=>{r[u]=s===e?t:Rh(s,e,t)}),new xe(n.segments,r)}class h_{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ko(r[0]))throw new Error("Root segment cannot have matrix parameters");const s=r.find(mu);if(s&&s!==ed(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Oh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function m_(n,e,t){if(n||(n=new xe([],{})),0===n.segments.length&&n.hasChildren())return Gs(n,e,t);const r=function $w(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const h=n.segments[s],m=t[r];if(mu(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!Ii(w,b,h))return u;r+=2}else{if(!Ii(w,{},h))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new xe(n.segments.slice(0,r.pathIndex),{});return u.children[xt]=new xe(n.segments.slice(r.pathIndex),n.children),Gs(u,0,s)}return r.match&&0===s.length?new xe(n.segments,{}):r.match&&!n.hasChildren()?kh(n,e,t):r.match?Gs(n,0,s):kh(n,e,t)}function Gs(n,e,t){if(0===t.length)return new xe(n.segments,{});{const r=function g_(n){return mu(n[0])?n[0].outlets:{[xt]:n}}(t),s={};return jn(r,(u,h)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[h]=m_(n.children[h],e,u))}),jn(n.children,(u,h)=>{void 0===r[h]&&(s[h]=u)}),new xe(n.segments,s)}}function kh(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(mu(u)){const w=_u(u.outlets);return new xe(r,w)}if(0===s&&Ko(t[0])){r.push(new et(n.segments[e].path,Nh(t[0]))),s++;continue}const h=mu(u)?u.outlets[xt]:`${u}`,m=s<t.length-1?t[s+1]:null;h&&m&&Ko(m)?(r.push(new et(h,Nh(m))),s+=2):(r.push(new et(h,{})),s++)}return new xe(r,{})}function _u(n){const e={};return jn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=kh(new xe([],{}),0,t))}),e}function Nh(n){const e={};return jn(n,(t,r)=>e[r]=`${t}`),e}function Ii(n,e,t){return n==t.path&&Ui(e,t.parameters)}class Zp{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ad(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=mo(t);e.children.forEach(u=>{const h=u.value.outlet;this.deactivateRoutes(u,s[h],r),delete s[h]}),jn(s,(u,h)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const h=r.getContext(s.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=mo(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],s);if(r&&r.outlet){const h=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=mo(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=mo(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new Dl(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Vi(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(ad(s),s===u)if(s.component){const h=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const h=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),ad(m.route.value),this.activateChildRoutes(e,null,h.children)}else{const m=function ud(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),w=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=s,h.resolver=w,h.outlet&&h.outlet.activateWith(s,w),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class ld{constructor(e,t){this.routes=e,this.module=t}}function wa(n){return"function"==typeof n}function yu(n){return n instanceof Me}const Ol=Symbol("INITIAL_VALUE");function Yo(){return Rn(n=>function jo(...n){const e=(0,xn.yG)(n),t=(0,xn.jO)(n),{args:r,keys:s}=vi(n);if(0===r.length)return(0,Dn.D)([],e);const u=new _r.y(function ai(n,e,t=oi.y){return r=>{Ps(e,()=>{const{length:s}=n,u=new Array(s);let h=s,m=s;for(let w=0;w<s;w++)Ps(e,()=>{const b=(0,Dn.D)(n[w],e);let x=!1;b.subscribe((0,gn.x)(r,O=>{u[w]=O,x||(x=!0,m--),m||r.next(t(u.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,s?h=>uo(s,h):oi.y));return t?u.pipe(Kc(t)):u}(n.map(e=>e.pipe((0,Vs.q)(1),Di(Ol)))).pipe(yr((e,t)=>{let r=!1;return t.reduce((s,u,h)=>s!==Ol?s:(u===Ol&&(r=!0),r||!1!==u&&h!==t.length-1&&!yu(u)?s:u),e)},Ol),is(e=>e!==Ol),(0,Pt.U)(e=>yu(e)?e:!0===e),(0,Vs.q)(1)))}class __{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new kl,this.attachRef=null}}class kl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new __,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Nl=(()=>{class n{constructor(t,r,s,u,h){this.parentContexts=t,this.location=r,this.resolver=s,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=u||xt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new Vh(t,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(kl),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Vh{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Zo?this.route:e===kl?this.childContexts:this.parent.get(e,t)}}let Uh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[Nl],encapsulation:2}),n})();function Pl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];cd(r,Bh(e,r))}}function cd(n,e){n.children&&Pl(n.children,e)}function Bh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function jh(n){const e=n.children&&n.children.map(jh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xt&&(t.component=Uh),t}function Xt(n){return n.outlet||xt}function Hh(n,e){const t=n.filter(r=>Xt(r)===e);return t.push(...n.filter(r=>Xt(r)!==e)),t}const Yp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Yp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||co)(t,n,e);if(!u)return Object.assign({},Yp);const h={};jn(u.posParams,(w,b)=>{h[b]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},h),u.consumed[u.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Fl(n,e,t,r,s="corrected"){if(t.length>0&&function v_(n,e,t){return t.some(r=>hd(n,e,r)&&Xt(r)!==xt)}(n,t,r)){const h=new xe(e,function dd(n,e,t,r){const s={};s[xt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Xt(u)!==xt){const h=new xe([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,s[Xt(u)]=h}return s}(n,e,r,new xe(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function Qp(n,e,t){return t.some(r=>hd(n,e,r))}(n,t,r)){const h=new xe(n.segments,function y_(n,e,t,r,s,u){const h={};for(const m of r)if(hd(n,t,m)&&!s[Xt(m)]){const w=new xe([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,h[Xt(m)]=w}return Object.assign(Object.assign({},s),h)}(n,e,t,r,n.children,s));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const u=new xe(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function hd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function w_(n,e,t,r){return!!(Xt(n)===r||r!==xt&&hd(e,t,n))&&("**"===n.path||vu(e,n,t).matched)}function E_(n,e,t){return 0===e.length&&!n.children[t]}class Qo{constructor(e){this.segmentGroup=e||null}}class wr{constructor(e){this.urlTree=e}}function _o(n){return Pi(new Qo(n))}function Ll(n){return Pi(new wr(n))}class Gh{constructor(e,t,r,s,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=Fl(this.urlTree.root,[],[],this.config).segmentGroup,t=new xe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,xt).pipe((0,Pt.U)(u=>this.createUrlTree(Da(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Li(u=>{if(u instanceof wr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Qo?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,xt).pipe((0,Pt.U)(s=>this.createUrlTree(Da(s),e.queryParams,e.fragment))).pipe(Li(s=>{throw s instanceof Qo?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const s=e.segments.length>0?new xe([],{[xt]:e}):e;return new Me(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Pt.U)(u=>new xe([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,Dn.D)(s).pipe(Us(u=>{const h=r.children[u],m=Hh(t,u);return this.expandSegmentGroup(e,m,h,u).pipe((0,Pt.U)(w=>({segment:w,outlet:u})))}),yr((u,h)=>(u[h.outlet]=h.segment,u),{}),function jp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?is((s,u)=>n(s,u,r)):oi.y,Jc(1),t?Bp(e):mn(()=>new Fs))}())}expandSegment(e,t,r,s,u,h){return(0,Dn.D)(r).pipe(Us(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,h).pipe(Li(b=>{if(b instanceof Qo)return ft(null);throw b}))),Bs(m=>!!m),Li((m,w)=>{if(m instanceof Fs||"EmptyError"===m.name)return E_(t,s,u)?ft(new xe([],{})):_o(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,h,m){return w_(s,t,u,h)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,h):_o(t):_o(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,h){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ll(u):this.lineralizeSegments(r,u).pipe((0,Cn.z)(h=>{const m=new xe(h,{});return this.expandSegment(e,m,t,h,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,h){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:x}=vu(t,s,u);if(!m)return _o(t);const O=this.applyRedirectCommands(w,s.redirectTo,x);return s.redirectTo.startsWith("/")?Ll(O):this.lineralizeSegments(s,O).pipe((0,Cn.z)(U=>this.expandSegment(e,t,r,U.concat(b),h,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ft(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Pt.U)(O=>(r._loadedConfig=O,new xe(s,{})))):ft(new xe(s,{}));const{matched:h,consumedSegments:m,remainingSegments:w}=vu(t,r,s);return h?this.getChildConfig(e,r,s).pipe((0,Cn.z)(x=>{const O=x.module,U=x.routes,{segmentGroup:K,slicedSegments:le}=Fl(t,m,w,U),Oe=new xe(K.segments,K.children);if(0===le.length&&Oe.hasChildren())return this.expandChildren(O,U,Oe).pipe((0,Pt.U)(Jt=>new xe(m,Jt)));if(0===U.length&&0===le.length)return ft(new xe(m,{}));const qe=Xt(r)===u;return this.expandSegment(O,Oe,U,le,qe?xt:u,!0).pipe((0,Pt.U)(Kt=>new xe(m.concat(Kt.segments),Kt.children)))})):_o(t)}getChildConfig(e,t,r){return t.children?ft(new ld(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ft(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Cn.z)(s=>s?this.configLoader.load(e.injector,t).pipe((0,Pt.U)(u=>(t._loadedConfig=u,u))):function kr(n){return Pi(Hs(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ft(new ld([],e))}runCanLoadGuards(e,t,r){const s=t.canLoad;return s&&0!==s.length?ft(s.map(h=>{const m=e.get(h);let w;if(function Ph(n){return n&&wa(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!wa(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return li(w)})).pipe(Yo(),(0,qr.b)(h=>{if(!yu(h))return;const m=Hs(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,Pt.U)(h=>!0===h)):ft(!0)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return ft(r);if(s.numberOfChildren>1||!s.children[xt])return Pi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));s=s.children[xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Me(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return jn(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let h={};return jn(t.children,(m,w)=>{h[w]=this.createSegmentGroup(e,m,r,s)}),new xe(u,h)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}function Da(n){const e={};for(const r of Object.keys(n.children)){const u=Da(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Ti(n){if(1===n.numberOfChildren&&n.children[xt]){const e=n.children[xt];return new xe(n.segments.concat(e.segments),e.children)}return n}(new xe(n.segments,e))}class Jp{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ca{constructor(e,t){this.component=e,this.route=t}}function qh(n,e,t){const r=n._root;return di(r,e?e._root:null,t,[r.value])}function Vl(n,e,t){const r=function D_(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function di(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=mo(e);return n.children.forEach(h=>{(function eg(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,h=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(h&&u.routeConfig===h.routeConfig){const w=function C_(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Tt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Tt(n.url,e.url)||!Ui(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mh(n,e)||!Ui(n.queryParams,e.queryParams);default:return!Mh(n,e)}}(h,u,u.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new Jp(r)):(u.data=h.data,u._resolvedData=h._resolvedData),di(n,e,u.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new Ca(m.outlet.component,h))}else h&&ba(e,m,s),s.canActivateChecks.push(new Jp(r)),di(n,null,u.component?m?m.children:null:t,r,s)})(h,u[h.value.outlet],t,r.concat([h.value]),s),delete u[h.value.outlet]}),jn(u,(h,m)=>ba(h,t.getContext(m),s)),s}function ba(n,e,t){const r=mo(n),s=n.value;jn(r,(u,h)=>{ba(u,s.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new Ca(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class Kh{}function Yh(n){return new _r.y(e=>e.error(n))}class Qh{constructor(e,t,r,s,u,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h}recognize(){const e=Fl(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,xt);if(null===t)return null;const r=new gu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},xt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new go(r,t),u=new Sh(this.url,s);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=l_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const h=t.children[u],m=Hh(e,u),w=this.processSegmentGroup(m,h,u);if(null===w)return null;r.push(...w)}const s=ng(r);return function A_(n){n.sort((e,t)=>e.value.outlet===xt?-1:t.value.outlet===xt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}processSegment(e,t,r,s){for(const u of e){const h=this.processSegmentAgainstRoute(u,t,r,s);if(null!==h)return h}return E_(t,r,s)?[]:null}processSegmentAgainstRoute(e,t,r,s){if(e.redirectTo||!w_(e,t,r,s))return null;let u,h=[],m=[];if("**"===e.path){const K=r.length>0?ed(r).parameters:{};u=new gu(r,K,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Xt(e),e.component,e,f(t),g(t)+r.length,S(e))}else{const K=vu(t,e,r);if(!K.matched)return null;h=K.consumedSegments,m=K.remainingSegments,u=new gu(h,K.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Xt(e),e.component,e,f(t),g(t)+h.length,S(e))}const w=function S_(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:x}=Fl(t,h,m,w.filter(K=>void 0===K.redirectTo),this.relativeLinkResolution);if(0===x.length&&b.hasChildren()){const K=this.processChildren(w,b);return null===K?null:[new go(u,K)]}if(0===w.length&&0===x.length)return[new go(u,[])];const O=Xt(e)===s,U=this.processSegment(w,b,x,O?xt:s);return null===U?null:[new go(u,U)]}}function M_(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ng(n){const e=[],t=new Set;for(const r of n){if(!M_(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=ng(r.children);e.push(new go(r.value,s))}return e.filter(r=>!t.has(r))}function f(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function g(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function v(n){return n.data||{}}function S(n){return n.resolve||{}}function tt(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ut(n){return Rn(e=>{const t=n(e);return t?(0,Dn.D)(t).pipe((0,Pt.U)(()=>e)):ft(e)})}class Bl extends class Hi{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const wu=new c.OlP("ROUTES");class Eu{constructor(e,t,r,s){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=s}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const s=this.loadModuleFactory(t.loadChildren).pipe((0,Pt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=u.create(e);return new ld(Bi(h.injector.get(wu,void 0,c.XFs.Self|c.XFs.Optional)).map(jh),h)}),Li(u=>{throw t._loader$=void 0,u}));return t._loader$=new Qc(s,()=>new Fn.x).pipe(Ei()),t._loader$}loadModuleFactory(e){return li(e()).pipe((0,Cn.z)(t=>t instanceof c.YKP?ft(t):(0,Dn.D)(this.compiler.compileModuleAsync(t))))}}class x_{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Jo(n){throw n}function fd(n,e,t){return e.parse("/")}function pd(n,e){return ft(null)}const Xh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Xn=(()=>{class n{constructor(t,r,s,u,h,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Fn.x,this.errorHandler=Jo,this.malformedUriErrorHandler=fd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:pd,afterPreactivation:pd},this.urlHandlingStrategy=new x_,this.routeReuseStrategy=new Bl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(c.h0i),this.console=h.get(c.c2e);const O=h.get(c.R0b);this.isNgZoneEnabled=O instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function Tl(){return new Me(new xe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Eu(h,m,U=>this.triggerEvent(new El(U)),U=>this.triggerEvent(new os(U))),this.routerState=va(this.currentUrlTree,this.rootComponentType),this.transitions=new Rr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(is(s=>0!==s.id),(0,Pt.U)(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Rn(s=>{let u=!1,h=!1;return ft(s).pipe((0,qr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Rn(m=>{const w=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return rg(m.source)&&(this.browserUrlTree=m.extractedUrl),ft(m).pipe(Rn(O=>{const U=this.transitions.getValue();return r.next(new ss(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),U!==this.transitions.getValue()?Ho.E:Promise.resolve(O)}),function zh(n,e,t,r){return Rn(s=>function Ea(n,e,t,r,s){return new Gh(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,Pt.U)(u=>Object.assign(Object.assign({},s),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,qr.b)(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function k(n,e,t,r,s){return(0,Cn.z)(u=>function T_(n,e,t,r,s="emptyOnly",u="legacy"){try{const h=new Qh(n,e,t,r,s,u).recognize();return null===h?Yh(new Kh):ft(h)}catch(h){return Yh(h)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,s).pipe((0,Pt.U)(h=>Object.assign(Object.assign({},u),{targetSnapshot:h}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,qr.b)(O=>{if("eager"===this.urlUpdateStrategy){if(!O.extras.skipLocationChange){const K=this.urlHandlingStrategy.merge(O.urlAfterRedirects,O.rawUrl);this.setBrowserUrl(K,O)}this.browserUrlTree=O.urlAfterRedirects}const U=new zo(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);r.next(U)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:U,extractedUrl:K,source:le,restoredState:Oe,extras:qe}=m,Ut=new ss(U,this.serializeUrl(K),le,Oe);r.next(Ut);const Kt=va(K,this.rootComponentType).snapshot;return ft(Object.assign(Object.assign({},m),{targetSnapshot:Kt,urlAfterRedirects:K,extras:Object.assign(Object.assign({},qe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Ho.E}),ut(m=>{const{targetSnapshot:w,id:b,extractedUrl:x,rawUrl:O,extras:{skipLocationChange:U,replaceUrl:K}}=m;return this.hooks.beforePreactivation(w,{navigationId:b,appliedUrlTree:x,rawUrlTree:O,skipLocationChange:!!U,replaceUrl:!!K})}),(0,qr.b)(m=>{const w=new $p(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,Pt.U)(m=>Object.assign(Object.assign({},m),{guards:qh(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function b_(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:h}}=t;return 0===h.length&&0===u.length?ft(Object.assign(Object.assign({},t),{guardsResult:!0})):function tg(n,e,t,r){return(0,Dn.D)(n).pipe((0,Cn.z)(s=>function Ul(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ft(u.map(m=>{const w=Vl(m,e,s);let b;if(function Gw(n){return n&&wa(n.canDeactivate)}(w))b=li(w.canDeactivate(n,e,t,r));else{if(!wa(w))throw new Error("Invalid CanDeactivate guard");b=li(w(n,e,t,r))}return b.pipe(Bs())})).pipe(Yo()):ft(!0)}(s.component,s.route,t,e,r)),Bs(s=>!0!==s,!0))}(h,r,s,n).pipe((0,Cn.z)(m=>m&&function Kp(n){return"boolean"==typeof n}(m)?function Er(n,e,t,r){return(0,Dn.D)(e).pipe(Us(s=>Yc(function Zh(n,e){return null!==n&&e&&e(new Ci(n)),ft(!0)}(s.route.parent,r),function Wh(n,e){return null!==n&&e&&e(new _a(n)),ft(!0)}(s.route,r),function yo(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(h=>function Xp(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>wi(()=>ft(h.guards.map(w=>{const b=Vl(w,h.node,t);let x;if(function Lh(n){return n&&wa(n.canActivateChild)}(b))x=li(b.canActivateChild(r,n));else{if(!wa(b))throw new Error("Invalid CanActivateChild guard");x=li(b(r,n))}return x.pipe(Bs())})).pipe(Yo())));return ft(u).pipe(Yo())}(n,s.path,t),function I_(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ft(!0);const s=r.map(u=>wi(()=>{const h=Vl(u,e,t);let m;if(function Fh(n){return n&&wa(n.canActivate)}(h))m=li(h.canActivate(e,n));else{if(!wa(h))throw new Error("Invalid CanActivate guard");m=li(h(e,n))}return m.pipe(Bs())}));return ft(s).pipe(Yo())}(n,s.route,t))),Bs(s=>!0!==s,!0))}(r,u,n,e):ft(m)),(0,Pt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,qr.b)(m=>{if(yu(m.guardsResult)){const b=Hs(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw b.url=m.guardsResult,b}const w=new wl(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),is(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),ut(m=>{if(m.guards.canActivateChecks.length)return ft(m).pipe((0,qr.b)(w=>{const b=new vr(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}),Rn(w=>{let b=!1;return ft(w).pipe(function z(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return ft(t);let u=0;return(0,Dn.D)(s).pipe(Us(h=>function se(n,e,t,r){return function Be(n,e,t,r){const s=tt(n);if(0===s.length)return ft({});const u={};return(0,Dn.D)(s).pipe((0,Cn.z)(h=>function mt(n,e,t,r){const s=Vl(n,e,r);return li(s.resolve?s.resolve(e,t):s(e,t))}(n[h],e,t,r).pipe((0,qr.b)(m=>{u[h]=m}))),Jc(1),(0,Cn.z)(()=>tt(u).length===s.length?ft(u):Ho.E))}(n._resolve,n,e,r).pipe((0,Pt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),l_(n,t).resolve),null)))}(h.route,r,n,e)),(0,qr.b)(()=>u++),Jc(1),(0,Cn.z)(h=>u===s.length?ft(t):Ho.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,qr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,qr.b)(w=>{const b=new ui(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}))}),ut(m=>{const{targetSnapshot:w,id:b,extractedUrl:x,rawUrl:O,extras:{skipLocationChange:U,replaceUrl:K}}=m;return this.hooks.afterPreactivation(w,{navigationId:b,appliedUrlTree:x,rawUrlTree:O,skipLocationChange:!!U,replaceUrl:!!K})}),(0,Pt.U)(m=>{const w=function c_(n,e,t){const r=xl(n,e._root,t?t._root:void 0);return new rd(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,qr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Pt.U)(r=>(new Zp(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,qr.b)({next(){u=!0},complete(){u=!0}}),function Hp(n){return(0,ur.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||h||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===s.id&&(this.currentNavigation=null)}),Li(m=>{if(h=!0,function Xc(n){return n&&n[Il]}(m)){const w=yu(m.url);w||(this.navigated=!0,this.restoreHistory(s,!0));const b=new _n(s.id,this.serializeUrl(s.extractedUrl),m.message);r.next(b),w?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),O={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||rg(s.source)};this.scheduleNavigation(x,"imperative",null,O,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const w=new vl(s.id,this.serializeUrl(s.extractedUrl),m);r.next(w);try{s.resolve(this.errorHandler(m))}catch(b){s.reject(b)}}return Ho.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var s;const u={replaceUrl:!0},h=(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null;if(h){const w=Object.assign({},h);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,h,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Pl(t),this.config=t.map(jh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:h,queryParamsHandling:m,preserveFragment:w}=r,b=s||this.routerState.root,x=w?this.currentUrlTree.fragment:h;let O=null;switch(m){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=u||null}return null!==O&&(O=this.removeEmptyProps(O)),function $s(n,e,t,r,s){if(0===t.length)return qp(e.root,e.root,e.root,r,s);const u=function f_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new h_(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,h)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return jn(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===h?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new h_(t,e,r)}(t);if(u.toRoot())return qp(e.root,e.root,new xe([],{}),r,s);const h=function Wp(n,e,t){if(n.isAbsolute)return new Oh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Oh(u,u===e.root,0)}const r=Ko(n.commands[0])?0:1;return function p_(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new Oh(r,!1,s-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=h.processChildren?Gs(h.segmentGroup,h.index,u.commands):m_(h.segmentGroup,h.index,u.commands);return qp(e.root,h.segmentGroup,m,r,s)}(b,this.currentUrlTree,t,O,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=yu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function ef(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?Object.assign({},Xh):!1===r?Object.assign({},gd):r,yu(t))return pu(this.currentUrlTree,t,s);const u=this.parseUrl(t);return pu(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new du(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,h){var m,w;if(this.disposed)return Promise.resolve(!1);let b,x,O;h?(b=h.resolve,x=h.reject,O=h.promise):O=new Promise((le,Oe)=>{b=le,x=Oe});const U=++this.navigationId;let K;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),K=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):K=0,this.setTransition({id:U,targetPageId:K,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:x,promise:O,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),O.catch(le=>Promise.reject(le))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){var s,u;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===h?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const s=new _n(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function rg(n){return"imperative"!==n}let ig=(()=>{class n{constructor(t,r,s){this.router=t,this.route=r,this.locationStrategy=s,this.commands=null,this.href=null,this.onChanges=new Fn.x,this.subscription=t.events.subscribe(u=>{u instanceof du&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,s,u,h){if(0!==t||r||s||u||h||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:md(this.skipLocationChange),replaceUrl:md(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:md(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Xn),c.Y36(Zo),c.Y36(fe))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})();function md(n){return""===n||!!n}class k_{}class qw{preload(e,t){return ft(null)}}let Ww=(()=>{class n{constructor(t,r,s,u){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=new Eu(s,r,w=>t.triggerEvent(new El(w)),w=>t.triggerEvent(new os(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(is(t=>t instanceof du),Us(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const h=u._loadedConfig;s.push(this.processRoutes(h.module,h.routes))}else u.loadChildren&&!u.canLoad?s.push(this.preloadConfig(t,u)):u.children&&s.push(this.processRoutes(t,u.children));return(0,Dn.D)(s).pipe((0,Fi.J)(),(0,Pt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ft(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Cn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xn),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(k_))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),sg=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ss?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof du&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Cl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Cl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const us=new c.OlP("ROUTER_CONFIGURATION"),P_=new c.OlP("ROUTER_FORROOT_GUARD"),Zw=[ve,{provide:Ln,useClass:bn},{provide:Xn,useFactory:function L_(n,e,t,r,s,u,h={},m,w){const b=new Xn(null,n,e,t,r,s,Bi(u));return m&&(b.urlHandlingStrategy=m),w&&(b.routeReuseStrategy=w),function Qw(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,b),h.enableTracing&&b.events.subscribe(x=>{var O,U;null===(O=console.group)||void 0===O||O.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(U=console.groupEnd)||void 0===U||U.call(console)}),b},deps:[Ln,kl,ve,c.zs3,c.Sil,wu,us,[class Jh{},new c.FiY],[class In{},new c.FiY]]},kl,{provide:Zo,useFactory:function og(n){return n.routerState.root},deps:[Xn]},Ww,qw,class N_{preload(e,t){return t().pipe(Li(()=>ft(null)))}},{provide:us,useValue:{enableTracing:!1}}];function ib(){return new c.PXZ("Router",Xn)}let tf=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Zw,F_(t),{provide:P_,useFactory:Yw,deps:[[Xn,new c.FiY,new c.tp0]]},{provide:us,useValue:r||{}},{provide:fe,useFactory:Kw,deps:[he,[new c.tBr(nt),new c.FiY],us]},{provide:sg,useFactory:sb,deps:[Xn,Ja,us]},{provide:k_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:qw},{provide:c.PXZ,multi:!0,useFactory:ib},[_d,{provide:c.ip1,multi:!0,useFactory:Jw,deps:[_d]},{provide:U_,useFactory:V_,deps:[_d]},{provide:c.tb,multi:!0,useExisting:U_}]]}}static forChild(t){return{ngModule:n,providers:[F_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(P_,8),c.LFG(Xn,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function sb(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new sg(n,e,t)}function Kw(n,e,t={}){return t.useHash?new Te(n,e):new Ye(n,e)}function Yw(n){return"guarded"}function F_(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:wu,multi:!0,useValue:n}]}let _d=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Fn.x}appInitializer(){return this.injector.get(H,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const s=new Promise(m=>r=m),u=this.injector.get(Xn),h=this.injector.get(us);return"disabled"===h.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?ft(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),s})}bootstrapListener(t){const r=this.injector.get(us),s=this.injector.get(Ww),u=this.injector.get(sg),h=this.injector.get(Xn),m=this.injector.get(c.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),s.setUpPreloading(),u.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Jw(n){return n.appInitializer.bind(n)}function V_(n){return n.bootstrapListener.bind(n)}const U_=new c.OlP("Router Initializer");var ye=N(5861);class yd{constructor(e,t,r,s,u){this.itemId=e,this.name=t,this.description=r,this.cost=s,this.image=u}}class j_{constructor(e,t,r,s,u){this.username=e,this.orderDate=t,this.orderedItemId=r,this.orderedItemName=s,this.orderedItemCost=u,this.id=-1}setId(e){this.id=e}getId(){return this.id}}var H_=N(4986),Nr=N(5813);function nf(){return(0,ur.e)((n,e)=>{let t,r=!1;n.subscribe((0,gn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function AA(n,e){return n===e}var rt,zs=N(2011),e0=(N(820),N(3942)),jl=N(9681),ug=N(4859),Pr=N(1877),Gt=N(2090),t0="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ia={},$_=$_||{},At=t0||self;function rf(){}function G_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function sf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ct="closure_uid_"+(1e9*Math.random()>>>0),n0=0;function r0(n,e,t){return n.call.apply(n.bind,arguments)}function s0(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function lr(n,e,t){return(lr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?r0:s0).apply(null,arguments)}function $i(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Fr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,s,u){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return e.prototype[s].apply(r,h)}}function Du(){this.s=this.s,this.o=this.o}var Ta={};Du.prototype.s=!1,Du.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function ob(n){return Object.prototype.hasOwnProperty.call(n,Ct)&&n[Ct]||(n[Ct]=++n0)}(this);delete Ta[n]}},Du.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lg=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},q_=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,s="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in s&&e.call(t,s[u],u,n)};function ab(n){return Array.prototype.concat.apply([],arguments)}function cg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Z_(n){return/^[\s\xa0]*$/.test(n)}var Wr,af=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Lr(n,e){return-1!=n.indexOf(e)}function uf(n,e){return n<e?-1:n>e?1:0}e:{var dg=At.navigator;if(dg){var ub=dg.userAgent;if(ub){Wr=ub;break e}}Wr=""}function K_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function o0(n){const e={};for(const t in n)e[t]=n[t];return e}var a0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function u0(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<a0.length;u++)t=a0[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function hg(n){return hg[" "](n),n}hg[" "]=rf;var J_,n,lb=Lr(Wr,"Opera"),lf=Lr(Wr,"Trident")||Lr(Wr,"MSIE"),Y_=Lr(Wr,"Edge"),fg=Y_||lf,l0=Lr(Wr,"Gecko")&&!(Lr(Wr.toLowerCase(),"webkit")&&!Lr(Wr,"Edge"))&&!(Lr(Wr,"Trident")||Lr(Wr,"MSIE"))&&!Lr(Wr,"Edge"),Q_=Lr(Wr.toLowerCase(),"webkit")&&!Lr(Wr,"Edge");function cb(){var n=At.document;return n?n.documentMode:void 0}e:{var c0="",d0=(n=Wr,l0?/rv:([^\);]+)(\)|;)/.exec(n):Y_?/Edge\/([\d\.]+)/.exec(n):lf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Q_?/WebKit\/(\S+)/.exec(n):lb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(d0&&(c0=d0?d0[1]:""),lf){var h0=cb();if(null!=h0&&h0>parseFloat(c0)){J_=String(h0);break e}}J_=c0}var xA={};var OA=At.document&&lf&&(cb()||parseInt(J_,10))||void 0,Cu=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{At.addEventListener("test",rf,e),At.removeEventListener("test",rf,e)}catch(t){}return n}();function Vr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function cf(n,e){if(Vr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(l0){e:{try{hg(e.nodeName);var s=!0;break e}catch(u){}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:p0[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&cf.Z.h.call(this)}}Vr.prototype.h=function(){this.defaultPrevented=!0},Fr(cf,Vr);var p0={2:"touch",3:"pen",4:"mouse"};cf.prototype.h=function(){cf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Hl="closure_listenable_"+(1e6*Math.random()|0),g0=0;function X_(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=s,this.key=++g0,this.ca=this.fa=!1}function pg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function vo(n){this.src=n,this.g={},this.h=0}function gg(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=lg(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(pg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ey(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return s}return-1}vo.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var h=ey(n,e,r,s);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new X_(e,this.src,u,!!r,s)).fa=t,n.push(e)),e};var df="closure_lm_"+(1e6*Math.random()|0),ty={};function ny(n,e,t,r,s){if(r&&r.once)return vd(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)ny(n,e[u],t,r,s);return null}return t=mg(t),n&&n[Hl]?n.N(e,t,sf(r)?!!r.capture:!!r,s):m0(n,e,t,!1,r,s)}function m0(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var h=sf(s)?!!s.capture:!!s,m=bu(n);if(m||(n[df]=m=new vo(n)),(t=m.add(e,t,r,h,u)).proxy)return t;if(r=function hb(){var e=ff;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Cu||(s=h),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(Gl(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function vd(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)vd(n,e[u],t,r,s);return null}return t=mg(t),n&&n[Hl]?n.O(e,t,sf(r)?!!r.capture:!!r,s):m0(n,e,t,!0,r,s)}function $l(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)$l(n,e[u],t,r,s);else r=sf(r)?!!r.capture:!!r,t=mg(t),n&&n[Hl]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ey(u=n.g[e],t,r,s))&&(pg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=bu(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ey(e,t,r,s)),(t=-1<n?e[n]:null)&&hf(t))}function hf(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Hl])gg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Gl(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=bu(e))?(gg(t,n),0==t.h&&(t.src=null,e[df]=null)):pg(n)}}}function Gl(n){return n in ty?ty[n]:ty[n]="on"+n}function ff(n,e){if(n.ca)n=!0;else{e=new cf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&hf(n),n=t.call(r,e)}return n}function bu(n){return(n=n[df])instanceof vo?n:null}var ry="__closure_events_fn_"+(1e9*Math.random()>>>0);function mg(n){return"function"==typeof n?n:(n[ry]||(n[ry]=function(e){return n.handleEvent(e)}),n[ry])}function Dr(){Du.call(this),this.i=new vo(this),this.P=this,this.I=null}function Cr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Vr(e,n);else if(e instanceof Vr)e.target=e.target||n;else{var s=e;u0(e=new Vr(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var h=e.g=t[u];s=wd(h,r,!0,e)&&s}if(s=wd(h=e.g=n,r,!0,e)&&s,s=wd(h,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=wd(h=e.g=t[u],r,!1,e)&&s}function wd(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var h=e[u];if(h&&!h.ca&&h.capture==t){var m=h.listener,w=h.ia||h.src;h.fa&&gg(n.i,h),s=!1!==m.call(w,r)&&s}}return s&&!r.defaultPrevented}Fr(Dr,Du),Dr.prototype[Hl]=!0,Dr.prototype.removeEventListener=function(n,e,t,r){$l(this,n,e,t,r)},Dr.prototype.M=function(){if(Dr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)pg(t[r]);delete n.g[e],n.h--}}this.I=null},Dr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Dr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var _g=At.JSON.stringify;function yg(){var n=v0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var sy,iy=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new kA,n=>n.reset());class kA{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _0(n){At.setTimeout(()=>{throw n},0)}function vg(n,e){sy||function y0(){var n=At.Promise.resolve(void 0);sy=function(){n.then(ls)}}(),oy||(sy(),oy=!0),v0.add(n,e)}var oy=!1,v0=new class fb{constructor(){this.h=this.g=null}add(e,t){const r=iy.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function ls(){for(var n;n=yg();){try{n.h.call(n.g)}catch(t){_0(t)}var e=iy;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}oy=!1}function wg(n,e){Dr.call(this),this.h=n||1,this.g=e||At,this.j=lr(this.kb,this),this.l=Date.now()}function ay(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function w0(n,e,t){if("function"==typeof n)t&&(n=lr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=lr(n.handleEvent,n)}return 2147483647<Number(e)?-1:At.setTimeout(n,e||0)}function pb(n){n.g=w0(()=>{n.g=null,n.i&&(n.i=!1,pb(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Fr(wg,Dr),(rt=wg.prototype).da=!1,rt.S=null,rt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Cr(this,"tick"),this.da&&(ay(this),this.start()))}},rt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.M=function(){wg.Z.M.call(this),ay(this),delete this.g};class E0 extends Du{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:pb(this)}M(){super.M(),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Eg(n){Du.call(this),this.h=n,this.g={}}Fr(Eg,Du);var D0=[];function Dg(n,e,t,r){Array.isArray(t)||(t&&(D0[0]=t.toString()),t=D0);for(var s=0;s<t.length;s++){var u=ny(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function uy(n){K_(n.g,function(e,t){this.g.hasOwnProperty(t)&&hf(e)},n),n.g={}}function Cg(){this.g=!0}function zl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function C0(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var h=1;h<s.length;h++)s[h]=""}}}return _g(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Eg.prototype.M=function(){Eg.Z.M.call(this),uy(this)},Eg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cg.prototype.Aa=function(){this.g=!1},Cg.prototype.info=function(){};var ql={},b0=null;function pf(){return b0=b0||new Dr}function ly(n){Vr.call(this,ql.Ma,n)}function gf(n){const e=pf();Cr(e,new ly(e,n))}function wo(n,e){Vr.call(this,ql.STAT_EVENT,n),this.stat=e}function Zr(n){const e=pf();Cr(e,new wo(e,n))}function I0(n,e){Vr.call(this,ql.Na,n),this.size=e}function mf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){n()},e)}ql.Ma="serverreachability",Fr(ly,Vr),ql.STAT_EVENT="statevent",Fr(wo,Vr),ql.Na="timingevent",Fr(I0,Vr);var cy={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},dy={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function hy(){}function A0(){}hy.prototype.h=null;var Ed,Wl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function fy(){Vr.call(this,"d")}function py(){Vr.call(this,"c")}function Dd(){}function _f(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Eg(this),this.P=gy,this.W=new wg(n=fg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new bg}function bg(){this.i=null,this.g="",this.h=!1}Fr(fy,Vr),Fr(py,Vr),Fr(Dd,hy),Dd.prototype.g=function(){return new XMLHttpRequest},Dd.prototype.i=function(){return{}},Ed=new Dd;var gy=45e3,Ig={},Tg={};function my(n,e,t){n.K=1,n.v=Mg(Eo(e)),n.s=t,n.U=!0,Ag(n,null)}function Ag(n,e){n.F=Date.now(),Cd(n),n.A=Eo(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),wy(t.h,"t",r),n.C=0,t=n.l.H,n.h=new bg,n.g=Ty(n.l,t?e:null,!n.s),0<n.O&&(n.L=new E0(lr(n.Ia,n,n.g),n.O)),Dg(n.V,n.g,"readystatechange",n.gb),e=n.H?o0(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),gf(1),function gb(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var h="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var x=b[0];b=b[1];var O=x.split("_");h=2<=O.length&&"type"==O[1]?h+(x+"=")+b+"&":h+(x+"=redacted&")}}else h=null;else h=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function yb(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function S0(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=M0(n,t),s==Tg){4==e&&(n.o=4,Zr(14),r=!1),zl(n.j,n.m,null,"[Incomplete Response]");break}if(s==Ig){n.o=4,Zr(15),zl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}zl(n.j,n.m,s,null),Id(n,s)}yb(n)&&s!=Tg&&s!=Ig&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Zr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ru(e),e.L=!0,Zr(11))):(zl(n.j,n.m,t,"[Invalid Chunked Response]"),Ai(n),bd(n))}function M0(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Tg:(t=Number(e.substring(t,r)),isNaN(t)?Ig:(r+=1)+t>e.length?Tg:(e=e.substr(r,t),n.C=r+t,e))}function Cd(n){n.Y=Date.now()+n.P,_y(n,n.P)}function _y(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=mf(lr(n.eb,n),e)}function yf(n){n.B&&(At.clearTimeout(n.B),n.B=null)}function bd(n){0==n.l.G||n.I||Ql(n.l,n)}function Ai(n){yf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ay(n.W),uy(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Id(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||F0(t.i,n)))if(t.I=n.N,!n.J&&F0(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0])e:if(t.u)t.ta=s[1],0<t.ta-t.U&&37500>s[2]&&t.N&&0==t.A&&!t.v&&(t.v=mf(lr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Sa(t),Fg(t)}xu(t),Zr(18)}if(1>=Ey(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else Ws(t,11)}else if((n.J||t.g==n)&&Sa(t),!Z_(e))for(s=t.Ca.g.parse(e),e=0;e<s.length;e++){let b=s[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const x=b[3];null!=x&&(t.ma=x,t.h.info("VER="+t.ma));const O=b[4];null!=O&&(t.za=O,t.h.info("SVER="+t.za));const U=b[5];null!=U&&"number"==typeof U&&0<U&&(t.K=r=1.5*U,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const le=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(le){var u=r.i;!u.g&&(Lr(le,"spdy")||Lr(le,"quic")||Lr(le,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Rg(u,u.h),u.h=null))}if(r.D){const Oe=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Oe&&(r.sa=Oe,yn(r.F,r.D,Oe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=ec(r,r.H?r.la:null,r.W),h.J){L0(r.i,h);var m=h,w=r.K;w&&m.setTimeout(w),m.B&&(yf(m),Cd(m)),r.g=h}else Vg(r);0<t.l.length&&Au(t)}else"stop"!=b[0]&&"close"!=b[0]||Ws(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Ws(t,7):Iy(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}gf(4)}catch(b){}}function yy(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(G_(n)||"string"==typeof n)q_(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(G_(n)||"string"==typeof n){t=[];for(var r=n.length,s=0;s<r;s++)t.push(s)}else for(s in t=[],r=0,n)t[r++]=s;r=function vb(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(G_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length;for(var u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}}function vf(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof vf)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function wf(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Iu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var s={};for(t=e=0;e<n.g.length;)Iu(s,r=n.g[e])||(n.g[t++]=r,s[r]=1),e++;n.g.length=t}}function Iu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(rt=_f.prototype).setTimeout=function(n){this.P=n},rt.gb=function(n){n=n.target;const e=this.L;e&&3==Aa(n)?e.l():this.Ia(n)},rt.Ia=function(n){try{if(n==this.g)e:{const x=Aa(this.g);var e=this.g.Da();const O=this.g.ba();if(!(3>x)&&(3!=x||fg||this.g&&(this.h.h||this.g.ga()||q0(this.g)))){this.I||4!=x||7==e||gf(8==e||0>=O?3:2),yf(this);var t=this.g.ba();this.N=t;t:if(yb(this)){var r=q0(this.g);n="";var s=r.length,u=4==Aa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ai(this),bd(this);var h="";break t}this.h.i=new At.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function mb(n,e,t,r,s,u,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+h})}(this.j,this.u,this.A,this.m,this.X,x,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z_(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Zr(12),Ai(this),bd(this);break e}zl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Id(this,t)}this.U?(S0(this,x,h),fg&&this.i&&3==x&&(Dg(this.V,this.W,"tick",this.fb),this.W.start())):(zl(this.j,this.m,h,null),Id(this,h)),4==x&&Ai(this),this.i&&!this.I&&(4==x?Ql(this.l,this):(this.i=!1,Cd(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,Zr(12)):(this.o=0,Zr(13)),Ai(this),bd(this)}}}catch(x){}},rt.fb=function(){if(this.g){var n=Aa(this.g),e=this.g.ga();this.C<e.length&&(yf(this),S0(this,n,e),this.i&&4!=n&&Cd(this))}},rt.cancel=function(){this.I=!0,Ai(this)},rt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function _b(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(gf(3),Zr(17)),Ai(this),this.o=2,bd(this)):_y(this,this.Y-n)},(rt=vf.prototype).R=function(){wf(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},rt.T=function(){return wf(this),this.g.concat()},rt.get=function(n,e){return Iu(this.h,n)?this.h[n]:e},rt.set=function(n,e){Iu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},rt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var s=t[r],u=this.get(s);n.call(e,u,s,this)}};var Sg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Zl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Zl){this.g=void 0!==e?e:n.g,Df(this,n.j),this.s=n.s,Cf(this,n.i),bf(this,n.m),this.l=n.l,e=n.h;var t=new If;t.i=e.i,e.g&&(t.g=new vf(e.g),t.h=e.h),x0(this,t),this.o=n.o}else n&&(t=String(n).match(Sg))?(this.g=!!e,Df(this,t[1]||"",!0),this.s=Xo(t[2]||""),Cf(this,t[3]||"",!0),bf(this,t[4]),this.l=Xo(t[5]||"",!0),x0(this,t[6]||"",!0),this.o=Xo(t[7]||"")):(this.g=!!e,this.h=new If(null,this.g))}function Eo(n){return new Zl(n)}function Df(n,e,t){n.j=t?Xo(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Cf(n,e,t){n.i=t?Xo(e,!0):e}function bf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function x0(n,e,t){e instanceof If?(n.h=e,function k0(n,e){e&&!n.j&&(Kr(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(xg(this,r),wy(this,s,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Td(e,Cb)),n.h=new If(e,n.g))}function yn(n,e,t){n.h.set(e,t)}function Mg(n){return yn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Xo(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Td(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Eb),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Eb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Zl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Td(e,O0,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Td(e,O0,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Td(t,"/"==t.charAt(0)?Db:Ad,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Td(t,bb)),n.join("")};var O0=/[#\/\?@]/g,Ad=/[#\?:]/g,Db=/[#\?]/g,Cb=/[#\?@]/g,bb=/#/g;function If(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Kr(n){n.g||(n.g=new vf,n.h=0,n.i&&function Ef(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function xg(n,e){Kr(n),e=Kl(n,e),Iu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Iu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&wf(n)))}function vy(n,e){return Kr(n),e=Kl(n,e),Iu(n.g.h,e)}function wy(n,e,t){xg(n,e),0<t.length&&(n.i=null,n.g.set(Kl(n,e),cg(t)),n.h+=t.length)}function Kl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function N0(n){this.l=n||Tb,n=At.PerformanceNavigationTiming?0<(n=At.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(At.g&&At.g.Ea&&At.g.Ea()&&At.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=If.prototype).add=function(n,e){Kr(this),this.i=null,n=Kl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){Kr(this),this.g.forEach(function(t,r){q_(t,function(s){n.call(e,s,r,this)},this)},this)},rt.T=function(){Kr(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var s=n[r],u=0;u<s.length;u++)t.push(e[r]);return t},rt.R=function(n){Kr(this);var e=[];if("string"==typeof n)vy(this,n)&&(e=ab(e,this.g.get(Kl(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=ab(e,n[t])}return e},rt.set=function(n,e){return Kr(this),this.i=null,vy(this,n=Kl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],s=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var h=s;""!==r[u]&&(h+="="+encodeURIComponent(String(r[u]))),n.push(h)}}return this.i=n.join("&")};var Tb=10;function P0(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Ey(n){return n.h?1:n.g?n.g.size:0}function F0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Rg(n,e){n.g?n.g.add(e):n.h=e}function L0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function V0(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return cg(n.i)}function U0(){}function NA(){this.g=new U0}function Dy(n,e,t){const r=t||"";try{yy(n,function(s,u){let h=s;sf(s)&&(h=_g(s)),e.push(r+u+"="+encodeURIComponent(h))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Tf(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch(u){}}function Sd(n){this.l=n.$b||null,this.j=n.ib||!1}function Cy(n,e){Dr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=cs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}N0.prototype.cancel=function(){if(this.i=V0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},U0.prototype.stringify=function(n){return At.JSON.stringify(n,void 0)},U0.prototype.parse=function(n){return At.JSON.parse(n,void 0)},Fr(Sd,hy),Sd.prototype.g=function(){return new Cy(this.l,this.j)},Sd.prototype.i=function(n){return function(){return n}}({}),Fr(Cy,Dr);var cs=0;function Sb(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Og(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Md(n)}function Md(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=Cy.prototype).open=function(n,e){if(this.readyState!=cs)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Md(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||At).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Og(this)),this.readyState=cs},rt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Md(this)),this.g&&(this.readyState=3,Md(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==At.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Sb(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},rt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Og(this):Md(this),3==this.readyState&&Sb(this)}},rt.Ua=function(n){this.g&&(this.response=this.responseText=n,Og(this))},rt.Ta=function(n){this.g&&(this.response=n,Og(this))},rt.ha=function(){this.g&&Og(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Cy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var B0=At.JSON.parse;function er(n){Dr.call(this),this.headers=new vf,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=j0,this.K=this.L=!1}Fr(er,Dr);var j0="",PA=/^https?$/i,H0=["POST","PUT"];function Mb(n){return"content-type"==n.toLowerCase()}function kg(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,$0(n),Ng(n)}function $0(n){n.D||(n.D=!0,Cr(n,"complete"),Cr(n,"error"))}function G0(n){if(n.h&&void 0!==$_&&(!n.C[1]||4!=Aa(n)||2!=n.ba()))if(n.v&&4==Aa(n))w0(n.Fa,0,n);else if(Cr(n,"readystatechange"),4==Aa(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match(Sg)[1]||null;if(!s&&At.self&&At.self.location){var u=At.self.location.protocol;s=u.substr(0,u.length-1)}r=!PA.test(s?s.toLowerCase():"")}t=r}if(t)Cr(n,"complete"),Cr(n,"success");else{n.m=6;try{var h=2<Aa(n)?n.g.statusText:""}catch(w){h=""}n.j=h+" ["+n.ba()+"]",$0(n)}}finally{Ng(n)}}}function Ng(n,e){if(n.g){z0(n);const t=n.g,r=n.C[0]?rf:null;n.g=null,n.C=null,e||Cr(n,"ready");try{t.onreadystatechange=r}catch(s){}}}function z0(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(At.clearTimeout(n.A),n.A=null)}function Aa(n){return n.g?n.g.readyState:0}function q0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case j0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Tu(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Pg(n){let e="";return K_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):yn(n,e,t))}function Af(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function xd(n){this.za=0,this.l=[],this.h=new Cg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Af("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Af("baseRetryDelayMs",5e3,n),this.$a=Af("retryDelaySeedMs",1e4,n),this.Ya=Af("forwardChannelMaxRetries",2,n),this.ra=Af("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new N0(n&&n.concurrentRequestLimit),this.Ca=new NA,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Iy(n){if(Lg(n),3==n.G){var e=n.V++,t=Eo(n.F);yn(t,"SID",n.J),yn(t,"RID",e),yn(t,"TYPE","terminate"),Mu(n,t),(e=new _f(n,n.h,e,void 0)).K=2,e.v=Mg(Eo(t)),t=!1,At.navigator&&At.navigator.sendBeacon&&(t=At.navigator.sendBeacon(e.v.toString(),"")),!t&&At.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ty(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Cd(e)}Xl(n)}function Fg(n){n.g&&(Ru(n),n.g.cancel(),n.g=null)}function Lg(n){Fg(n),n.u&&(At.clearTimeout(n.u),n.u=null),Sa(n),n.i.cancel(),n.m&&("number"==typeof n.m&&At.clearTimeout(n.m),n.m=null)}function qs(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Au(n)}function Au(n){P0(n.i)||n.m||(n.m=!0,vg(n.Ha,n),n.C=0)}function Su(n,e){var t;t=e?e.m:n.V++;const r=Eo(n.F);yn(r,"SID",n.J),yn(r,"RID",t),yn(r,"AID",n.U),Mu(n,r),n.o&&n.s&&Tu(r,n.o,n.s),t=new _f(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=ds(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Rg(n.i,t),my(t,r,e)}function Mu(n,e){n.j&&yy({},function(t,r){yn(e,r,t)})}function ds(n,e,t){t=Math.min(n.l.length,t);var r=n.j?lr(n.j.Oa,n.j,n):null;e:{var s=n.l;let u=-1;for(;;){const h=["count="+t];-1==u?0<t?(u=s[0].h,h.push("ofs="+u)):u=0:h.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=s[w].h;const x=s[w].g;if(b-=u,0>b)u=Math.max(0,s[w].h-100),m=!1;else try{Dy(x,h,"req"+b+"_")}catch(O){r&&r(x)}}if(m){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Vg(n){n.g||n.u||(n.Y=1,vg(n.Ga,n),n.A=0)}function xu(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=mf(lr(n.Ga,n),Jl(n,n.A)),n.A++,0))}function Ru(n){null!=n.B&&(At.clearTimeout(n.B),n.B=null)}function Yl(n){n.g=new _f(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Eo(n.oa);yn(e,"RID","rpc"),yn(e,"SID",n.J),yn(e,"CI",n.N?"0":"1"),yn(e,"AID",n.U),Mu(n,e),yn(e,"TYPE","xmlhttp"),n.o&&n.s&&Tu(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Mg(Eo(e)),t.s=null,t.U=!0,Ag(t,n)}function Sa(n){null!=n.v&&(At.clearTimeout(n.v),n.v=null)}function Ql(n,e){var t=null;if(n.g==e){Sa(n),Ru(n),n.g=null;var r=2}else{if(!F0(n.i,e))return;t=e.D,L0(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;Cr(r=pf(),new I0(r,t,e,s)),Au(n)}else Vg(n);else if(3==(s=e.o)||0==s&&0<n.I||!(1==r&&function hi(n,e){return!(Ey(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=mf(lr(n.Ha,n,e),Jl(n,n.C)),n.C++,0)))}(n,e)||2==r&&xu(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:Ws(n,5);break;case 4:Ws(n,10);break;case 3:Ws(n,6);break;default:Ws(n,2)}}function Jl(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ws(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=lr(n.jb,n);t||(t=new Zl("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||Df(t,"https"),Mg(t)),function Ab(n,e){const t=new Cg;if(At.Image){const r=new Image;r.onload=$i(Tf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=$i(Tf,t,r,"TestLoadImage: error",!1,e),r.onabort=$i(Tf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=$i(Tf,t,r,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Zr(2);n.G=0,n.j&&n.j.va(e),Xl(n),Lg(n)}function Xl(n){n.G=0,n.I=-1,n.j&&((0!=V0(n.i).length||0!=n.l.length)&&(n.i.i.length=0,cg(n.l),n.l.length=0),n.j.ua())}function ec(n,e,t){let r=function wb(n){return n instanceof Zl?Eo(n):new Zl(n,void 0)}(t);if(""!=r.i)e&&Cf(r,e+"."+r.i),bf(r,r.m);else{const s=At.location;r=function R0(n,e,t,r){var s=new Zl(null,void 0);return n&&Df(s,n),e&&Cf(s,e),t&&bf(s,t),r&&(s.l=r),s}(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,t)}return n.aa&&K_(n.aa,function(s,u){yn(r,u,s)}),t=n.sa,(e=n.D)&&t&&yn(r,e,t),yn(r,"VER",n.ma),Mu(n,r),r}function Ty(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new er(t&&n.Ba&&!n.qa?new Sd({ib:!0}):n.qa)).L=n.H,e}function Ay(){}function Sf(){if(lf&&!(10<=Number(OA)))throw Error("Environmental error: no available transport.")}function Gi(n,e){Dr.call(this),this.g=new xd(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Z_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Z_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new tc(this)}function Sy(n){fy.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function My(){py.call(this),this.status=1}function tc(n){this.g=n}(rt=er.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ed.g(),this.C=function T0(n){return n.h||(n.h=n.i())}(this.u?this.u:Ed),this.g.onreadystatechange=lr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void kg(this,u)}n=t||"";const s=new vf(this.headers);r&&yy(r,function(u,h){s.set(h,u)}),r=function W_(n){e:{var e=Mb;const t=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<t;s++)if(s in r&&e.call(void 0,r[s],s,n)){e=s;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(s.T()),t=At.FormData&&n instanceof At.FormData,!(0<=lg(H0,e))||r||t||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(u,h){this.g.setRequestHeader(h,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{z0(this),0<this.B&&((this.K=function by(n){return lf&&function RA(){return function MA(n){var e=xA;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=af(String(J_)).split("."),t=af("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var s=e[h]||"",u=t[h]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=uf(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||uf(0==s[2].length,0==u[2].length)||uf(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=lr(this.pa,this)):this.A=w0(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){kg(this,u)}},rt.pa=function(){void 0!==$_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Cr(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Cr(this,"complete"),Cr(this,"abort"),Ng(this))},rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ng(this,!0)),er.Z.M.call(this)},rt.Fa=function(){this.s||(this.F||this.v||this.l?G0(this):this.cb())},rt.cb=function(){G0(this)},rt.ba=function(){try{return 2<Aa(this)?this.g.status:-1}catch(n){return-1}},rt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},rt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),B0(e)}},rt.Da=function(){return this.m},rt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=xd.prototype).ma=8,rt.G=1,rt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},rt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const s=new _f(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=o0(u),u0(u,this.P)):u=this.P),null===this.o&&(s.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ds(this,s,e),yn(t=Eo(this.F),"RID",n),yn(t,"CVER",22),this.D&&yn(t,"X-HTTP-Session-Id",this.D),Mu(this,t),this.o&&u&&Tu(t,this.o,u),Rg(this.i,s),this.Ra&&yn(t,"TYPE","init"),this.ja?(yn(t,"$req",e),yn(t,"SID","null"),s.$=!0,my(s,t,null)):my(s,t,e),this.G=2}}else 3==this.G&&(n?Su(this,n):0==this.l.length||P0(this.i)||Su(this))},rt.Ga=function(){if(this.u=null,Yl(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=mf(lr(this.bb,this),n)}},rt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Zr(10),Fg(this),Yl(this))},rt.ab=function(){null!=this.v&&(this.v=null,Fg(this),xu(this),Zr(19))},rt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Zr(2)):(this.h.info("Failed to ping google.com"),Zr(1))},(rt=Ay.prototype).xa=function(){},rt.wa=function(){},rt.va=function(){},rt.ua=function(){},rt.Oa=function(){},Sf.prototype.g=function(n,e){return new Gi(n,e)},Fr(Gi,Dr),Gi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),vg(lr(n.hb,n,e))),Zr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=ec(n,null,n.W),Au(n)},Gi.prototype.close=function(){Iy(this.g)},Gi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,qs(this.g,e)}else this.v?((e={}).__data__=_g(n),qs(this.g,e)):qs(this.g,n)},Gi.prototype.M=function(){this.g.j=null,delete this.j,Iy(this.g),delete this.g,Gi.Z.M.call(this)},Fr(Sy,fy),Fr(My,py),Fr(tc,Ay),tc.prototype.xa=function(){Cr(this.g,"a")},tc.prototype.wa=function(n){Cr(this.g,new Sy(n))},tc.prototype.va=function(n){Cr(this.g,new My(n))},tc.prototype.ua=function(){Cr(this.g,"b")},Sf.prototype.createWebChannel=Sf.prototype.g,Gi.prototype.send=Gi.prototype.u,Gi.prototype.open=Gi.prototype.m,Gi.prototype.close=Gi.prototype.close,cy.NO_ERROR=0,cy.TIMEOUT=8,cy.HTTP_ERROR=6,dy.COMPLETE="complete",A0.EventType=Wl,Wl.OPEN="a",Wl.CLOSE="b",Wl.ERROR="c",Wl.MESSAGE="d",Dr.prototype.listen=Dr.prototype.N,er.prototype.listenOnce=er.prototype.O,er.prototype.getLastError=er.prototype.La,er.prototype.getLastErrorCode=er.prototype.Da,er.prototype.getStatus=er.prototype.ba,er.prototype.getResponseJson=er.prototype.Qa,er.prototype.getResponseText=er.prototype.ga,er.prototype.send=er.prototype.ea;var W0=Ia.createWebChannelTransport=function(){return new Sf},Z0=Ia.getStatEventTarget=function(){return pf()},xy=Ia.ErrorCode=cy,K0=Ia.EventType=dy,xb=Ia.Event=ql,Ry=Ia.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Y0=Ia.FetchXmlHttpFactory=Sd,Ug=Ia.WebChannel=A0,Rb=Ia.XhrIo=er;const Oy="@firebase/firestore";class Yr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yr.UNAUTHENTICATED=new Yr(null),Yr.GOOGLE_CREDENTIALS=new Yr("google-credentials-uid"),Yr.FIRST_PARTY=new Yr("first-party-uid"),Yr.MOCK_USER=new Yr("mock-user");let nc="9.6.11";const Ou=new Pr.Yd("@firebase/firestore");function ky(){return Ou.logLevel}function Pe(n,...e){if(Ou.logLevel<=Pr.in.DEBUG){const t=e.map(Ny);Ou.debug(`Firestore (${nc}): ${n}`,...t)}}function Hn(n,...e){if(Ou.logLevel<=Pr.in.ERROR){const t=e.map(Ny);Ou.error(`Firestore (${nc}): ${n}`,...t)}}function rc(n,...e){if(Ou.logLevel<=Pr.in.WARN){const t=e.map(Ny);Ou.warn(`Firestore (${nc}): ${n}`,...t)}}function Ny(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${nc}) INTERNAL ASSERTION FAILED: `+n;throw Hn(e),new Error(e)}function bt(n,e){n||st()}function Ze(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Gt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ur{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ic{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ob{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yr.UNAUTHENTICATED))}shutdown(){}}class Q0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kb{constructor(e){this.t=e,this.currentUser=Yr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=b=>this.i!==s?(s=this.i,t(b)):Promise.resolve();let h=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Ur,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=h;e.enqueueRetryable((0,ye.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Ur)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt("string"==typeof r.accessToken),new ic(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new Yr(e)}}class J0{constructor(e,t,r){this.type="FirstParty",this.user=Yr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Bg{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new J0(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Yr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class X0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eE{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.p;return this.p=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?s(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt("string"==typeof t.token),this.p=t.token,new X0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class hs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Nb(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}hs.A=-1;class tE{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Nb(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function kt(n,e){return n<e?-1:n>e?1:0}function sc(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function nE(n){return n+"\0"}class $n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $n.fromMillis(Date.now())}static fromDate(e){return $n.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new $n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new $n(0,0))}static max(){return new vt(new $n(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function jg(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Rd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Hg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Mf{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Mf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),h=t.get(s);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class en extends Mf{construct(e,t,r){return new en(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new en(t)}static emptyPath(){return new en([])}}const xf=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class br extends Mf{construct(e,t,r){return new br(e,t,r)}static isValidIdentifier(e){return xf.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),br.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new br(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Re(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Re(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Re(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===m?(h=!h,s++):"."!==m||h?(r+=m,s++):(u(),s++)}if(u(),h)throw new Re(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new br(t)}static emptyPath(){return new br([])}}class ku{constructor(e){this.fields=e,e.sort(br.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ir{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ir(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Ir(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const $g=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Do(n){if(bt(!!n),"string"==typeof n){let e=0;const t=$g.exec(n);if(bt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:On(n.seconds),nanos:On(n.nanos)}}function On(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Od(n){return"string"==typeof n?Ir.fromBase64String(n):Ir.fromUint8Array(n)}function Fy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Rf(n){const e=n.mapValue.fields.__previous_value__;return Fy(e)?Rf(e):e}function Nu(n){const e=Do(n.mapValue.fields.__local_write_time__.timestampValue);return new $n(e.seconds,e.nanos)}class Ly{constructor(e,t,r,s,u,h,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class ea{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ea("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ea&&e.projectId===this.projectId&&e.database===this.database}}function Ma(n){return null==n}function kd(n){return 0===n&&1/n==-1/0}function Vy(n){return"number"==typeof n&&Number.isInteger(n)&&!kd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class je{constructor(e){this.path=e}static fromPath(e){return new je(en.fromString(e))}static fromName(e){return new je(en.fromString(e).popFirst(5))}static empty(){return new je(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===en.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return en.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new en(e.slice()))}}const Uy={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rE={nullValue:"NULL_VALUE"};function Pu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fy(n)?4:Hy(n)?9:10:st()}function Co(n,e){if(n===e)return!0;const t=Pu(n);if(t!==Pu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nu(n).isEqual(Nu(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=Do(r.timestampValue),h=Do(s.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Od(n.bytesValue).isEqual(Od(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return On(r.geoPointValue.latitude)===On(s.geoPointValue.latitude)&&On(r.geoPointValue.longitude)===On(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return On(r.integerValue)===On(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=On(r.doubleValue),h=On(s.doubleValue);return u===h?kd(u)===kd(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return sc(n.arrayValue.values||[],e.arrayValue.values||[],Co);case 10:return function(r,s){const u=r.mapValue.fields||{},h=s.mapValue.fields||{};if(jg(u)!==jg(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===h[m]||!Co(u[m],h[m])))return!1;return!0}(n,e);default:return st()}var s}function oc(n,e){return void 0!==(n.values||[]).find(t=>Co(t,e))}function xa(n,e){if(n===e)return 0;const t=Pu(n),r=Pu(e);if(t!==r)return kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const h=On(s.integerValue||s.doubleValue),m=On(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return iE(n.timestampValue,e.timestampValue);case 4:return iE(Nu(n),Nu(e));case 5:return kt(n.stringValue,e.stringValue);case 6:return function(s,u){const h=Od(s),m=Od(u);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const h=s.split("/"),m=u.split("/");for(let w=0;w<h.length&&w<m.length;w++){const b=kt(h[w],m[w]);if(0!==b)return b}return kt(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const h=kt(On(s.latitude),On(u.latitude));return 0!==h?h:kt(On(s.longitude),On(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const h=s.values||[],m=u.values||[];for(let w=0;w<h.length&&w<m.length;++w){const b=xa(h[w],m[w]);if(b)return b}return kt(h.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){const h=s.fields||{},m=Object.keys(h),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let x=0;x<m.length&&x<b.length;++x){const O=kt(m[x],b[x]);if(0!==O)return O;const U=xa(h[m[x]],w[b[x]]);if(0!==U)return U}return kt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw st()}}function iE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return kt(n,e);const t=Do(n),r=Do(e),s=kt(t.seconds,r.seconds);return 0!==s?s:kt(t.nanos,r.nanos)}function ac(n){return Gg(n)}function Gg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Do(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Od(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const h of r.values||[])u?u=!1:s+=",",s+=Gg(h);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",h=!0;for(const m of s)h?h=!1:u+=",",u+=`${m}:${Gg(r.fields[m])}`;return u+"}"}(n.mapValue):st();var e}function Ra(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Of(n){return!!n&&"integerValue"in n}function Nd(n){return!!n&&"arrayValue"in n}function By(n){return!!n&&"nullValue"in n}function jy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kf(n){return!!n&&"mapValue"in n}function Pd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Rd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Hy(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function sE(n){return"nullValue"in n?rE:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ra(ea.empty(),je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function oE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ra(ea.empty(),je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Uy:st()}function Pb(n,e){return void 0===n?e:void 0===e||xa(n,e)>0?n:e}function aE(n,e){return void 0===n?e:void 0===e||xa(n,e)<0?n:e}class fi{constructor(e){this.value=e}static empty(){return new fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!kf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pd(t)}setAll(e){let t=br.emptyPath(),r={},s=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=m.popLast()}h?r[m.lastSegment()]=Pd(h):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());kf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Co(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];kf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Rd(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new fi(Pd(this.value))}}function $y(n){const e=[];return Rd(n.fields,(t,r)=>{const s=new br([t]);if(kf(r)){const u=$y(r.mapValue).fields;if(0===u.length)e.push(s);else for(const h of u)e.push(s.child(h))}else e.push(s)}),new ku(e)}class Tn{constructor(e,t,r,s,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Tn(e,0,vt.min(),vt.min(),fi.empty(),0)}static newFoundDocument(e,t,r){return new Tn(e,1,t,vt.min(),r,0)}static newNoDocument(e,t){return new Tn(e,2,t,vt.min(),fi.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,vt.min(),fi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gn{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function zg(n){return n.fields.find(e=>2===e.kind)}function uc(n){return n.fields.filter(e=>2!==e.kind)}Gn.UNKNOWN_ID=-1;class qg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fd(0,ta.min())}}function uE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=vt.fromTimestamp(1e9===r?new $n(t+1,0):new $n(t,r));return new ta(s,je.empty(),e)}function lE(n){return new ta(n.readTime,n.key,-1)}class ta{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ta(vt.min(),je.empty(),-1)}static max(){return new ta(vt.max(),je.empty(),-1)}}function Ld(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:kt(n.largestBatchId,e.largestBatchId))}class Fb{constructor(e,t=null,r=[],s=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=h,this.endAt=m,this.P=null}}function cE(n,e=null,t=[],r=[],s=null,u=null,h=null){return new Fb(n,e,t,r,s,u,h)}function Fu(n){const e=Ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+ac(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Ma(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ac(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ac(r)).join(",")),e.P=t}return e.P}function Vd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!zy(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!Co(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fE(n.startAt,e.startAt)&&fE(n.endAt,e.endAt)}function Gy(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ud(n,e){return n.filters.filter(t=>t instanceof Qr&&t.field.isEqual(e))}function Wg(n,e,t){let r,s=!0;for(const u of Ud(n,e)){let h,m=!0;switch(u.op){case"<":case"<=":h=sE(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,m=!1;break;case"!=":case"not-in":h=rE}Pb(r,h)===h&&(r=h,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];Pb(r,h)===h&&(r=h,s=t.inclusive);break}return{value:r,inclusive:s}}function bo(n,e,t){let r,s=!0;for(const u of Ud(n,e)){let h,m=!0;switch(u.op){case">=":case">":h=oE(u.value),m=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,m=!1;break;case"!=":case"not-in":h=Uy}aE(r,h)===h&&(r=h,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];aE(r,h)===h&&(r=h,s=t.inclusive);break}return{value:r,inclusive:s}}class Qr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Vb(e,t,r):"array-contains"===t?new dE(e,r):"in"===t?new hE(e,r):"not-in"===t?new Ub(e,r):"array-contains-any"===t?new Bb(e,r):new Qr(e,t,r)}static V(e,t,r){return"in"===t?new na(e,r):new Io(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(xa(t,this.value)):null!==t&&Pu(this.value)===Pu(t)&&this.v(xa(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Vb extends Qr{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.v(t)}}class na extends Qr{constructor(e,t){super(e,"in",t),this.keys=Zs(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Io extends Qr{constructor(e,t){super(e,"not-in",t),this.keys=Zs(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Zs(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class dE extends Qr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nd(t)&&oc(t.arrayValue,this.value)}}class hE extends Qr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&oc(this.value.arrayValue,t)}}class Ub extends Qr{constructor(e,t){super(e,"not-in",t)}matches(e){if(oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!oc(this.value.arrayValue,t)}}class Bb extends Qr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>oc(this.value.arrayValue,r))}}class Lu{constructor(e,t){this.position=e,this.inclusive=t}}class Bd{constructor(e,t="asc"){this.field=e,this.dir=t}}function zy(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function jd(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],h=n.position[s];if(r=u.field.isKeyField()?je.comparator(je.fromName(h.referenceValue),t.key):xa(h,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function fE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Co(n.position[t],e.position[t]))return!1;return!0}class ra{constructor(e,t=null,r=[],s=[],u=null,h="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function pE(n,e,t,r,s,u,h,m){return new ra(n,e,t,r,s,u,h,m)}function lc(n){return new ra(n)}function Nf(n){return!Ma(n.limit)&&"F"===n.limitType}function cc(n){return!Ma(n.limit)&&"L"===n.limitType}function qy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Zg(n){for(const e of n.filters)if(e.S())return e.field;return null}function Kg(n){return null!==n.collectionGroup}function Vu(n){const e=Ze(n);if(null===e.D){e.D=[];const t=Zg(e),r=qy(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Bd(t)),e.D.push(new Bd(br.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Bd(br.keyField(),u))}}}return e.D}function Si(n){const e=Ze(n);if(!e.C)if("F"===e.limitType)e.C=cE(e.path,e.collectionGroup,Vu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Vu(e))t.push(new Bd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Lu(e.endAt.position,!e.endAt.inclusive):null,s=e.startAt?new Lu(e.startAt.position,!e.startAt.inclusive):null;e.C=cE(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.C}function Wy(n,e,t){return new ra(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hd(n,e){return Vd(Si(n),Si(e))&&n.limitType===e.limitType}function Zy(n){return`${Fu(Si(n))}|lt:${n.limitType}`}function Yg(n){return`Query(target=${function Lb(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ac(r.value)}`;var r}).join(", ")}]`),Ma(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ac(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ac(t)).join(",")),`Target(${e})`}(Si(n))}; limitType=${n.limitType})`}function Qg(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):je.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,h){const m=jd(s,u,h);return s.inclusive?m<=0:m<0}(t.startAt,Vu(t),r)||t.endAt&&!function(s,u,h){const m=jd(s,u,h);return s.inclusive?m>=0:m>0}(t.endAt,Vu(t),r)));var t,r}function Ky(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Yy(n){return(e,t)=>{let r=!1;for(const s of Vu(n)){const u=gE(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function gE(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(s,u,h){const m=u.data.field(s),w=h.data.field(s);return null!==m&&null!==w?xa(m,w):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function mE(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kd(e)?"-0":e}}function _E(n){return{integerValue:""+n}}function yE(n,e){return Vy(e)?_E(e):mE(n,e)}class Jg{constructor(){this._=void 0}}function jb(n,e,t){return n instanceof $d?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof dc?wE(n,e):n instanceof hc?EE(n,e):function(r,s){const u=vE(r,s),h=DE(u)+DE(r.k);return Of(u)&&Of(r.k)?_E(h):mE(r.M,h)}(n,e)}function Hb(n,e,t){return n instanceof dc?wE(n,e):n instanceof hc?EE(n,e):t}function vE(n,e){return n instanceof Gd?Of(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class $d extends Jg{}class dc extends Jg{constructor(e){super(),this.elements=e}}function wE(n,e){const t=CE(e);for(const r of n.elements)t.some(s=>Co(s,r))||t.push(r);return{arrayValue:{values:t}}}class hc extends Jg{constructor(e){super(),this.elements=e}}function EE(n,e){let t=CE(e);for(const r of n.elements)t=t.filter(s=>!Co(s,r));return{arrayValue:{values:t}}}class Gd extends Jg{constructor(e,t){super(),this.M=e,this.k=t}}function DE(n){return On(n.integerValue||n.doubleValue)}function CE(n){return Nd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Pf{constructor(e,t){this.field=e,this.transform=t}}class Gb{constructor(e,t){this.version=e,this.transformResults=t}}class tr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ff(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Lf{}function bE(n,e,t){n instanceof zd?function(r,s,u){const h=r.value.clone(),m=Bu(r.fieldTransforms,s,u.transformResults);h.setAll(m),s.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Uu?function(r,s,u){if(!Ff(r.precondition,s))return void s.convertToUnknownDocument(u.version);const h=Bu(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(Xy(r)),m.setAll(h),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Xg(n,e,t){var s;n instanceof zd?function(r,s,u){if(!Ff(r.precondition,s))return;const h=r.value.clone(),m=TE(r.fieldTransforms,u,s);h.setAll(m),s.convertToFoundDocument(Jy(s),h).setHasLocalMutations()}(n,e,t):n instanceof Uu?function(r,s,u){if(!Ff(r.precondition,s))return;const h=TE(r.fieldTransforms,u,s),m=s.data;m.setAll(Xy(r)),m.setAll(h),s.convertToFoundDocument(Jy(s),m).setHasLocalMutations()}(n,e,t):Ff(n.precondition,s=e)&&s.convertToNoDocument(vt.min())}function IE(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=vE(r.transform,s||null);null!=u&&(null==t&&(t=fi.empty()),t.set(r.field,u))}return t||null}function Qy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&sc(t,r,(s,u)=>function $b(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof dc&&r instanceof dc||t instanceof hc&&r instanceof hc?sc(t.elements,r.elements,Co):t instanceof Gd&&r instanceof Gd?Co(t.k,r.k):t instanceof $d&&r instanceof $d);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Jy(n){return n.isFoundDocument()?n.version:vt.min()}class zd extends Lf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}}class Uu extends Lf{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}}function Xy(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Bu(n,e,t){const r=new Map;bt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],h=u.transform,m=e.data.field(u.field);r.set(u.field,Hb(h,m,t[s]))}return r}function TE(n,e,t){const r=new Map;for(const s of n){const u=s.transform,h=t.data.field(s.field);r.set(s.field,jb(u,h,e))}return r}class Vf extends Lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class ju extends Lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class UA{constructor(e){this.count=e}}var zn,tn;function ev(n){switch(n){default:return st();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function tv(n){if(void 0===n)return Hn("GRPC error has no .code"),ue.UNKNOWN;switch(n){case zn.OK:return ue.OK;case zn.CANCELLED:return ue.CANCELLED;case zn.UNKNOWN:return ue.UNKNOWN;case zn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case zn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case zn.INTERNAL:return ue.INTERNAL;case zn.UNAVAILABLE:return ue.UNAVAILABLE;case zn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case zn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case zn.NOT_FOUND:return ue.NOT_FOUND;case zn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case zn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case zn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case zn.ABORTED:return ue.ABORTED;case zn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case zn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case zn.DATA_LOSS:return ue.DATA_LOSS;default:return st()}}(tn=zn||(zn={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";class fc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Rd(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return Hg(this.inner)}size(){return this.innerSize}}class Qe{constructor(e,t){this.comparator=e,this.root=t||Jr.EMPTY}insert(e,t){return new Qe(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jr.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new em(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new em(this.root,e,this.comparator,!1)}getReverseIterator(){return new em(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new em(this.root,e,this.comparator,!0)}}class em{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jr{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=null!=r?r:Jr.RED,this.left=null!=s?s:Jr.EMPTY,this.right=null!=u?u:Jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Jr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Jr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}Jr.EMPTY=null,Jr.RED=!0,Jr.BLACK=!1,Jr.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Jr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class An{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Uf(this.data.getIterator())}getIteratorFrom(e){return new Uf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof An)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new An(this.comparator);return t.data=e,t}}class Uf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qd(n){return n.hasNext()?n.getNext():void 0}const tm=new Qe(je.comparator);function Mi(){return tm}const qn=new Qe(je.comparator);function AE(){return qn}function Wd(){return new fc(n=>n.toString(),(n,e)=>n.isEqual(e))}const zb=new Qe(je.comparator),qb=new An(je.comparator);function an(...n){let e=qb;for(const t of n)e=e.add(t);return e}const SE=new An(kt);function Bf(){return SE}class Zd{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,jf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Zd(vt.min(),r,Bf(),Mi(),an())}}class jf{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new jf(Ir.EMPTY_BYTE_STRING,t,an(),an(),an())}}class nm{constructor(e,t,r,s){this.O=e,this.removedTargetIds=t,this.key=r,this.F=s}}class ME{constructor(e,t){this.targetId=e,this.$=t}}class Kd{constructor(e,t,r=Ir.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class xE{constructor(){this.B=0,this.L=Hf(),this.U=Ir.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=an(),t=an(),r=an();return this.L.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:st()}}),new jf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Hf()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Wb{constructor(e){this.nt=e,this.st=new Map,this.it=Mi(),this.rt=RE(),this.ot=new An(kt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,s)=>{this.ft(s)&&t(s)})}_t(e){const t=e.targetId,r=e.$.count,s=this.wt(t);if(s){const u=s.target;if(Gy(u))if(0===r){const h=new je(u.path);this.ct(t,h,Tn.newNoDocument(h,vt.min()))}else bt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,h)=>{const m=this.wt(h);if(m){if(u.current&&Gy(m.target)){const w=new je(m.target.path);null!==this.it.get(w)||this.It(h,w)||this.ct(h,w,Tn.newNoDocument(w,e))}u.j&&(t.set(h,u.H()),u.J())}});let r=an();this.rt.forEach((u,h)=>{let m=!0;h.forEachWhile(w=>{const b=this.wt(w);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,h)=>h.setReadTime(e));const s=new Zd(e,t,this.ot,this.it,r);return this.it=Mi(),this.rt=RE(),this.ot=new An(kt),s}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const s=this.lt(e);this.It(e,t)?s.Y(t,1):s.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new xE,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new An(kt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new xE),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function RE(){return new Qe(je.comparator)}function Hf(){return new Qe(je.comparator)}const OE={asc:"ASCENDING",desc:"DESCENDING"},kE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class NE{constructor(e,t){this.databaseId=e,this.N=t}}function $f(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yd(n,e){return n.N?e.toBase64():e.toUint8Array()}function Gf(n,e){return $f(n,e.toTimestamp())}function Br(n){return bt(!!n),vt.fromTimestamp(function(e){const t=Do(e);return new $n(t.seconds,t.nanos)}(n))}function nv(n,e){return(t=n,new en(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function PE(n){const e=en.fromString(n);return bt(pc(e)),e}function Qd(n,e){return nv(n.databaseId,e.path)}function To(n,e){const t=PE(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(LE(t))}function rm(n,e){return nv(n.databaseId,e)}function FE(n){const e=PE(n);return 4===e.length?en.emptyPath():LE(e)}function Jd(n){return new en(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LE(n){return bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function VE(n,e,t){return{name:Qd(n,e),fields:t.value.mapValue.fields}}function Zb(n,e,t){const r=To(n,e.name),s=Br(e.updateTime),u=new fi({mapValue:{fields:e.fields}}),h=Tn.newFoundDocument(r,s,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function im(n,e){let t;if(e instanceof zd)t={update:VE(n,e.key,e.value)};else if(e instanceof Vf)t={delete:Qd(n,e.key)};else if(e instanceof Uu)t={update:VE(n,e.key,e.data),updateMask:Jb(e.fieldMask)};else{if(!(e instanceof ju))return st();t={verify:Qd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const h=u.transform;if(h instanceof $d)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof dc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof hc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Gd)return{fieldPath:u.field.canonicalString(),increment:h.k};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Gf(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:st()),t;var s}function sm(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?tr.updateTime(Br(s.updateTime)):void 0!==s.exists?tr.exists(s.exists):tr.none():tr.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,h){let m=null;"setToServerValue"in h?(bt("REQUEST_TIME"===h.setToServerValue),m=new $d):"appendMissingElements"in h?m=new dc(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new hc(h.removeAllFromArray.values||[]):"increment"in h?m=new Gd(u,h.increment):st();const w=br.fromServerFormat(h.fieldPath);return new Pf(w,m)}(n,s)):[];var s;if(e.update){const s=To(n,e.update.name),u=new fi({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new ku((e.updateMask.fieldPaths||[]).map(b=>br.fromServerFormat(b)));return new Uu(s,u,h,t,r)}return new zd(s,u,t,r)}if(e.delete){const s=To(n,e.delete);return new Vf(s,t)}if(e.verify){const s=To(n,e.verify);return new ju(s,t)}return st()}function UE(n,e){return{documents:[rm(n,e.path)]}}function BE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=rm(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=rm(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0===w.length)return;const b=w.map(x=>function(O){if("=="===O.op){if(jy(O.value))return{unaryFilter:{field:Xd(O.field),op:"IS_NAN"}};if(By(O.value))return{unaryFilter:{field:Xd(O.field),op:"IS_NULL"}}}else if("!="===O.op){if(jy(O.value))return{unaryFilter:{field:Xd(O.field),op:"IS_NOT_NAN"}};if(By(O.value))return{unaryFilter:{field:Xd(O.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xd(O.field),op:Yb(O.op),value:O.value}}}(x));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:Xd((x=b).field),direction:Kb(x.dir)};var x})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=(b=e.limit,n.N||Ma(b)?b:{value:b});var b,m,w;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function rv(n){let e=FE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){bt(1===r);const x=t.from[0];x.allDescendants?s=x.collectionId:e=e.child(x.collectionId)}let u=[];t.where&&(u=jE(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(x=>{return new Bd(eh((O=x).field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let m=null;t.limit&&(m=function(x){let O;return O="object"==typeof x?x.value:x,Ma(O)?null:O}(t.limit));let w=null;var x;t.startAt&&(w=new Lu((x=t.startAt).values||[],!!x.before));let b=null;return t.endAt&&(b=function(x){return new Lu(x.values||[],!x.before)}(t.endAt)),pE(e,s,h,u,m,"F",w,b)}function jE(n){return n?void 0!==n.unaryFilter?[Qb(n)]:void 0!==n.fieldFilter?[HE(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>jE(e)).reduce((e,t)=>e.concat(t)):st():[]}function Kb(n){return OE[n]}function Yb(n){return kE[n]}function Xd(n){return{fieldPath:n.canonicalString()}}function eh(n){return br.fromServerFormat(n.fieldPath)}function HE(n){return Qr.create(eh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function Qb(n){switch(n.unaryFilter.op){case"IS_NAN":const e=eh(n.unaryFilter.field);return Qr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=eh(n.unaryFilter.field);return Qr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=eh(n.unaryFilter.field);return Qr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=eh(n.unaryFilter.field);return Qr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function Jb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pc(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function xi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=GE(e)),e=$E(n.get(t),e);return GE(e)}function $E(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function GE(n){return n+"\x01\x01"}function Ao(n){const e=n.length;if(bt(e>=2),2===e)return bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),en.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const h=n.indexOf("\x01",u);switch((h<0||h>t)&&st(),n.charAt(h+1)){case"\x01":const m=n.substring(u,h);let w;0===s.length?w=m:(s+=m,w=s,s=""),r.push(w);break;case"\x10":s+=n.substring(u,h),s+="\0";break;case"\x11":s+=n.substring(u,h+1);break;default:st()}u=h+2}return new en(r)}const zE=["userId","batchId"];function qf(n,e){return[n,xi(e)]}function qE(n,e,t){return[n,xi(e),t]}const iv={},Xb=["prefixPath","collectionGroup","readTime","documentId"],WE=["prefixPath","collectionGroup","documentId"],ZE=["collectionGroup","readTime","prefixPath","documentId"],eI=["canonicalId","targetId"],tI=["targetId","path"],nI=["path","targetId"],sv=["collectionId","parent"],rI=["indexId","uid"],KE=["uid","sequenceNumber"],iI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sI=["indexId","uid","orderedDocumentKey"],oI=["userId","collectionPath","documentId"],aI=["userId","collectionPath","largestBatchId"],uI=["userId","collectionGroup","largestBatchId"],YE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],lI=[...YE,"documentOverlays"],QE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],JE=[...QE,"indexConfiguration","indexState","indexEntries"],ov="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,r)=>{t(e)})}static reject(e){return new pe((t,r)=>{r(e)})}static waitFor(e){return new pe((t,r)=>{let s=0,u=0,h=!1;e.forEach(m=>{++s,m.next(()=>{++u,h&&u===s&&t()},w=>r(w))}),h=!0,u===s&&t()})}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next(s=>s?pe.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}}class Wf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ur,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Zf(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const s=uv(r.target.error);this.At.reject(new Zf(e,s))}}static open(e,t,r,s){try{return new Wf(t,e.transaction(s,r))}catch(u){throw new Zf(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new av(t)}}class So{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===So.Vt((0,Gt.z$)())&&Hn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),Hu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Gt.hl)())return!1;if(So.St())return!0;const e=(0,Gt.z$)(),t=So.Vt(e),r=0<t&&t<10,s=So.Dt(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=h=>{r(h.target.result)},u.onblocked=()=>{s(new Zf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=h=>{const m=h.target.error;s("VersionError"===m.name?new Re(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Re(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Zf(e,m))},u.onupgradeneeded=h=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.bt.kt(h.target.result,u.transaction,h.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,ye.Z)(function*(){const h="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const w=Wf.open(u.db,e,h?"readonly":"readwrite",r),b=s(w).next(x=>(w.Pt(),x)).catch(x=>(w.abort(x),pe.reject(x))).toPromise();return b.catch(()=>{}),yield w.Rt,b}catch(w){const b="FirebaseError"!==w.name&&m<3;if(Pe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",b),u.close(),!b)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class cI{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Hu(this.Ft.delete())}}class Zf extends Re{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Oa(n){return"IndexedDbTransactionError"===n.name}class av{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hu(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),Hu(this.store.add(e))}get(e){return Hu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),Hu(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),Hu(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.Kt(s,(h,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new pe((u,h)=>{s.onerror=m=>{h(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new pe((s,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{s(h.target.result)}})}Qt(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const s=this.cursor(r);return this.Kt(s,(u,h,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.Kt(s,t)}zt(e){const t=this.cursor({});return new pe((r,s)=>{t.onerror=u=>{const h=uv(u.target.error);s(h)},t.onsuccess=u=>{const h=u.target.result;h?e(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}Kt(e,t){const r=[];return new pe((s,u)=>{e.onerror=h=>{u(h.target.error)},e.onsuccess=h=>{const m=h.target.result;if(!m)return void s();const w=new cI(m),b=t(m.primaryKey,m.value,w);if(b instanceof pe){const x=b.catch(O=>(w.done(),pe.reject(O)));r.push(x)}w.isDone?s():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>pe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hu(n){return new pe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=uv(r.target.error);t(s)}})}let am=!1;function uv(n){const e=So.Vt((0,Gt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return am||(am=!0,setTimeout(()=>{throw r},0)),r}}return n}class eD extends XE{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function cr(n,e){const t=Ze(n);return So.xt(t.Ht,e)}class lv{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&bE(u,e,r[s])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Xg(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Xg(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),s=r;this.applyToLocalView(s),r.isValidDocument()||s.convertToNoDocument(vt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),an())}isEqual(e){return this.batchId===e.batchId&&sc(this.mutations,e.mutations,(t,r)=>Qy(t,r))&&sc(this.baseMutations,e.baseMutations,(t,r)=>Qy(t,r))}}class um{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){bt(e.mutations.length===r.length);let s=zb;const u=e.mutations;for(let h=0;h<u.length;h++)s=s.insert(u[h].key,r[h].version);return new um(e,t,r,s)}}class cv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ka{constructor(e,t,r,s,u=vt.min(),h=vt.min(),m=Ir.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(e){return new ka(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ka(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class tD{constructor(e){this.Jt=e}}function dI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:lm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Qd(s=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:$f(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ia(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:ia(e.version)}}var s,u;return r}function lm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ia(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function gc(n){const e=new $n(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function Mo(n,e){const t=(e.baseMutations||[]).map(u=>sm(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const h=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(h.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>sm(n.Jt,u)),s=$n.fromMillis(e.localWriteTimeMs);return new lv(e.batchId,s,t,r)}function Na(n){const e=gc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?gc(n.lastLimboFreeSnapshotVersion):vt.min();let r;var s;return void 0!==n.query.documents?(bt(1===(s=n.query).documents.length),r=Si(lc(FE(s.documents[0])))):r=Si(rv(n.query)),new ka(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ir.fromBase64String(n.resumeToken))}function rD(n,e){const t=ia(e.snapshotVersion),r=ia(e.lastLimboFreeSnapshotVersion);let s;s=Gy(e.target)?UE(n.Jt,e.target):BE(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function iD(n){const e=rv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Wy(e,e.limit,"L"):e}function cm(n,e){return new cv(e.largestBatchId,sm(n.Jt,e.overlayMutation))}function sD(n,e){const t=e.path.lastSegment();return[n,xi(e.path.popLast()),t]}class hI{getBundleMetadata(e,t){return oD(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:gc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return oD(e).put({bundleId:(r=t).id,createTime:ia(Br(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return aD(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:iD(s.bundledQuery),readTime:gc(s.readTime)};var s})}saveNamedQuery(e,t){return aD(e).put({name:(r=t).name,readTime:ia(Br(r.readTime)),bundledQuery:r.bundledQuery});var r}}function oD(n){return cr(n,"bundles")}function aD(n){return cr(n,"namedQueries")}class dm{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new dm(e,t.uid||"")}getOverlay(e,t){return th(e).get(sD(this.userId,t)).next(r=>r?cm(this.M,r):null)}saveOverlays(e,t,r){const s=[];return r.forEach((u,h)=>{const m=new cv(t,h);s.push(this.Xt(e,m))}),pe.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(h=>s.add(xi(h.getCollectionPath())));const u=[];return s.forEach(h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(th(e).Qt("collectionPathOverlayIndex",m))}),pe.waitFor(u)}getOverlaysForCollection(e,t,r){const s=Wd(),u=xi(t),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return th(e).qt("collectionPathOverlayIndex",h).next(m=>{for(const w of m){const b=cm(this.M,w);s.set(b.getKey(),b)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=Wd();let h;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return th(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,b,x)=>{const O=cm(this.M,b);u.size()<s||O.largestBatchId===h?(u.set(O.getKey(),O),h=O.largestBatchId):x.done()}).next(()=>u)}Xt(e,t){return th(e).put(function(r,s,u){const[h,m,w]=sD(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:im(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function th(n){return cr(n,"documentOverlays")}class Pa{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(On(e.integerValue));else if("doubleValue"in e){const r=On(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),kd(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Od(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Hy(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):st()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const s of Object.keys(r))this.re(s,t),this.te(r[s],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const s of r)this.te(s,t)}ae(e,t){this.ne(t,37),je.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function hm(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function nh(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=hm(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Pa.fe=new Pa;class fI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const s=t.codePointAt(0);this._e(240|s>>>18),this._e(128|63&s>>>12),this._e(128|63&s>>>6),this._e(128|63&s)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const s=t.codePointAt(0);this.ge(240|s>>>18),this.ge(128|63&s>>>12),this.ge(128|63&s>>>6),this.ge(128|63&s)}}this.ye()}Te(e){const t=this.Ee(e),r=nh(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Re(e){const t=this.Ee(e),r=nh(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class uD{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class lD{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Kf{constructor(){this.De=new fI,this.Ce=new uD(this.De),this.xe=new lD(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class $u{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new $u(this.indexId,this.documentKey,this.arrayValue,r)}}function Fa(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=cD(n.arrayValue,e.arrayValue),0!==t?t:(t=cD(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function cD(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class HA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=zg(e);if(void 0!==t&&!this.Be(t))return!1;const r=uc(e);let s=0,u=0;for(;s<r.length&&this.Be(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Fe){const h=r[s];if(!this.Le(this.Fe,h)||!this.Ue(this.Me[u++],h))return!1;++s}for(;s<r.length;++s){const h=r[s];if(u>=this.Me.length||!this.Ue(this.Me[u++],h))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class pI{constructor(){this.qe=new dv}addToCollectionParentIndex(e,t){return this.qe.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getFieldIndex(e,t){return pe.resolve(null)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class dv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new An(en.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new An(en.comparator)).toArray()}}const xo=new Uint8Array(0);class dD{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new dv,this.Ge=new fc(r=>Fu(r),(r,s)=>Vd(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:xi(s)};return mc(e).put(u)}return pe.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[nE(t),""],!1,!0);return mc(e).qt(s).next(u=>{for(const h of u){if(h.collectionId!==t)break;r.push(Ao(h.parent))}return r})}addFieldIndex(e,t){const r=Yf(e),s={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;return delete s.indexId,r.add(s).next()}deleteFieldIndex(e,t){const r=Yf(e),s=pm(e),u=fm(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=fm(e);let s=!0;const u=new Map;return pe.forEach(this.Qe(t),h=>this.getFieldIndex(e,h).next(m=>{s&&(s=!!m),u.set(h,m)})).next(()=>{if(s){let h=an();const m=[];return pe.forEach(u,(w,b)=>{var x;Pe("IndexedDbIndexManager",`Using index ${x=w,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(Jt=>`${Jt.fieldPath}:${Jt.kind}`).join(",")}`} to execute ${Fu(t)}`);const O=function(Jt,Ft){const Yt=zg(Ft);if(void 0===Yt)return null;for(const hn of Ud(Jt,Yt.fieldPath))switch(hn.op){case"array-contains-any":return hn.value.arrayValue.values||[];case"array-contains":return[hn.value]}return null}(b,w),U=function(Jt,Ft){const Yt=new Map;for(const hn of uc(Ft))for(const qi of Ud(Jt,hn.fieldPath))switch(qi.op){case"==":case"in":Yt.set(hn.fieldPath.canonicalString(),qi.value);break;case"not-in":case"!=":return Yt.set(hn.fieldPath.canonicalString(),qi.value),Array.from(Yt.values())}return null}(b,w),K=function(Jt,Ft){const Yt=[];let hn=!0;for(const qi of uc(Ft)){const Rp=0===qi.kind?Wg(Jt,qi.fieldPath,Jt.startAt):bo(Jt,qi.fieldPath,Jt.startAt);if(!Rp.value)return null;Yt.push(Rp.value),hn&&(hn=Rp.inclusive)}return new Lu(Yt,hn)}(b,w),le=function(Jt,Ft){const Yt=[];let hn=!0;for(const qi of uc(Ft)){const Rp=0===qi.kind?bo(Jt,qi.fieldPath,Jt.endAt):Wg(Jt,qi.fieldPath,Jt.endAt);if(!Rp.value)return null;Yt.push(Rp.value),hn&&(hn=Rp.inclusive)}return new Lu(Yt,hn)}(b,w),Oe=this.je(w,b,K),qe=this.je(w,b,le),Ut=this.We(w,b,U),Kt=this.ze(w.indexId,O,Oe,!!K&&K.inclusive,qe,!!le&&le.inclusive,Ut);return pe.forEach(Kt,Jt=>r.Gt(Jt,t.limit).next(Ft=>{Ft.forEach(Yt=>{const hn=je.fromSegments(Yt.documentKey);h.has(hn)||(h=h.add(hn),m.push(hn))})}))}).next(()=>m)}return pe.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,s,u,h,m){const w=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),b=w/(null!=t?t.length:1),x=[];for(let O=0;O<w;++O){const U=t?this.He(t[O/b]):xo,K=r?this.Je(e,U,r[O%b],s):this.Ye(e),le=u?this.Xe(e,U,u[O%b],h):this.Ye(e+1);x.push(...this.createRange(K,le,m.map(Oe=>this.Je(e,U,Oe,!0))))}return x}Je(e,t,r,s){const u=new $u(e,je.empty(),t,r);return s?u:u.ke()}Xe(e,t,r,s){const u=new $u(e,je.empty(),t,r);return s?u.ke():u}Ye(e){return new $u(e,je.empty(),xo,xo)}getFieldIndex(e,t){const r=new HA(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{const h=u.filter(m=>r.$e(m));return h.sort((m,w)=>w.fields.length-m.fields.length),h.length>0?h[0]:null})}Ze(e,t){const r=new Kf;for(const s of uc(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const h=r.Ne(s.kind);Pa.fe.Zt(u,h)}return r.Se()}He(e){const t=new Kf;return Pa.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Kf;return Pa.fe.Zt(Ra(this.databaseId,t),r.Ne(function(s){const u=uc(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let s=[];s.push(new Kf);let u=0;for(const h of uc(e)){const m=r[u++];for(const w of s)if(this.en(t,h.fieldPath)&&Nd(m))s=this.nn(s,h,m);else{const b=w.Ne(h.kind);Pa.fe.Zt(m,b)}}return this.sn(s)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const s=[...e],u=[];for(const h of r.arrayValue.values||[])for(const m of s){const w=new Kf;w.seed(m.Se()),Pa.fe.Zt(h,w.Ne(t.kind)),u.push(w)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Qr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Yf(e),s=pm(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const h=[];return pe.forEach(u,m=>s.get([m.indexId,this.uid]).next(w=>{h.push(function(b,x){const O=x?new Fd(x.sequenceNumber,new ta(gc(x.readTime),new je(Ao(x.documentKey)),x.largestBatchId)):Fd.empty(),U=b.fields.map(([K,le])=>new qg(br.fromServerFormat(K),le));return new Gn(b.indexId,b.collectionGroup,U,O)}(m,w))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:kt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Yf(e),u=pm(e);return this.rn(e).next(h=>s.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>pe.forEach(m,w=>{return u.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:h,readTime:ia((U=r).readTime),documentKey:xi(U.documentKey.path),largestBatchId:U.largestBatchId});var U})))}updateIndexEntries(e,t){const r=new Map;return pe.forEach(t,(s,u)=>{const h=r.get(s.collectionGroup);return(h?pe.resolve(h):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),pe.forEach(m,w=>this.on(e,s,w).next(b=>{const x=this.un(u,w);return b.isEqual(x)?pe.resolve():this.an(e,u,w,b,x)}))))})}cn(e,t,r,s){return fm(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,s){return fm(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const s=fm(e);let u=new An(Fa);return s.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(h,m)=>{u=u.add(new $u(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new An(Fa);const s=this.Ze(t,e);if(null==s)return r;const u=zg(t);if(null!=u){const h=e.data.field(u.fieldPath);if(Nd(h))for(const m of h.arrayValue.values||[])r=r.add(new $u(t.indexId,e.key,this.He(m),s))}else r=r.add(new $u(t.indexId,e.key,xo,s));return r}an(e,t,r,s,u){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(m,w,b,x,O){const U=m.getIterator(),K=w.getIterator();let le=qd(U),Oe=qd(K);for(;le||Oe;){let qe=!1,Ut=!1;if(le&&Oe){const Kt=b(le,Oe);Kt<0?Ut=!0:Kt>0&&(qe=!0)}else null!=le?Ut=!0:qe=!0;qe?(x(Oe),Oe=qd(K)):Ut?(O(le),le=qd(U)):(le=qd(U),Oe=qd(K))}}(s,u,Fa,m=>{h.push(this.cn(e,t,r,m))},m=>{h.push(this.hn(e,t,r,m))}),pe.waitFor(h)}rn(e){let t=1;return pm(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,m)=>Fa(h,m)).filter((h,m,w)=>!m||0!==Fa(h,w[m-1]));const s=[];s.push(e);for(const h of r){const m=Fa(h,e),w=Fa(h,t);if(0===m)s[0]=e.ke();else if(m>0&&w<0)s.push(h),s.push(h.ke());else if(w>0)break}s.push(t);const u=[];for(let h=0;h<s.length;h+=2)u.push(IDBKeyRange.bound([s[h].indexId,this.uid,s[h].arrayValue,s[h].directionalValue,xo,[]],[s[h+1].indexId,this.uid,s[h+1].arrayValue,s[h+1].directionalValue,xo,[]]));return u}}function mc(n){return cr(n,"collectionParents")}function fm(n){return cr(n,"indexEntries")}function Yf(n){return cr(n,"indexConfiguration")}function pm(n){return cr(n,"indexState")}const gI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ri{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ri(e,Ri.DEFAULT_COLLECTION_PERCENTILE,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function mI(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],h=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:h},(x,O,U)=>(m++,U.delete()));u.push(w.next(()=>{bt(1===m)}));const b=[];for(const x of t.mutations){const O=qE(e,x.key.path,t.batchId);u.push(s.delete(O)),b.push(x.key)}return pe.waitFor(u).next(()=>b)}function Qf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}Ri.DEFAULT_COLLECTION_PERCENTILE=10,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ri.DEFAULT=new Ri(41943040,Ri.DEFAULT_COLLECTION_PERCENTILE,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ri.DISABLED=new Ri(-1,0,0);class Jf{constructor(e,t,r,s){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=s,this.ln={}}static Yt(e,t,r,s){bt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Jf(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gu(e).Wt({index:"userMutationsIndex",range:r},(s,u,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=rh(e),h=Gu(e);return h.add({}).next(m=>{bt("number"==typeof m);const w=new lv(m,t,r,s),b=function(U,K,le){const Oe=le.baseMutations.map(Ut=>im(U.Jt,Ut)),qe=le.mutations.map(Ut=>im(U.Jt,Ut));return{userId:K,batchId:le.batchId,localWriteTimeMs:le.localWriteTime.toMillis(),baseMutations:Oe,mutations:qe}}(this.M,this.userId,w),x=[];let O=new An((U,K)=>kt(U.canonicalString(),K.canonicalString()));for(const U of s){const K=qE(this.userId,U.key.path,m);O=O.add(U.key.path.popLast()),x.push(h.put(b)),x.push(u.put(K,iv))}return O.forEach(U=>{x.push(this.indexManager.addToCollectionParentIndex(e,U))}),e.addOnCommittedListener(()=>{this.ln[m]=w.keys()}),pe.waitFor(x).next(()=>w)})}lookupMutationBatch(e,t){return Gu(e).get(t).next(r=>r?(bt(r.userId===this.userId),Mo(this.M,r)):null)}fn(e,t){return this.ln[t]?pe.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.ln[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Gu(e).Wt({index:"userMutationsIndex",range:s},(h,m,w)=>{m.userId===this.userId&&(bt(m.batchId>=r),u=Mo(this.M,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Gu(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(s,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gu(e).qt("userMutationsIndex",t).next(r=>r.map(s=>Mo(this.M,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=qf(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return rh(e).Wt({range:s},(h,m,w)=>{const[b,x,O]=h,U=Ao(x);if(b===this.userId&&t.path.isEqual(U))return Gu(e).get(O).next(K=>{if(!K)throw st();bt(K.userId===this.userId),u.push(Mo(this.M,K))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(kt);const s=[];return t.forEach(u=>{const h=qf(this.userId,u.path),m=IDBKeyRange.lowerBound(h),w=rh(e).Wt({range:m},(b,x,O)=>{const[U,K,le]=b,Oe=Ao(K);U===this.userId&&u.path.isEqual(Oe)?r=r.add(le):O.done()});s.push(w)}),pe.waitFor(s).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=qf(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new An(kt);return rh(e).Wt({range:h},(w,b,x)=>{const[O,U,K]=w,le=Ao(U);O===this.userId&&r.isPrefixOf(le)?le.length===s&&(m=m.add(K)):x.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Gu(e).get(u).next(h=>{if(null===h)throw st();bt(h.userId===this.userId),r.push(Mo(this.M,h))}))}),pe.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return mI(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),pe.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return pe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return rh(e).Wt({range:r},(u,h,m)=>{if(u[0]===this.userId){const w=Ao(u[1]);s.push(w)}else m.done()}).next(()=>{bt(0===s.length)})})}containsKey(e,t){return hD(e,this.userId,t)}wn(e){return fD(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function hD(n,e,t){const r=qf(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return rh(n).Wt({range:u,jt:!0},(m,w,b)=>{const[x,O,U]=m;x===e&&O===s&&(h=!0),b.done()}).next(()=>h)}function Gu(n){return cr(n,"mutations")}function rh(n){return cr(n,"documentMutations")}function fD(n){return cr(n,"mutationQueues")}class _c{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new _c(0)}static yn(){return new _c(-1)}}class _I{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new _c(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>vt.fromTimestamp(new $n(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.In(e,s)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ih(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(bt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return ih(e).Wt((h,m)=>{const w=Na(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(s++,u.push(this.removeTargetData(e,w)))}).next(()=>pe.waitFor(u)).next(()=>s)}forEachTarget(e,t){return ih(e).Wt((r,s)=>{const u=Na(s);t(u)})}pn(e){return pD(e).get("targetGlobalKey").next(t=>(bt(null!==t),t))}In(e,t){return pD(e).put("targetGlobalKey",t)}Tn(e,t){return ih(e).put(rD(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Fu(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ih(e).Wt({range:s,index:"queryTargetsIndex"},(h,m,w)=>{const b=Na(m);Vd(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=zu(e);return t.forEach(h=>{const m=xi(h.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,h))}),pe.waitFor(s)}removeMatchingKeys(e,t,r){const s=zu(e);return pe.forEach(t,u=>{const h=xi(u.path);return pe.waitFor([s.delete([r,h]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=zu(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=zu(e);let u=an();return s.Wt({range:r,jt:!0},(h,m,w)=>{const b=Ao(h[1]),x=new je(b);u=u.add(x)}).next(()=>u)}containsKey(e,t){const r=xi(t.path),s=IDBKeyRange.bound([r],[nE(r)],!1,!0);let u=0;return zu(e).Wt({index:"documentTargetsIndex",jt:!0,range:s},([h,m],w,b)=>{0!==h&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return ih(e).get(t).next(r=>r?Na(r):null)}}function ih(n){return cr(n,"targets")}function pD(n){return cr(n,"targetGlobal")}function zu(n){return cr(n,"targetDocuments")}function yc(n){return vc.apply(this,arguments)}function vc(){return vc=(0,ye.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==ov)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),vc.apply(this,arguments)}function hv([n,e],[t,r]){const s=kt(n,t);return 0===s?kt(e,r):s}class gD{constructor(e){this.An=e,this.buffer=new An(hv),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();hv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mD{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Pe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ye.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(s){Oa(s)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield yc(s)}yield t.Sn(e)}))}}class _D{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return pe.resolve(hs.A);const r=new gD(t);return this.Dn.forEachTarget(e,s=>r.bn(s.sequenceNumber)).next(()=>this.Dn.xn(e,s=>r.bn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(gI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gI):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,s,u,h,m,w,b;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),s=this.params.maximumSequenceNumbersToCollect):s=O,h=Date.now(),this.nthSequenceNumber(e,s))).next(O=>(r=O,m=Date.now(),this.removeTargets(e,r,t))).next(O=>(u=O,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(b=Date.now(),ky()<=Pr.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-x}ms\n\tDetermined least recently used ${s} in `+(m-h)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${O} documents in `+(b-w)+`ms\nTotal Duration: ${b-x}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:O})))}}class yD{constructor(e,t){this.db=e,this.garbageCollector=new _D(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,s)=>t(s))}addReference(e,t,r){return gm(e,r)}removeReference(e,t,r){return gm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return gm(e,t)}On(e,t){return function(r,s){let u=!1;return fD(r).zt(h=>hD(r,h,s).next(m=>(m&&(u=!0),pe.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Mn(e,(h,m)=>{if(m<=t){const w=this.On(e,h).next(b=>{if(!b)return u++,r.getEntry(e,h).next(()=>(r.removeEntry(h,vt.min()),zu(e).delete([0,xi(h.path)])))});s.push(w)}}).next(()=>pe.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return gm(e,t)}Mn(e,t){const r=zu(e);let s,u=hs.A;return r.Wt({index:"documentTargetsIndex"},([h,m],{path:w,sequenceNumber:b})=>{0===h?(u!==hs.A&&t(new je(Ao(s)),u),u=b,s=w):u=hs.A}).next(()=>{u!==hs.A&&t(new je(Ao(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gm(n,e){return zu(n).put((r=n.currentSequenceNumber,{targetId:0,path:xi(e.path),sequenceNumber:r}));var r}class vD{constructor(){this.changes=new fc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yI{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return wc(e).put(r)}removeEntry(e,t,r){return wc(e).delete(function(s,u){const h=s.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],lm(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Tn.newInvalidDocument(t);return wc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Xf(t))},(s,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Tn.newInvalidDocument(t)};return wc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Xf(t))},(s,u)=>{r={document:this.$n(t,u),size:Qf(u)}}).next(()=>r)}getEntries(e,t){let r=Mi();return this.Ln(e,t,(s,u)=>{const h=this.$n(s,u);r=r.insert(s,h)}).next(()=>r)}Un(e,t){let r=Mi(),s=new Qe(je.comparator);return this.Ln(e,t,(u,h)=>{const m=this.$n(u,h);r=r.insert(u,m),s=s.insert(u,Qf(h))}).next(()=>({documents:r,qn:s}))}Ln(e,t,r){if(t.isEmpty())return pe.resolve();let s=new An(ED);t.forEach(w=>s=s.add(w));const u=IDBKeyRange.bound(Xf(s.first()),Xf(s.last())),h=s.getIterator();let m=h.getNext();return wc(e).Wt({index:"documentKeyIndex",range:u},(w,b,x)=>{const O=je.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&ED(m,O)<0;)r(m,null),m=h.getNext();m&&m.isEqual(O)&&(r(m,b),m=h.hasNext()?h.getNext():null),m?x.Ut(Xf(m)):x.done()}).next(()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),lm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wc(e).qt(IDBKeyRange.bound(s,u,!0)).next(h=>{let m=Mi();for(const w of h){const b=this.$n(je.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(b.key,b)}return m})}getAllFromCollectionGroup(e,t,r,s){let u=Mi();const h=sh(t,r),m=sh(t,ta.max());return wc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,m,!0)},(w,b,x)=>{const O=this.$n(je.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(O.key,O),u.size===s&&x.done()}).next(()=>u)}newChangeBuffer(e){return new vI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return wD(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}Fn(e,t){return wD(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function nD(n,e){let t;if(e.document)t=Zb(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),s=gc(e.noDocument.readTime);t=Tn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=je.fromSegments(e.unknownDocument.path),s=gc(e.unknownDocument.version);t=Tn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new $n(r[0],r[1]);return vt.fromTimestamp(s)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return Tn.newInvalidDocument(e)}}class vI extends vD{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new fc(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new An((u,h)=>kt(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),h.isValidDocument()){const w=dI(this.Kn.M,h);s=s.add(u.path.popLast()),r+=Qf(w)-m.size,t.push(this.Kn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=dI(this.Kn.M,h.convertToNoDocument(vt.min()));t.push(this.Kn.addEntry(e,u,w))}}),s.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),pe.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:s})=>(s.forEach((u,h)=>{this.Gn.set(u,{size:h,readTime:r.get(u).readTime})}),r))}}function wD(n){return cr(n,"remoteDocumentGlobal")}function wc(n){return cr(n,"remoteDocumentsV14")}function Xf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function sh(n,e){const t=e.documentKey.path.toArray();return[n,lm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ED(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=kt(t[u],r[u]),s)return s;return s=kt(t.length,r.length),s||(s=kt(t[t.length-2],r[r.length-2]),s||kt(t[t.length-1],r[r.length-1]))}class fv{constructor(e){this.M=e}kt(e,t,r,s){const u=new Wf("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zE,{unique:!0}),m.createObjectStore("documentMutations"),Ro(e),function(m){m.createObjectStore("remoteDocuments")}(e));let h=pe.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Ro(e)),h=h.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&s>=4&&(0!==r&&(h=h.next(()=>function(m,w){return w.store("mutations").qt().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zE,{unique:!0});const x=w.store("mutations"),O=b.map(U=>x.put(U));return pe.waitFor(O)})}(e,u))),h=h.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(h=h.next(()=>this.Qn(u))),r<6&&s>=6&&(h=h.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&s>=7&&(h=h.next(()=>this.Wn(u))),r<8&&s>=8&&(h=h.next(()=>this.zn(e,u))),r<9&&s>=9&&(h=h.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(h=h.next(()=>this.Hn(u))),r<11&&s>=11&&(h=h.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(h=h.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:oI});w.createIndex("collectionPathOverlayIndex",aI,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",uI,{unique:!1})}(e)})),r<13&&s>=13&&(h=h.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:Xb});w.createIndex("documentKeyIndex",WE),w.createIndex("collectionGroupIndex",ZE)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(h=h.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:rI}).createIndex("sequenceNumberIndex",KE,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:iI}).createIndex("documentKeyIndex",sI,{unique:!1})}(e)})),h}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,s)=>{t+=Qf(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(s=>pe.forEach(s,u=>{const h=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",h).next(m=>pe.forEach(m,w=>{bt(w.userId===u.userId);const b=Mo(this.M,w);return mI(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Wt((h,m)=>{const w=new en(h),b=[0,xi(w)];u.push(t.get(b).next(x=>x?pe.resolve():t.put({targetId:0,path:xi(w),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>pe.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:sv});const r=t.store("collectionParents"),s=new dv,u=h=>{if(s.add(h)){const m=h.lastSegment(),w=h.popLast();return r.put({collectionId:m,parent:xi(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(h,m)=>{const w=new en(h);return u(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([h,m,w],b)=>{const x=Ao(m);return u(x.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,s)=>{const u=Na(s),h=rD(this.M,u);return t.put(h)})}Jn(e,t){const r=t.store("remoteDocuments"),s=[];return r.Wt((u,h)=>{const m=t.store("remoteDocumentsV14"),w=(b=h,b.document?new je(en.fromString(b.document.name).popFirst(5)):b.noDocument?je.fromSegments(b.noDocument.path):b.unknownDocument?je.fromSegments(b.unknownDocument.path):st()).path.toArray();var b;const x={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};s.push(m.put(x))}).next(()=>pe.waitFor(s))}}function Ro(n){n.createObjectStore("targetDocuments",{keyPath:tI}).createIndex("documentTargetsIndex",nI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",eI,{unique:!0}),n.createObjectStore("targetGlobal")}const pv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ep{constructor(e,t,r,s,u,h,m,w,b,x,O=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=h,this.document=m,this.Xn=b,this.Zn=x,this.ts=O,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=U=>Promise.resolve(),!ep.vt())throw new Re(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yD(this,s),this.hs=t+"main",this.M=new tD(w),this.ls=new So(this.hs,this.ts,new fv(this.M)),this.fs=new _I(this.referenceDelegate,this.M),this.ds=new yI(this.M),this._s=new hI,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===x&&Hn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ue.FAILED_PRECONDITION,pv);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new hs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,ye.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>mm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Oa(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return La(e).get("owner").next(t=>pe.resolve(this.bs(t)))}Vs(e){return mm(e).delete(this.clientId)}vs(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=cr(r,"clientMetadata");return s.qt().next(u=>{const h=e.Ds(u,18e5),m=u.filter(w=>-1===h.indexOf(w));return pe.forEach(m,w=>s.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?pe.resolve(!0):La(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Re(ue.FAILED_PRECONDITION,pv);return!1}}return!(!this.networkEnabled||!this.inForeground)||mm(e).qt().next(r=>void 0===this.Ds(r,5e3).find(s=>{if(this.clientId!==s.clientId){const h=!this.inForeground&&s.inForeground,m=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||h&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new eD(t,hs.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>mm(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Jf.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new dD(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return dm.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=14===(h=this.ts)?JE:13===h?QE:12===h?lI:11===h?YE:void st();var h;let m;return this.ls.runTransaction(e,s,u,w=>(m=new eD(w,this.es?this.es.next():hs.A),"readwrite-primary"===t?this.Es(m).next(b=>!!b||this.As(m)).next(b=>{if(!b)throw Hn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Re(ue.FAILED_PRECONDITION,ov);return r(m)}).next(b=>this.Ps(m).next(()=>b)):this.$s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}$s(e){return La(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ue.FAILED_PRECONDITION,pv)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return La(e).put("owner",t)}static vt(){return So.vt()}Rs(e){const t=La(e);return t.get("owner").next(r=>this.bs(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):pe.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Hn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Gt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Hn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Hn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function La(n){return cr(n,"owner")}function mm(n){return cr(n,"clientMetadata")}function gv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class wI{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(s=>{for(const u of r)u.applyToLocalView(s);return s})}qs(e,t){e.forEach((r,s)=>{for(const u of t)u.applyToLocalView(s)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return je.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.js(e,t.path):Kg(t)?this.Ws(e,t,r):this.zs(e,t,r);var s}js(e,t){return this.Ls(e,new je(t)).next(r=>{let s=AE();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}Ws(e,t,r){const s=t.collectionGroup;let u=AE();return this.indexManager.getCollectionParents(e,s).next(h=>pe.forEach(h,m=>{const w=(b=t,x=m.child(s),new ra(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,x;return this.zs(e,w,r).next(b=>{b.forEach((x,O)=>{u=u.insert(x,O)})})}).next(()=>u))}zs(e,t,r){let s;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const h of u)for(const m of h.mutations){const w=m.key;let b=s.get(w);null==b&&(b=Tn.newInvalidDocument(w),s=s.insert(w,b)),Xg(m,b,h.localWriteTime),b.isFoundDocument()||(s=s.remove(w))}}).next(()=>(s.forEach((u,h)=>{Qg(t,h)||(s=s.remove(u))}),s))}}class oh{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=s}static Ys(e,t){let r=an(),s=an();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new oh(e,t.fromCache,r,s)}}class tp{Xs(e){this.Zs=e}Qs(e,t,r,s){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(vt.min())?this.ti(e,t):this.Zs.Ks(e,s).next(u=>{const h=this.ei(t,u);return(Nf(t)||cc(t))&&this.ni(t.limitType,h,s,r)?this.ti(e,t):(ky()<=Pr.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Yg(t)),this.Zs.Qs(e,t,uE(r,-1)).next(m=>(h.forEach(w=>{m=m.insert(w.key,w)}),m)))});var u}ei(e,t){let r=new An(Yy(e));return t.forEach((s,u)=>{Qg(e,u)&&(r=r.add(u))}),r}ni(e,t,r,s){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}ti(e,t){return ky()<=Pr.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Yg(t)),this.Zs.Qs(e,t,ta.min())}}class EI{constructor(e,t,r,s){this.persistence=e,this.si=t,this.M=s,this.ii=new Qe(kt),this.ri=new fc(u=>Fu(u),Vd),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new wI(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function DD(n,e,t,r){return new EI(n,e,t,r)}function mv(n,e){return _m.apply(this,arguments)}function _m(){return _m=(0,ye.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.Bs.getAllMutationBatches(r).next(u=>(s=u,t.ai(e),t.Bs.getAllMutationBatches(r))).next(u=>{const h=[],m=[];let w=an();for(const b of s){h.push(b.batchId);for(const x of b.mutations)w=w.add(x.key)}for(const b of u){m.push(b.batchId);for(const x of b.mutations)w=w.add(x.key)}return t.ci.Ks(r,w).next(b=>({hi:b,removedBatchIds:h,addedBatchIds:m}))})})}),_m.apply(this,arguments)}function _v(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.ui.newChangeBuffer({trackRemovals:!0});return function(h,m,w,b){const x=w.batch,O=x.keys();let U=pe.resolve();return O.forEach(K=>{U=U.next(()=>b.getEntry(m,K)).next(le=>{const Oe=w.docVersions.get(K);bt(null!==Oe),le.version.compareTo(Oe)<0&&(x.applyToRemoteDocument(le,w),le.isValidDocument()&&(le.setReadTime(w.commitVersion),b.addEntry(le)))})}),U.next(()=>h.Bs.removeMutationBatch(m,x))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,s))})}function yv(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function DI(n,e){const t=Ze(n),r=e.snapshotVersion;let s=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.ui.newChangeBuffer({trackRemovals:!0});s=t.ii;const m=[];e.targetChanges.forEach((b,x)=>{const O=s.get(x);if(!O)return;m.push(t.fs.removeMatchingKeys(u,b.removedDocuments,x).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,x)));let U=O.withSequenceNumber(u.currentSequenceNumber);var K,le,Oe;e.targetMismatches.has(x)?U=U.withResumeToken(Ir.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):b.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(b.resumeToken,r)),s=s.insert(x,U),le=U,Oe=b,(0===(K=O).resumeToken.approximateByteSize()||le.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=3e8||Oe.addedDocuments.size+Oe.modifiedDocuments.size+Oe.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,U))});let w=Mi();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),m.push(CD(u,h,e.documentUpdates).next(b=>{w=b})),!r.isEqual(vt.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(x=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(b)}return pe.waitFor(m).next(()=>h.apply(u)).next(()=>t.ci.Gs(u,w)).next(()=>w)}).then(u=>(t.ii=s,u))}function CD(n,e,t){let r=an();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=Mi();return t.forEach((h,m)=>{const w=s.get(h);m.isNoDocument()&&m.version.isEqual(vt.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Pe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",m.version)}),u})}function $A(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function qu(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.fs.getTargetData(r,e).next(u=>u?(s=u,pe.resolve(s)):t.fs.allocateTargetId(r).next(h=>(s=new ka(e,h,0,r.currentSequenceNumber),t.fs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.ii.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function Wu(n,e,t){return ym.apply(this,arguments)}function ym(){return ym=(0,ye.Z)(function*(n,e,t){const r=Ze(n),s=r.ii.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,s)))}catch(h){if(!Oa(h))throw h;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.ii=r.ii.remove(e),r.ri.delete(s.target)}),ym.apply(this,arguments)}function ah(n,e,t){const r=Ze(n);let s=vt.min(),u=an();return r.persistence.runTransaction("Execute query","readonly",h=>function(m,w,b){const x=Ze(m),O=x.ri.get(b);return void 0!==O?pe.resolve(x.ii.get(O)):x.fs.getTargetData(w,b)}(r,h,Si(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(h,m.targetId).next(w=>{u=w})}).next(()=>r.si.Qs(h,e,t?s:vt.min(),t?u:an())).next(m=>(ID(r,Ky(e),m),{documents:m,li:u})))}function vm(n,e){const t=Ze(n),r=Ze(t.fs),s=t.ii.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(h=>h?h.target:null))}function bD(n,e){const t=Ze(n),r=t.oi.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.ui.getAllFromCollectionGroup(s,e,uE(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(ID(t,e,s),s))}function ID(n,e,t){let r=vt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.oi.set(e,r)}function vv(){return vv=(0,ye.Z)(function*(n,e,t,r){const s=Ze(n);let u=an(),h=Mi();for(const b of t){const x=e.fi(b.metadata.name);b.document&&(u=u.add(x));const O=e.di(b);O.setReadTime(e._i(b.metadata.readTime)),h=h.insert(x,O)}const m=s.ui.newChangeBuffer({trackRemovals:!0}),w=yield qu(s,(b=r,Si(lc(en.fromString(`__bundle__/docs/${b}`)))));var b;return s.persistence.runTransaction("Apply bundle documents","readwrite",b=>CD(b,m,h).next(x=>(m.apply(b),x)).next(x=>s.fs.removeMatchingKeysForTargetId(b,w.targetId).next(()=>s.fs.addMatchingKeys(b,u,w.targetId)).next(()=>s.ci.Gs(b,x)).next(()=>x)))}),vv.apply(this,arguments)}function TD(n,e){return np.apply(this,arguments)}function np(){return np=(0,ye.Z)(function*(n,e,t=an()){const r=yield qu(n,Si(iD(e.bundledQuery))),s=Ze(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const h=Br(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return s._s.saveNamedQuery(u,e);const m=r.withResumeToken(Ir.EMPTY_BYTE_STRING,h);return s.ii=s.ii.insert(m.targetId,m),s.fs.updateTargetData(u,m).next(()=>s.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.fs.addMatchingKeys(u,t,r.targetId)).next(()=>s._s.saveNamedQuery(u,e))})}),np.apply(this,arguments)}class AD{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return pe.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:Br(r.createTime)}),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:iD(r.bundledQuery),readTime:Br(r.readTime)}),pe.resolve();var r}}class SD{constructor(){this.overlays=new Qe(je.comparator),this.gi=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.Xt(e,t,u)}),pe.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.gi.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.gi.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const s=Wd(),u=t.length+1,h=new je(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&s.set(w.getKey(),w)}return pe.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Qe((b,x)=>b-x);const h=this.overlays.getIterator();for(;h.hasNext();){const b=h.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let x=u.get(b.largestBatchId);null===x&&(x=Wd(),u=u.insert(b.largestBatchId,x)),x.set(b.getKey(),b)}}const m=Wd(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,x)=>m.set(b,x)),!(m.size()>=s)););return pe.resolve(m)}Xt(e,t,r){if(null===r)return;const s=this.overlays.get(r.key);if(null!==s){const h=this.gi.get(s.largestBatchId).delete(r.key);this.gi.set(s.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new cv(t,r));let u=this.gi.get(t);void 0===u&&(u=an(),this.gi.set(t,u)),this.gi.set(t,u.add(r.key))}}class wm{constructor(){this.yi=new An(Tr.pi),this.Ii=new An(Tr.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new Tr(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new Tr(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new je(new en([])),r=new Tr(t,e),s=new Tr(t,e+1),u=[];return this.Ii.forEachInRange([r,s],h=>{this.Ai(h),u.push(h.key)}),u}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new je(new en([])),r=new Tr(t,e),s=new Tr(t,e+1);let u=an();return this.Ii.forEachInRange([r,s],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new Tr(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Tr{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return je.comparator(e.key,t.key)||kt(e.vi,t.vi)}static Ti(e,t){return kt(e.vi,t.vi)||je.comparator(e.key,t.key)}}class bI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new An(Tr.pi)}checkEmpty(e){return pe.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,s){const u=this.Si;this.Si++;const h=new lv(u,t,r,s);this.Bs.push(h);for(const m of s)this.Di=this.Di.add(new Tr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return pe.resolve(h)}lookupMutationBatch(e,t){return pe.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.xi(t+1),u=s<0?0:s;return pe.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return pe.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Tr(t,0),s=new Tr(t,Number.POSITIVE_INFINITY),u=[];return this.Di.forEachInRange([r,s],h=>{const m=this.Ci(h.vi);u.push(m)}),pe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(kt);return t.forEach(s=>{const u=new Tr(s,0),h=new Tr(s,Number.POSITIVE_INFINITY);this.Di.forEachInRange([u,h],m=>{r=r.add(m.vi)})}),pe.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;je.isDocumentKey(u)||(u=u.child(""));const h=new Tr(new je(u),0);let m=new An(kt);return this.Di.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===s&&(m=m.add(w.vi)),!0)},h),pe.resolve(this.Ni(m))}Ni(e){const t=[];return e.forEach(r=>{const s=this.Ci(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){bt(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return pe.forEach(t.mutations,s=>{const u=new Tr(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new Tr(t,0),s=this.Di.firstAfterOrEqual(r);return pe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return pe.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class MD{constructor(e){this.Mi=e,this.docs=new Qe(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,h=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=Mi();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Tn.newInvalidDocument(s))}),pe.resolve(r)}getAllFromCollection(e,t,r){let s=Mi();const u=new je(t.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:w}}=h.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Ld(lE(w),r)<=0||(s=s.insert(w.key,w.mutableCopy()))}return pe.resolve(s)}getAllFromCollectionGroup(e,t,r,s){st()}Oi(e,t){return pe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new xD(this)}getSize(e){return pe.resolve(this.size)}}class xD extends vD{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Kn.addEntry(e,s)):this.Kn.removeEntry(r)}),pe.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class II{constructor(e){this.persistence=e,this.Fi=new fc(t=>Fu(t),Vd),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new wm,this.targetCount=0,this.Li=_c.gn()}forEachTarget(e,t){return this.Fi.forEach((r,s)=>t(s)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),pe.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new _c(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Tn(t),pe.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Fi.forEach((h,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Fi.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),pe.waitFor(u).next(()=>s)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(h=>{u.push(s.markPotentiallyOrphaned(e,h))}),pe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this.Bi.containsKey(t))}}class RD{constructor(e,t){this.Ui={},this.overlays={},this.es=new hs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new II(this),this.indexManager=new pI,this.ds=new MD(r=>this.referenceDelegate.qi(r)),this.M=new tD(t),this._s=new AD(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new bI(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const s=new TI(this.es.next());return this.referenceDelegate.Ki(),r(s).next(u=>this.referenceDelegate.Gi(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Qi(e,t){return pe.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class TI extends XE{constructor(e){super(),this.currentSequenceNumber=e}}class Xr{constructor(e){this.persistence=e,this.ji=new wm,this.Wi=null}static zi(e){return new Xr(e)}get Hi(){if(this.Wi)return this.Wi;throw st()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(s=>this.Hi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Hi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.Hi,r=>{const s=je.fromPath(r);return this.Ji(e,s).next(u=>{u||t.removeEntry(s,vt.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return pe.or([()=>pe.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function Ec(n,e){return`firestore_clients_${n}_${e}`}function OD(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function wv(n,e){return`firestore_targets_${n}_${e}`}class Ev{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Yi(e,t,r){const s=JSON.parse(r);let u,h="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return h&&s.error&&(h="string"==typeof s.error.message&&"string"==typeof s.error.code,h&&(u=new Re(s.error.code,s.error.message))),h?new Ev(e,t,s.state,u):(Hn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Va{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Re(r.error.code,r.error.message))),u?new Va(e,r.state,s):(Hn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Em{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=Bf();for(let h=0;s&&h<r.activeTargetIds.length;++h)s=Vy(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return s?new Em(e,u):(Hn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class rp{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new rp(t.clientId,t.onlineState):(Hn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Dv{constructor(){this.activeTargetIds=Bf()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dm{constructor(e,t,r,s,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Qe(kt),this.started=!1,this.rr=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ur=Ec(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new Dv),this.cr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Fs();for(const s of t){if(s===e.er)continue;const u=e.getItem(Ec(e.persistenceKey,s));if(u){const h=Em.Yi(s,u);h&&(e.ir=e.ir.insert(h.clientId,h))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const s=e.mr(r);s&&e.gr(s)}for(const s of e.rr)e.sr(s);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(wv(this.persistenceKey,e));if(r){const s=Va.Yi(e,r);s&&(t=s.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(wv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Ir(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Hn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const s=t.Pr(r.key);return t.br(s,null)}{const s=t.Vr(r.key,r.newValue);if(s)return t.br(s.clientId,s)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const s=t.vr(r.key,r.newValue);if(s)return t.Sr(s)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(r.key===t.dr){if(null!==r.newValue){const s=t.mr(r.newValue);if(s)return t.gr(s)}}else if(r.key===t.ar){const s=function(u){let h=hs.A;if(null!=u)try{const m=JSON.parse(u);bt("number"==typeof m),h=m}catch(m){Hn("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(r.newValue);s!==hs.A&&t.sequenceNumberHandler(s)}else if(r.key===t._r){const s=t.Nr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.kr(u)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const s=new Ev(this.currentUser,e,t,r),u=OD(this.persistenceKey,this.currentUser,e);this.setItem(u,s.Xi())}Ir(e){const t=OD(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const s=wv(this.persistenceKey,e),u=new Va(e,t,r);this.setItem(s,u.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return Em.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),s=Number(r[1]);return Ev.Yi(new Yr(void 0!==r[2]?r[2]:null),s,t)}Dr(e,t){const r=this.lr.exec(e),s=Number(r[1]);return Va.Yi(s,t)}mr(e){return rp.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),s=this.yr(this.ir),u=this.yr(r),h=[],m=[];return u.forEach(w=>{s.has(w)||h.push(w)}),s.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Fr(h,m).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=Bf();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class kD{constructor(){this.$r=new Dv,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new Dv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class AI{Lr(e){}shutdown(){}}class Cm{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ND={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class PD{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class bm extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,s,u){const h=this.uo(e,t);Pe("RestConnection","Sending: ",h,r);const m={};return this.ao(m,s,u),this.co(e,h,m,r).then(w=>(Pe("RestConnection","Received: ",w),w),w=>{throw rc("RestConnection",`${e} failed with error: `,w,"url: ",h,"request:",r),w})}ho(e,t,r,s,u){return this.oo(e,t,r,s,u)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+nc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}uo(e,t){return`${this.io}/v1/${t}:${ND[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,s){return new Promise((u,h)=>{const m=new Rb;m.listenOnce(K0.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case xy.NO_ERROR:const b=m.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(b)),u(b);break;case xy.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),h(new Re(ue.DEADLINE_EXCEEDED,"Request time out"));break;case xy.HTTP_ERROR:const x=m.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',x,"response text:",m.getResponseText()),x>0){const O=m.getResponseJson().error;if(O&&O.status&&O.message){const U=function(K){const le=K.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(le)>=0?le:ue.UNKNOWN}(O.status);h(new Re(U,O.message))}else h(new Re(ue.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Re(ue.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(s);m.send(t,"POST",w,r,15)})}lo(e,t,r){const s=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=W0(),h=Z0(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new Y0({})),this.ao(m.initMessageHeaders,t,r),(0,Gt.uI)()||(0,Gt.b$)()||(0,Gt.d)()||(0,Gt.w1)()||(0,Gt.Mn)()||(0,Gt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=s.join("");Pe("Connection","Creating WebChannel: "+w,m);const b=u.createWebChannel(w,m);let x=!1,O=!1;const U=new PD({Wr:le=>{O?Pe("Connection","Not sending because WebChannel is closed:",le):(x||(Pe("Connection","Opening WebChannel transport."),b.open(),x=!0),Pe("Connection","WebChannel sending:",le),b.send(le))},zr:()=>b.close()}),K=(le,Oe,qe)=>{le.listen(Oe,Ut=>{try{qe(Ut)}catch(Kt){setTimeout(()=>{throw Kt},0)}})};return K(b,Ug.EventType.OPEN,()=>{O||Pe("Connection","WebChannel transport opened.")}),K(b,Ug.EventType.CLOSE,()=>{O||(O=!0,Pe("Connection","WebChannel transport closed"),U.no())}),K(b,Ug.EventType.ERROR,le=>{O||(O=!0,rc("Connection","WebChannel transport errored:",le),U.no(new Re(ue.UNAVAILABLE,"The operation could not be completed")))}),K(b,Ug.EventType.MESSAGE,le=>{var Oe;if(!O){const qe=le.data[0];bt(!!qe);const Ut=qe,Kt=Ut.error||(null===(Oe=Ut[0])||void 0===Oe?void 0:Oe.error);if(Kt){Pe("Connection","WebChannel received error:",Kt);const Jt=Kt.status;let Ft=function(hn){const qi=zn[hn];if(void 0!==qi)return tv(qi)}(Jt),Yt=Kt.message;void 0===Ft&&(Ft=ue.INTERNAL,Yt="Unknown error status: "+Jt+" with message "+Kt.message),O=!0,U.no(new Re(Ft,Yt)),b.close()}else Pe("Connection","WebChannel received:",qe),U.so(qe)}}),K(h,xb.STAT_EVENT,le=>{le.stat===Ry.PROXY?Pe("Connection","Detected buffering proxy"):le.stat===Ry.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{U.eo()},0),U}}function Im(){return"undefined"!=typeof window?window:null}function Cv(){return"undefined"!=typeof document?document:null}function uh(n){return new NE(n,!0)}class bv{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=s,this.wo=u,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),s=Math.max(0,t-r);s>0&&Pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,s,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class Iv{constructor(e,t,r,s,u,h,m,w){this.Yn=e,this.Ro=r,this.Po=s,this.bo=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new bv(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,ye.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,ye.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Hn(t.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Vo===t&&this.qo(r,s)},r=>{e(()=>{const s=new Re(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(s)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(s=>{r(()=>this.Ko(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}No(){var e=this;this.state=5,this.Do.To((0,ye.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Tm extends Iv{constructor(e,t,r,s,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,h),this.M=u}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function jA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:st(),s=e.targetChange.targetIds||[],u=function(w,b){return w.N?(bt(void 0===b||"string"==typeof b),Ir.fromBase64String(b||"")):(bt(void 0===b||b instanceof Uint8Array),Ir.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(w){const b=void 0===w.code?ue.UNKNOWN:tv(w.code);return new Re(b,w.message||"")}(h);t=new Kd(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=To(n,r.document.name),u=Br(r.document.updateTime),h=new fi({mapValue:{fields:r.document.fields}}),m=Tn.newFoundDocument(s,u,h);t=new nm(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,s=To(n,r.document),u=r.readTime?Br(r.readTime):vt.min(),h=Tn.newNoDocument(s,u);t=new nm([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,s=To(n,r.document);t=new nm([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return st();{const r=e.filter,u=new UA(r.count||0);t=new ME(r.targetId,u)}}var w;return t}(this.M,e),r=function(s){if(!("targetChange"in s))return vt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?Br(u.readTime):vt.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=Jd(this.M),t.addTarget=function(s,u){let h;const m=u.target;return h=Gy(m)?{documents:UE(s,m)}:{query:BE(s,m)},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?h.resumeToken=Yd(s,u.resumeToken):u.snapshotVersion.compareTo(vt.min())>0&&(h.readTime=$f(s,u.snapshotVersion.toTimestamp())),h}(this.M,e);const r=function zf(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Jd(this.M),t.removeTarget=e,this.Fo(t)}}class FD extends Iv{constructor(e,t,r,s,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,h),this.M=u,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function om(n,e){return n&&n.length>0?(bt(void 0!==e),n.map(t=>function(r,s){let u=Br(r.updateTime?r.updateTime:s);return u.isEqual(vt.min())&&(u=Br(s)),new Gb(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Br(e.commitTime);return this.listener.Yo(r,t)}return bt(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Jd(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>im(this.M,r))};this.Fo(t)}}class SI extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=s,this.tu=!1}eu(){if(this.tu)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.bo.oo(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(ue.UNKNOWN,s.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.bo.ho(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(ue.UNKNOWN,s.toString())})}terminate(){this.tu=!0}}class Tv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Hn(t),this.iu=!1):Pe("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class Av{constructor(e,t,r,s,u){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=u,this._u.Lr(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var w;Ua(h)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ye.Z)(function*(b){const x=Ze(b);x.fu.add(4),yield lh(x),x.wu.set("Unknown"),x.fu.delete(4),yield Am(x)}),function(b){return w.apply(this,arguments)})(h))}))}),this.wu=new Tv(r,s)}}function Am(n){return Sv.apply(this,arguments)}function Sv(){return Sv=(0,ye.Z)(function*(n){if(Ua(n))for(const e of n.du)yield e(!0)}),Sv.apply(this,arguments)}function lh(n){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,ye.Z)(function*(n){for(const e of n.du)yield e(!1)}),Sm.apply(this,arguments)}function ip(n,e){const t=Ze(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),Rv(t)?xv(t):ap(t).xo()&&Mm(t,e))}function sp(n,e){const t=Ze(n),r=ap(t);t.lu.delete(e),r.xo()&&Mv(t,e),0===t.lu.size&&(r.xo()?r.Mo():Ua(t)&&t.wu.set("Unknown"))}function Mm(n,e){n.mu.Z(e.targetId),ap(n).jo(e)}function Mv(n,e){n.mu.Z(e),ap(n).Wo(e)}function xv(n){n.mu=new Wb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),ap(n).start(),n.wu.ru()}function Rv(n){return Ua(n)&&!ap(n).Co()&&n.lu.size>0}function Ua(n){return 0===Ze(n).fu.size}function LD(n){n.mu=void 0}function VD(n){return xm.apply(this,arguments)}function xm(){return xm=(0,ye.Z)(function*(n){n.lu.forEach((e,t)=>{Mm(n,e)})}),xm.apply(this,arguments)}function UD(n,e){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,ye.Z)(function*(n,e){LD(n),Rv(n)?(n.wu.au(e),xv(n)):n.wu.set("Unknown")}),Rm.apply(this,arguments)}function MI(n,e,t){return Ov.apply(this,arguments)}function Ov(){return Ov=(0,ye.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof Kd&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(s,u){const h=u.cause;for(const m of u.targetIds)s.lu.has(m)&&(yield s.remoteSyncer.rejectListen(m,h),s.lu.delete(m),s.mu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield kv(n,r)}else if(e instanceof nm?n.mu.ut(e):e instanceof ME?n.mu._t(e):n.mu.ht(e),!t.isEqual(vt.min()))try{const r=yield yv(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const h=s.mu.yt(u);return h.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=s.lu.get(w);b&&s.lu.set(w,b.withResumeToken(m.resumeToken,u))}}),h.targetMismatches.forEach(m=>{const w=s.lu.get(m);if(!w)return;s.lu.set(m,w.withResumeToken(Ir.EMPTY_BYTE_STRING,w.snapshotVersion)),Mv(s,m);const b=new ka(w.target,m,1,w.sequenceNumber);Mm(s,b)}),s.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield kv(n,r)}var r}),Ov.apply(this,arguments)}function kv(n,e,t){return Om.apply(this,arguments)}function Om(){return Om=(0,ye.Z)(function*(n,e,t){if(!Oa(e))throw e;n.fu.add(1),yield lh(n),n.wu.set("Offline"),t||(t=()=>yv(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield Am(n)}))}),Om.apply(this,arguments)}function xI(n,e){return e().catch(t=>kv(n,t,e))}function op(n){return BD.apply(this,arguments)}function BD(){return BD=(0,ye.Z)(function*(n){const e=Ze(n),t=Zu(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;GA(e);)try{const s=yield $A(e.localStore,r);if(null===s){0===e.hu.length&&t.Mo();break}r=s.batchId,zA(e,s)}catch(s){yield kv(e,s)}RI(e)&&OI(e)}),BD.apply(this,arguments)}function GA(n){return Ua(n)&&n.hu.length<10}function zA(n,e){n.hu.push(e);const t=Zu(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function RI(n){return Ua(n)&&!Zu(n).Co()&&n.hu.length>0}function OI(n){Zu(n).start()}function qA(n){return ch.apply(this,arguments)}function ch(){return ch=(0,ye.Z)(function*(n){Zu(n).Zo()}),ch.apply(this,arguments)}function WA(n){return km.apply(this,arguments)}function km(){return km=(0,ye.Z)(function*(n){const e=Zu(n);for(const t of n.hu)e.Jo(t.mutations)}),km.apply(this,arguments)}function Nv(n,e,t){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,ye.Z)(function*(n,e,t){const r=n.hu.shift(),s=um.from(r,e,t);yield xI(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield op(n)}),Nm.apply(this,arguments)}function jD(n,e){return HD.apply(this,arguments)}function HD(){return HD=(0,ye.Z)(function*(n,e){var t;e&&Zu(n).Ho&&(yield(t=(0,ye.Z)(function*(r,s){if(ev(u=s.code)&&u!==ue.ABORTED){const h=r.hu.shift();Zu(r).ko(),yield xI(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,s)),yield op(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),RI(n)&&OI(n)}),HD.apply(this,arguments)}function Pm(n,e){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,ye.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Ua(t);t.fu.add(3),yield lh(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Am(t)}),Fm.apply(this,arguments)}function Pv(n,e){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,ye.Z)(function*(n,e){const t=Ze(n);e?(t.fu.delete(2),yield Am(t)):e||(t.fu.add(2),yield lh(t),t.wu.set("Unknown"))}),Lm.apply(this,arguments)}function ap(n){return n.gu||(n.gu=function(e,t,r){const s=Ze(e);return s.eu(),new Tm(t,s.bo,s.authCredentials,s.appCheckCredentials,s.M,r)}(n.datastore,n.asyncQueue,{Hr:VD.bind(null,n),Yr:UD.bind(null,n),Qo:MI.bind(null,n)}),n.du.push(function(){var e=(0,ye.Z)(function*(t){t?(n.gu.ko(),Rv(n)?xv(n):n.wu.set("Unknown")):(yield n.gu.stop(),LD(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function Zu(n){return n.yu||(n.yu=function(e,t,r){const s=Ze(e);return s.eu(),new FD(t,s.bo,s.authCredentials,s.appCheckCredentials,s.M,r)}(n.datastore,n.asyncQueue,{Hr:qA.bind(null,n),Yr:jD.bind(null,n),Xo:WA.bind(null,n),Yo:Nv.bind(null,n)}),n.du.push(function(){var e=(0,ye.Z)(function*(t){t?(n.yu.ko(),yield op(n)):(yield n.yu.stop(),n.hu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class Fv{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,s,u){const h=Date.now()+r,m=new Fv(e,t,h,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ku(n,e){if(Hn("AsyncQueue",`${e}: ${n}`),Oa(n))return new Re(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class dh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=AE(),this.sortedSet=new Qe(this.comparator)}static emptySet(e){return new dh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new dh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class kI{constructor(){this.pu=new Qe(je.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):st():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class up{constructor(e,t,r,s,u,h,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,s){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new up(e,t,dh.emptySet(t),u,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class ZA{constructor(){this.Tu=void 0,this.listeners=[]}}class NI{constructor(){this.queries=new fc(e=>Zy(e),Hd),this.onlineState="Unknown",this.Eu=new Set}}function Lv(n,e){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,ye.Z)(function*(n,e){const t=Ze(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new ZA),s)try{u.Tu=yield t.onListen(r)}catch(h){const m=Ku(h,`Initialization of query '${Yg(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Au(t.onlineState),u.Tu&&e.Ru(u.Tu)&&fs(t)}),Vv.apply(this,arguments)}function $D(n,e){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,ye.Z)(function*(n,e){const t=Ze(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const h=u.listeners.indexOf(e);h>=0&&(u.listeners.splice(h,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),Uv.apply(this,arguments)}function Bv(n,e){const t=Ze(n);let r=!1;for(const s of e){const h=t.queries.get(s.query);if(h){for(const m of h.listeners)m.Ru(s)&&(r=!0);h.Tu=s}}r&&fs(t)}function PI(n,e,t){const r=Ze(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function fs(n){n.Eu.forEach(e=>{e.next()})}class jv{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new up(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=up.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class Hv{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class GD{constructor(e){this.M=e}fi(e){return To(this.M,e)}di(e){return e.metadata.exists?Zb(this.M,e.document,!1):Tn.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Br(e)}}class FI{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Vm(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=en.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new GD(this.M);for(const s of e)if(s.metadata.queries){const u=r.fi(s.metadata.name);for(const h of s.metadata.queries){const m=(t.get(h)||an()).add(u);t.set(h,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function CI(n,e,t,r){return vv.apply(this,arguments)}(e.localStore,new GD(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const s of e.queries)yield TD(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function Vm(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class $v{constructor(e){this.key=e}}class Gv{constructor(e){this.key=e}}class zD{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=an(),this.mutatedKeys=an(),this.Uu=Yy(e),this.qu=new dh(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new kI,s=t?t.qu:this.qu;let u=t?t.mutatedKeys:this.mutatedKeys,h=s,m=!1;const w=Nf(this.query)&&s.size===this.query.limit?s.last():null,b=cc(this.query)&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((x,O)=>{const U=s.get(x),K=Qg(this.query,O)?O:null,le=!!U&&this.mutatedKeys.has(U.key),Oe=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let qe=!1;U&&K?U.data.isEqual(K.data)?le!==Oe&&(r.track({type:3,doc:K}),qe=!0):this.ju(U,K)||(r.track({type:2,doc:K}),qe=!0,(w&&this.Uu(K,w)>0||b&&this.Uu(K,b)<0)&&(m=!0)):!U&&K?(r.track({type:0,doc:K}),qe=!0):U&&!K&&(r.track({type:1,doc:U}),qe=!0,(w||b)&&(m=!0)),qe&&(K?(h=h.add(K),u=Oe?u.add(x):u.delete(x)):(h=h.delete(x),u=u.delete(x)))}),Nf(this.query)||cc(this.query))for(;h.size>this.query.limit;){const x=Nf(this.query)?h.last():h.first();h=h.delete(x.key),u=u.delete(x.key),r.track({type:1,doc:x})}return{qu:h,Qu:r,ni:m,mutatedKeys:u}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const u=e.Qu.Iu();u.sort((b,x)=>function(O,U){const K=le=>{switch(le){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return K(O)-K(U)}(b.type,x.type)||this.Uu(b.doc,x.doc)),this.Wu(r);const h=t?this.zu():[],m=0===this.Lu.size&&this.current?1:0,w=m!==this.Bu;return this.Bu=m,0!==u.length||w?{snapshot:new up(this.query,e.qu,s,u,e.mutatedKeys,0===m,w,!1),Hu:h}:{Hu:h}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new kI,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=an(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new Gv(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new $v(r))}),t}Yu(e){this.$u=e.li,this.Lu=an();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return up.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class qD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class LI{constructor(e){this.key=e,this.Zu=!1}}class VI{constructor(e,t,r,s,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.ta={},this.ea=new fc(m=>Zy(m),Hd),this.na=new Map,this.sa=new Set,this.ia=new Qe(je.comparator),this.ra=new Map,this.oa=new wm,this.ua={},this.aa=new Map,this.ca=_c.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function UI(n,e){return lp.apply(this,arguments)}function lp(){return lp=(0,ye.Z)(function*(n,e){const t=nw(n);let r,s;const u=t.ea.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.Xu();else{const h=yield qu(t.localStore,Si(e));t.isPrimaryClient&&ip(t.remoteStore,h);const m=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,s=yield Ba(t,e,r,"current"===m)}return s}),lp.apply(this,arguments)}function Ba(n,e,t,r){return Um.apply(this,arguments)}function Um(){return Um=(0,ye.Z)(function*(n,e,t,r){n.la=(x,O,U)=>{return(K=(0,ye.Z)(function*(le,Oe,qe,Ut){let Kt=Oe.view.Gu(qe);Kt.ni&&(Kt=yield ah(le.localStore,Oe.query,!1).then(({documents:Yt})=>Oe.view.Gu(Yt,Kt)));const Jt=Ut&&Ut.targetChanges.get(Oe.targetId),Ft=Oe.view.applyChanges(Kt,le.isPrimaryClient,Jt);return jm(le,Oe.targetId,Ft.Hu),Ft.snapshot}),function(le,Oe,qe,Ut){return K.apply(this,arguments)})(n,x,O,U);var K};const s=yield ah(n.localStore,e,!0),u=new zD(e,s.li),h=u.Gu(s.documents),m=jf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(h,n.isPrimaryClient,m);jm(n,t,w.Hu);const b=new qD(e,t,u);return n.ea.set(e,b),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),w.snapshot}),Um.apply(this,arguments)}function WD(n,e){return zv.apply(this,arguments)}function zv(){return zv=(0,ye.Z)(function*(n,e){const t=Ze(n),r=t.ea.get(e),s=t.na.get(r.targetId);if(s.length>1)return t.na.set(r.targetId,s.filter(u=>!Hd(u,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Wu(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),sp(t.remoteStore,r.targetId),Dc(t,r.targetId)}).catch(yc))):(Dc(t,r.targetId),yield Wu(t.localStore,r.targetId,!0))}),zv.apply(this,arguments)}function qv(){return qv=(0,ye.Z)(function*(n,e,t){const r=gp(n);try{const s=yield function(u,h){const m=Ze(u),w=$n.now(),b=h.reduce((O,U)=>O.add(U.key),an());let x;return m.persistence.runTransaction("Locally write mutations","readwrite",O=>m.ci.Ks(O,b).next(U=>{x=U;const K=[];for(const le of h){const Oe=IE(le,x.get(le.key));null!=Oe&&K.push(new Uu(le.key,Oe,$y(Oe.value.mapValue),tr.exists(!0)))}return m.Bs.addMutationBatch(O,w,K,h)})).then(O=>(O.applyToLocalDocumentSet(x),{batchId:O.batchId,changes:x}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,h,m){let w=u.ua[u.currentUser.toKey()];w||(w=new Qe(kt)),w=w.insert(h,m),u.ua[u.currentUser.toKey()]=w}(r,s.batchId,t),yield ja(r,s.changes),yield op(r.remoteStore)}catch(s){const u=Ku(s,"Failed to persist write");t.reject(u)}}),qv.apply(this,arguments)}function ZD(n,e){return Wv.apply(this,arguments)}function Wv(){return Wv=(0,ye.Z)(function*(n,e){const t=Ze(n);try{const r=yield DI(t.localStore,e);e.targetChanges.forEach((s,u)=>{const h=t.ra.get(u);h&&(bt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?h.Zu=!0:s.modifiedDocuments.size>0?bt(h.Zu):s.removedDocuments.size>0&&(bt(h.Zu),h.Zu=!1))}),yield ja(t,r,e)}catch(r){yield yc(r)}}),Wv.apply(this,arguments)}function Zv(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ea.forEach((u,h)=>{const m=h.view.Au(e);m.snapshot&&s.push(m.snapshot)}),function(u,h){const m=Ze(u);m.onlineState=h;let w=!1;m.queries.forEach((b,x)=>{for(const O of x.listeners)O.Au(h)&&(w=!0)}),w&&fs(m)}(r.eventManager,e),s.length&&r.ta.Qo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function BI(n,e,t){return Kv.apply(this,arguments)}function Kv(){return Kv=(0,ye.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.ra.get(e),u=s&&s.key;if(u){let h=new Qe(je.comparator);h=h.insert(u,Tn.newNoDocument(u,vt.min()));const m=an().add(u),w=new Zd(vt.min(),new Map,new An(kt),h,m);yield ZD(r,w),r.ia=r.ia.remove(u),r.ra.delete(e),Qv(r)}else yield Wu(r.localStore,e,!1).then(()=>Dc(r,e,t)).catch(yc)}),Kv.apply(this,arguments)}function YA(n,e){return cp.apply(this,arguments)}function cp(){return cp=(0,ye.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const s=yield _v(t.localStore,e);hp(t,r,null),dp(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ja(t,s)}catch(s){yield yc(s)}}),cp.apply(this,arguments)}function KD(n,e,t){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,ye.Z)(function*(n,e,t){const r=Ze(n);try{const s=yield function(u,h){const m=Ze(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.Bs.lookupMutationBatch(w,h).next(x=>(bt(null!==x),b=x.keys(),m.Bs.removeMutationBatch(w,x))).next(()=>m.Bs.performConsistencyCheck(w)).next(()=>m.ci.Ks(w,b))})}(r.localStore,e);hp(r,e,t),dp(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ja(r,s)}catch(s){yield yc(s)}}),Yv.apply(this,arguments)}function Bm(){return Bm=(0,ye.Z)(function*(n,e){const t=Ze(n);Ua(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const h=Ze(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.aa.get(r)||[];s.push(e),t.aa.set(r,s)}catch(r){const s=Ku(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),Bm.apply(this,arguments)}function dp(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function hp(n,e,t){const r=Ze(n);let s=r.ua[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.ua[r.currentUser.toKey()]=s}}function Dc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||YD(n,r)})}function YD(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(sp(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),Qv(n))}function jm(n,e,t){for(const r of t)r instanceof $v?(n.oa.addReference(r.key,e),QD(n,r)):r instanceof Gv?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||YD(n,r.key)):st()}function QD(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.sa.add(r),Qv(n))}function Qv(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new je(en.fromString(e)),r=n.ca.next();n.ra.set(r,new LI(t)),n.ia=n.ia.insert(t,r),ip(n.remoteStore,new ka(Si(lc(t.path)),r,2,hs.A))}}function ja(n,e,t){return JD.apply(this,arguments)}function JD(){return JD=(0,ye.Z)(function*(n,e,t){const r=Ze(n),s=[],u=[],h=[];var m;r.ea.isEmpty()||(r.ea.forEach((m,w)=>{h.push(r.la(w,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b.fromCache?"not-current":"current"),s.push(b);const x=oh.Ys(w.targetId,b);u.push(x)}}))}),yield Promise.all(h),r.ta.Qo(s),yield(m=(0,ye.Z)(function*(w,b){const x=Ze(w);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>pe.forEach(b,U=>pe.forEach(U.Hs,K=>x.persistence.referenceDelegate.addReference(O,U.targetId,K)).next(()=>pe.forEach(U.Js,K=>x.persistence.referenceDelegate.removeReference(O,U.targetId,K)))))}catch(O){if(!Oa(O))throw O;Pe("LocalStore","Failed to update sequence numbers: "+O)}for(const O of b){const U=O.targetId;if(!O.fromCache){const K=x.ii.get(U),Oe=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);x.ii=x.ii.insert(U,Oe)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),JD.apply(this,arguments)}function QA(n,e){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,ye.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield mv(t.localStore,e);t.currentUser=e,(s=t).aa.forEach(h=>{h.forEach(m=>{m.reject(new Re(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ja(t,r.hi)}var s}),Hm.apply(this,arguments)}function HI(n,e){const t=Ze(n),r=t.ra.get(e);if(r&&r.Zu)return an().add(r.key);{let s=an();const u=t.na.get(e);if(!u)return s;for(const h of u){const m=t.ea.get(h);s=s.unionWith(m.view.Ku)}return s}}function $I(n,e){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,ye.Z)(function*(n,e){const t=Ze(n),r=yield ah(t.localStore,e.query,!0),s=e.view.Yu(r);return t.isPrimaryClient&&jm(t,e.targetId,s.Hu),s}),Jv.apply(this,arguments)}function JA(n,e){return XD.apply(this,arguments)}function XD(){return XD=(0,ye.Z)(function*(n,e){const t=Ze(n);return bD(t.localStore,e).then(r=>ja(t,r))}),XD.apply(this,arguments)}function XA(n,e,t,r){return eC.apply(this,arguments)}function eC(){return eC=(0,ye.Z)(function*(n,e,t,r){const s=Ze(n),u=yield function(h,m){const w=Ze(h),b=Ze(w.Bs);return w.persistence.runTransaction("Lookup mutation documents","readonly",x=>b.fn(x,m).next(O=>O?w.ci.Ks(x,O):pe.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield op(s.remoteStore):"acknowledged"===t||"rejected"===t?(hp(s,e,r||null),dp(s,e),m=e,Ze(Ze(s.localStore).Bs)._n(m)):st(),yield ja(s,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),eC.apply(this,arguments)}function Xv(){return Xv=(0,ye.Z)(function*(n,e){const t=Ze(n);if(nw(t),gp(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield fp(t,r.toArray());t.ha=!0,yield Pv(t.remoteStore,!0);for(const u of s)ip(t.remoteStore,u)}else if(!1===e&&!1!==t.ha){const r=[];let s=Promise.resolve();t.na.forEach((u,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):s=s.then(()=>(Dc(t,h),Wu(t.localStore,h,!0))),sp(t.remoteStore,h)}),yield s,yield fp(t,r),function(u){const h=Ze(u);h.ra.forEach((m,w)=>{sp(h.remoteStore,w)}),h.oa.bi(),h.ra=new Map,h.ia=new Qe(je.comparator)}(t),t.ha=!1,yield Pv(t.remoteStore,!1)}}),Xv.apply(this,arguments)}function fp(n,e,t){return ew.apply(this,arguments)}function ew(){return ew=(0,ye.Z)(function*(n,e,t){const r=Ze(n),s=[],u=[];for(const h of e){let m;const w=r.na.get(h);if(w&&0!==w.length){m=yield qu(r.localStore,Si(w[0]));for(const b of w){const x=r.ea.get(b),O=yield $I(r,x);O.snapshot&&u.push(O.snapshot)}}else{const b=yield vm(r.localStore,h);m=yield qu(r.localStore,b),yield Ba(r,tC(b),h,!1)}s.push(m)}return r.ta.Qo(u),s}),ew.apply(this,arguments)}function tC(n){return pE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function nC(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Fs()}function Cc(n,e,t,r){return $m.apply(this,arguments)}function $m(){return $m=(0,ye.Z)(function*(n,e,t,r){const s=Ze(n);if(s.ha)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=s.na.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const h=yield bD(s.localStore,Ky(u[0])),m=Zd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ja(s,h,m);break}case"rejected":yield Wu(s.localStore,e,!0),Dc(s,e,r);break;default:st()}}),$m.apply(this,arguments)}function tw(n,e,t){return pp.apply(this,arguments)}function pp(){return pp=(0,ye.Z)(function*(n,e,t){const r=nw(n);if(r.ha){for(const s of e){if(r.na.has(s)){Pe("SyncEngine","Adding an already active target "+s);continue}const u=yield vm(r.localStore,s),h=yield qu(r.localStore,u);yield Ba(r,tC(u),h.targetId,!1),ip(r.remoteStore,h)}for(const s of t)r.na.has(s)&&(yield Wu(r.localStore,s,!1).then(()=>{sp(r.remoteStore,s),Dc(r,s)}).catch(yc))}}),pp.apply(this,arguments)}function nw(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BI.bind(null,e),e.ta.Qo=Bv.bind(null,e.eventManager),e.ta.fa=PI.bind(null,e.eventManager),e}function gp(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KD.bind(null,e),e}class mp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.M=uh(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return DD(this.persistence,new tp,e.initialUser,this.M)}wa(e){return new RD(Xr.zi,this.M)}_a(e){return new kD}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class GI extends mp{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield gp(r.ya.syncEngine),yield op(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return DD(this.persistence,new tp,e.initialUser,this.M)}ma(e){return new mD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=gv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ri.withCacheSize(this.cacheSizeBytes):Ri.DEFAULT;return new ep(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Im(),Cv(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new kD}}class tS extends GI{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const s=r.ya.syncEngine;r.sharedClientState instanceof Dm&&(r.sharedClientState.syncEngine={Mr:XA.bind(null,s),Or:Cc.bind(null,s),Fr:tw.bind(null,s),Fs:nC.bind(null,s),kr:JA.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,ye.Z)(function*(h){yield function eS(n,e){return Xv.apply(this,arguments)}(r.ya.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return u.apply(this,arguments)}}())})()}_a(e){const t=Im();if(!Dm.vt(t))throw new Re(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=gv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Dm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class rC{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>Zv(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=QA.bind(null,r.syncEngine),yield Pv(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new NI}createDatastore(e){const t=uh(e.databaseInfo.databaseId),r=new bm(e.databaseInfo);return new SI(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>Zv(this.syncEngine,m,0),h=Cm.vt()?new Cm:new AI,new Av(t,r,s,u,h);var t,r,s,u,h}createSyncEngine(e,t){return function(r,s,u,h,m,w,b){const x=new VI(r,s,u,h,m,w);return b&&(x.ha=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=Ze(t);Pe("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield lh(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function zI(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class _p{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qI{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Ur,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),s=Number(r);isNaN(s)&&e.Pa(`length string (${r}) is not valid number`);const u=yield e.ba(s);return new Hv(JSON.parse(u),t.length+s)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,ye.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class WI{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,ye.Z)(function*(u,h){const m=Ze(u),w=Jd(m.M)+"/documents",b={documents:h.map(K=>Qd(m.M,K))},x=yield m.ho("BatchGetDocuments",w,b),O=new Map;x.forEach(K=>{const le=function BA(n,e){return"found"in e?function(t,r){bt(!!r.found);const s=To(t,r.found.name),u=Br(r.found.updateTime),h=new fi({mapValue:{fields:r.found.fields}});return Tn.newFoundDocument(s,u,h)}(n,e):"missing"in e?function(t,r){bt(!!r.missing),bt(!!r.readTime);const s=To(t,r.missing),u=Br(r.readTime);return Tn.newNoDocument(s,u)}(n,e):st()}(m.M,K);O.set(le.key.toString(),le)});const U=[];return h.forEach(K=>{const le=O.get(K.toString());bt(!!le),U.push(le)}),U}),function(u,h){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=je.fromPath(s);e.mutations.push(new ju(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(s,u){const h=Ze(s),m=Jd(h.M)+"/documents",w={writes:u.map(b=>im(h.M,b))};yield h.oo("Commit",m,w)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?tr.updateTime(t):tr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Re(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tr.updateTime(t)}return tr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ZI{constructor(e,t,r,s){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=s,this.Sa=5,this.Do=new bv(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,ye.Z)(function*(){const t=new WI(e.datastore),r=e.Ca(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.xa(u)}))}).catch(s=>{e.xa(s)})}))}Ca(e){try{const t=this.updateFunction(e);return!Ma(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ev(t)}return!1}}class KI{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Yr.UNAUTHENTICATED,this.clientId=tE.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,ye.Z)(function*(m){Pe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(Pe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Ku(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function iw(n,e){return Gm.apply(this,arguments)}function Gm(){return Gm=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,ye.Z)(function*(u){r.isEqual(u)||(yield mv(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Gm.apply(this,arguments)}function sw(n,e){return ow.apply(this,arguments)}function ow(){return ow=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield aw(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>Pm(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>Pm(e.remoteStore,u)),n.onlineComponents=e}),ow.apply(this,arguments)}function aw(n){return zm.apply(this,arguments)}function zm(){return zm=(0,ye.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield iw(n,new mp)),n.offlineComponents}),zm.apply(this,arguments)}function hh(n){return iC.apply(this,arguments)}function iC(){return iC=(0,ye.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield sw(n,new rC)),n.onlineComponents}),iC.apply(this,arguments)}function uw(n){return aw(n).then(e=>e.persistence)}function yp(n){return aw(n).then(e=>e.localStore)}function sC(n){return hh(n).then(e=>e.remoteStore)}function lw(n){return hh(n).then(e=>e.syncEngine)}function vp(n){return oC.apply(this,arguments)}function oC(){return oC=(0,ye.Z)(function*(n){const e=yield hh(n),t=e.eventManager;return t.onListen=UI.bind(null,e.syncEngine),t.onUnlisten=WD.bind(null,e.syncEngine),t}),oC.apply(this,arguments)}function JI(n,e,t={}){const r=new Ur;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(s,u,h,m,w){const b=new _p({next:O=>{u.enqueueAndForget(()=>$D(s,x));const U=O.docs.has(h);!U&&O.fromCache?w.reject(new Re(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&O.fromCache&&m&&"server"===m.source?w.reject(new Re(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(O)},error:O=>w.reject(O)}),x=new jv(lc(h.path),b,{includeMetadataChanges:!0,Cu:!0});return Lv(s,x)}(yield vp(n),n.asyncQueue,e,t,r)})),r.promise}function XI(n,e,t={}){const r=new Ur;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(s,u,h,m,w){const b=new _p({next:O=>{u.enqueueAndForget(()=>$D(s,x)),O.fromCache&&"server"===m.source?w.reject(new Re(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(O)},error:O=>w.reject(O)}),x=new jv(h,b,{includeMetadataChanges:!0,Cu:!0});return Lv(s,x)}(yield vp(n),n.asyncQueue,e,t,r)})),r.promise}const tT=new Map;function aC(n,e,t){if(!t)throw new Re(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function i(n,e,t,r){if(!0===e&&!0===r)throw new Re(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function o(n){if(!je.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function a(n){if(je.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function l(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function d(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=l(n);throw new Re(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function p(n,e){if(e<=0)throw new Re(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class y{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,i("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class E{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new y({}),this._settingsFrozen=!1,e instanceof ea?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Re(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ea(s.options.projectId)}(e))}get app(){if(!this._app)throw new Re(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new y(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ob;switch(t.type){case"gapi":const r=t.client;return bt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Bg(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=tT.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),tT.delete(e),t.terminate())}(this),Promise.resolve()}}class T{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new F(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new T(this.firestore,e,this._key)}}class M{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new M(this.firestore,e,this._query)}}class F extends M{constructor(e,t,r){super(e,t,lc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new T(this.firestore,null,new je(e))}withConverter(e){return new F(this.firestore,e,this._path)}}function B(n,e,...t){if(n=(0,Gt.m9)(n),aC("collection","path",e),n instanceof E){const r=en.fromString(e,...t);return a(r),new F(n,null,r)}{if(!(n instanceof T||n instanceof F))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(en.fromString(e,...t));return a(r),new F(n.firestore,null,r)}}function _e(n,e,...t){if(n=(0,Gt.m9)(n),1===arguments.length&&(e=tE.R()),aC("doc","path",e),n instanceof E){const r=en.fromString(e,...t);return o(r),new T(n,null,new je(r))}{if(!(n instanceof T||n instanceof F))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(en.fromString(e,...t));return o(r),new T(n.firestore,n instanceof F?n.converter:null,new je(r))}}function Fe(n,e){return n=(0,Gt.m9)(n),e=(0,Gt.m9)(e),(n instanceof T||n instanceof F)&&(e instanceof T||e instanceof F)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function He(n,e){return n=(0,Gt.m9)(n),e=(0,Gt.m9)(e),n instanceof M&&e instanceof M&&n.firestore===e.firestore&&Hd(n._query,e._query)&&n.converter===e.converter}class it{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new bv(this,"async_queue_retry"),this.qa=()=>{const t=Cv();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=Cv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=Cv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Ur;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Oa(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,Hn("INTERNAL UNHANDLED ERROR: ",function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),h}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const s=Fv.createAndSchedule(this,e,t,r,u=>this.ja(u));return this.Fa.push(s),s}Ka(){this.$a&&st()}verifyOperationInProgress(){}Wa(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function be(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class pt{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ur,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class _t extends E{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new it,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||qm(this),this._firestoreClient.terminate()}}function Wn(n){return n._firestoreClient||qm(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function qm(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Ly(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new KI(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Wm(n,e,t){const r=new Ur;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield iw(n,t),yield sw(n,e),r.resolve()}catch(s){if(!("FirebaseError"===(u=s).name?u.code===ue.FAILED_PRECONDITION||u.code===ue.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var u})).then(()=>r.promise)}function aS(n){if(n._initialized||n._terminated)throw new Re(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class bc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new br(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Yu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yu(Ir.fromBase64String(e))}catch(t){throw new Re(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yu(Ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wp{constructor(e){this._methodName=e}}class uC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}}const eR=/^__.*__$/;class tR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Uu(e,this.data,this.fieldMask,t,this.fieldTransforms):new zd(e,this.data,t,this.fieldTransforms)}}class uS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Uu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class lC{constructor(e,t,r,s,u,h){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=s,void 0===u&&this.Ya(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new lC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Za({path:r,ec:!1});return s.nc(e),s}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Za({path:r,ec:!1});return s.Ya(),s}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return hC(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(lS(this.Xa)&&eR.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class nR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||uh(e)}ac(e,t,r,s=!1){return new lC({Xa:e,methodName:t,uc:r,path:br.emptyPath(),ec:!1,oc:s},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Ep(n){const e=n._freezeSettings(),t=uh(n._databaseId);return new nR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cC(n,e,t,r,s,u={}){const h=n.ac(u.merge||u.mergeFields?2:0,e,t,s);sT("Data must be an object, but it was:",h,r);const m=hS(r,h);let w,b;if(u.merge)w=new ku(h.fieldMask),b=h.fieldTransforms;else if(u.mergeFields){const x=[];for(const O of u.mergeFields){const U=oT(e,O,t);if(!h.contains(U))throw new Re(ue.INVALID_ARGUMENT,`Field '${U}' is specified in your field mask but missing from your input data.`);pS(x,U)||x.push(U)}w=new ku(x),b=h.fieldTransforms.filter(O=>w.covers(O.field))}else w=null,b=h.fieldTransforms;return new tR(new fi(m),w,b)}class mw extends wp{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mw}}function cS(n,e,t){return new lC({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class nT extends wp{_toFieldTransform(e){return new Pf(e.path,new $d)}isEqual(e){return e instanceof nT}}class rR extends wp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=cS(this,e,!0),r=this.cc.map(u=>Dp(u,t)),s=new dc(r);return new Pf(e.path,s)}isEqual(e){return this===e}}class iR extends wp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=cS(this,e,!0),r=this.cc.map(u=>Dp(u,t)),s=new hc(r);return new Pf(e.path,s)}isEqual(e){return this===e}}class sR extends wp{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new Gd(e.M,yE(e.M,this.hc));return new Pf(e.path,t)}isEqual(e){return this===e}}function rT(n,e,t,r){const s=n.ac(1,e,t);sT("Data must be an object, but it was:",s,r);const u=[],h=fi.empty();Rd(r,(w,b)=>{const x=dC(e,w,t);b=(0,Gt.m9)(b);const O=s.sc(x);if(b instanceof mw)u.push(x);else{const U=Dp(b,O);null!=U&&(u.push(x),h.set(x,U))}});const m=new ku(u);return new uS(h,m,s.fieldTransforms)}function iT(n,e,t,r,s,u){const h=n.ac(1,e,t),m=[oT(e,r,t)],w=[s];if(u.length%2!=0)throw new Re(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let U=0;U<u.length;U+=2)m.push(oT(e,u[U])),w.push(u[U+1]);const b=[],x=fi.empty();for(let U=m.length-1;U>=0;--U)if(!pS(b,m[U])){const K=m[U];let le=w[U];le=(0,Gt.m9)(le);const Oe=h.sc(K);if(le instanceof mw)b.push(K);else{const qe=Dp(le,Oe);null!=qe&&(b.push(K),x.set(K,qe))}}const O=new ku(b);return new uS(x,O,h.fieldTransforms)}function dS(n,e,t,r=!1){return Dp(t,n.ac(r?4:3,e))}function Dp(n,e){if(fS(n=(0,Gt.m9)(n)))return sT("Unsupported field value:",e,n),hS(n,e);if(n instanceof wp)return function(t,r){if(!lS(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const h of t){let m=Dp(h,r.ic(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Gt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return yE(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=$n.fromDate(t);return{timestampValue:$f(r.M,s)}}if(t instanceof $n){const s=new $n(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:$f(r.M,s)}}if(t instanceof uC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Yu)return{bytesValue:Yd(r.M,t._byteString)};if(t instanceof T){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.rc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:nv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${l(t)}`)}(n,e)}function hS(n,e){const t={};return Hg(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rd(n,(r,s)=>{const u=Dp(s,e.tc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function fS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof $n||n instanceof uC||n instanceof Yu||n instanceof T||n instanceof wp)}function sT(n,e,t){if(!fS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=l(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function oT(n,e,t){if((e=(0,Gt.m9)(e))instanceof bc)return e._internalPath;if("string"==typeof e)return dC(n,e);throw hC("Field path arguments must be of type string or ",n,!1,void 0,t)}const oR=new RegExp("[~\\*/\\[\\]]");function dC(n,e,t){if(e.search(oR)>=0)throw hC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bc(...e.split("."))._internalPath}catch(r){throw hC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hC(n,e,t,r,s){const u=r&&!r.isEmpty(),h=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||h)&&(w+=" (found",u&&(w+=` in field ${r}`),h&&(w+=` in document ${s}`),w+=")"),new Re(ue.INVALID_ARGUMENT,m+n+w)}function pS(n,e){return n.some(t=>t.isEqual(e))}class _w{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new T(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new aR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class aR extends _w{data(){return super.data()}}function fC(n,e){return"string"==typeof e?dC(n,e):e instanceof bc?e._internalPath:e._delegate._internalPath}class Cp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ic extends _w{constructor(e,t,r,s,u,h){super(e,t,r,s,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class yw extends Ic{data(e={}){return super.data(e)}}class ph{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Cp(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new yw(this._firestore,this._userDataWriter,r.key,r,new Cp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new yw(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Cp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>s||3!==h.type).map(h=>{const m=new yw(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Cp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==h.type&&(w=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),1!==h.type&&(u=u.add(h.doc),b=u.indexOf(h.doc.key)),{type:uR(h.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function uR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function gS(n,e){return n instanceof Ic&&e instanceof Ic?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ph&&e instanceof ph&&n._firestore===e._firestore&&He(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function mS(n){if(cc(n)&&0===n.explicitOrderBy.length)throw new Re(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vw{}function gh(n,...e){for(const t of e)n=t._apply(n);return n}class lR extends vw{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=Ep(e.firestore),r=function(s,u,h,m,w,b,x){let O;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){DS(x,b);const K=[];for(const le of x)K.push(ES(m,s,le));O={arrayValue:{values:K}}}else O=ES(m,s,x)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||DS(x,b),O=dS(h,"where",x,"in"===b||"not-in"===b);const U=Qr.create(w,b,O);return function(K,le){if(le.S()){const qe=Zg(K);if(null!==qe&&!qe.isEqual(le.field))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${qe.toString()}' and '${le.field.toString()}'`);const Ut=qy(K);null!==Ut&&CS(0,le.field,Ut)}const Oe=function(qe,Ut){for(const Kt of qe.filters)if(Ut.indexOf(Kt.op)>=0)return Kt.op;return null}(K,function(qe){switch(qe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(le.op));if(null!==Oe)throw new Re(ue.INVALID_ARGUMENT,Oe===le.op?`Invalid query. You cannot use more than one '${le.op.toString()}' filter.`:`Invalid query. You cannot use '${le.op.toString()}' filters with '${Oe.toString()}' filters.`)}(s,U),U}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new M(e.firestore,e.converter,function(s,u){const h=s.filters.concat([u]);return new ra(s.path,s.collectionGroup,s.explicitOrderBy.slice(),h,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class dR extends vw{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Bd(s,u);return function(m,w){if(null===qy(m)){const b=Zg(m);null!==b&&CS(0,b,w.field)}}(r,h),h}(e._query,this.lc,this._c);return new M(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new ra(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class _S extends vw{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new M(e.firestore,e.converter,Wy(e._query,this.wc,this.mc))}}class yS extends vw{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=wS(e,this.type,this.gc,this.yc);return new M(e.firestore,e.converter,(s=t,new ra((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class vS extends vw{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=wS(e,this.type,this.gc,this.yc);return new M(e.firestore,e.converter,(s=t,new ra((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function wS(n,e,t,r){if(t[0]=(0,Gt.m9)(t[0]),t[0]instanceof _w)return function(s,u,h,m,w){if(!m)throw new Re(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const b=[];for(const x of Vu(s))if(x.field.isKeyField())b.push(Ra(u,m.key));else{const O=m.data.field(x.field);if(Fy(O))throw new Re(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const U=x.field.canonicalString();throw new Re(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${U}' (used as the orderBy) does not exist.`)}b.push(O)}return new Lu(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Ep(n.firestore);return function(u,h,m,w,b,x){const O=u.explicitOrderBy;if(b.length>O.length)throw new Re(ue.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const U=[];for(let K=0;K<b.length;K++){const le=b[K];if(O[K].field.isKeyField()){if("string"!=typeof le)throw new Re(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof le}`);if(!Kg(u)&&-1!==le.indexOf("/"))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${le}' contains a slash.`);const Oe=u.path.child(en.fromString(le));if(!je.isDocumentKey(Oe))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Oe}' is not because it contains an odd number of segments.`);const qe=new je(Oe);U.push(Ra(h,qe))}else{const Oe=dS(m,w,le);U.push(Oe)}}return new Lu(U,x)}(n._query,n.firestore._databaseId,s,e,t,r)}}function ES(n,e,t){if("string"==typeof(t=(0,Gt.m9)(t))){if(""===t)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kg(e)&&-1!==t.indexOf("/"))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(en.fromString(t));if(!je.isDocumentKey(r))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ra(n,new je(r))}if(t instanceof T)return Ra(n,t._key);throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${l(t)}.`)}function DS(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function CS(n,e,t){if(!t.isEqual(e))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class aT{convertValue(e,t="none"){switch(Pu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return On(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Od(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return Rd(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new uC(On(e.latitude),On(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Rf(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nu(e));default:return null}}convertTimestamp(e){const t=Do(e);return new $n(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=en.fromString(e);bt(pc(r));const s=new ea(r.get(1),r.get(3)),u=new je(r.popFirst(5));return s.isEqual(t)||Hn(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function pC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class vR extends aT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new T(this.firestore,null,t)}}class bS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ep(e)}set(e,t,r){this._verifyNotCommitted();const s=mh(e,this._firestore),u=pC(s.converter,t,r),h=cC(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(h.toMutation(s._key,tr.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=mh(e,this._firestore);let h;return h="string"==typeof(t=(0,Gt.m9)(t))||t instanceof bc?iT(this._dataReader,"WriteBatch.update",u._key,t,r,s):rT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,tr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=mh(e,this._firestore);return this._mutations=this._mutations.concat(new Vf(t._key,tr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mh(n,e){if((n=(0,Gt.m9)(n)).firestore!==e)throw new Re(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class bp extends aT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new T(this.firestore,null,t)}}function IS(n,e,t){n=d(n,T);const r=d(n.firestore,_t),s=pC(n.converter,e,t);return Zm(r,[cC(Ep(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,tr.none())])}function TS(n,e,t,...r){n=d(n,T);const s=d(n.firestore,_t),u=Ep(s);let h;return h="string"==typeof(e=(0,Gt.m9)(e))||e instanceof bc?iT(u,"updateDoc",n._key,e,t,r):rT(u,"updateDoc",n._key,e),Zm(s,[h.toMutation(n._key,tr.exists(!0))])}function AS(n,...e){var t,r,s;n=(0,Gt.m9)(n);let u={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||be(e[h])||(u=e[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges};if(be(e[h])){const O=e[h];e[h]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[h+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[h+2]=null===(s=O.complete)||void 0===s?void 0:s.bind(O)}let w,b,x;if(n instanceof T)b=d(n.firestore,_t),x=lc(n._key.path),w={next:O=>{e[h]&&e[h](uT(b,n,O))},error:e[h+1],complete:e[h+2]};else{const O=d(n,M);b=d(O.firestore,_t),x=O._query;const U=new bp(b);w={next:K=>{e[h]&&e[h](new ph(b,U,O,K))},error:e[h+1],complete:e[h+2]},mS(n._query)}return function(O,U,K,le){const Oe=new _p(le),qe=new jv(U,Oe,K);return O.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return Lv(yield vp(O),qe)})),()=>{Oe.Ia(),O.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return $D(yield vp(O),qe)}))}}(Wn(b),x,m,w)}function Zm(n,e){return function(t,r){const s=new Ur;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function KA(n,e,t){return qv.apply(this,arguments)}(yield lw(t),r,s)})),s.promise}(Wn(n),e)}function uT(n,e,t){const r=t.docs.get(e._key),s=new bp(n);return new Ic(n,s,e._key,r,new Cp(t.hasPendingWrites,t.fromCache),e.converter)}class MR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ep(e)}get(e){const t=mh(e,this._firestore),r=new vR(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return st();const u=s[0];if(u.isFoundDocument())return new _w(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new _w(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const s=mh(e,this._firestore),u=pC(s.converter,t,r),h=cC(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,h),this}update(e,t,r,...s){const u=mh(e,this._firestore);let h;return h="string"==typeof(t=(0,Gt.m9)(t))||t instanceof bc?iT(this._dataReader,"Transaction.update",u._key,t,r,s):rT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,h),this}delete(e){const t=mh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=mh(e,this._firestore),r=new bp(this._firestore);return super.get(e).then(s=>new Ic(this._firestore,r,t._key,s._document,new Cp(!1,!1),t.converter))}}function lT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function MS(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function xS(){if(!function Py(){return"undefined"!=typeof atob}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){nc=jl.SDK_VERSION,(0,jl._registerComponent)(new ug.wA("firestore",(t,{options:r})=>{const s=t.getProvider("app").getImmediate(),u=new _t(s,new kb(t.getProvider("auth-internal")),new eE(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,jl.registerVersion)(Oy,"3.4.8",n),(0,jl.registerVersion)(Oy,"3.4.8","esm2017")}();class ww{constructor(e){this._delegate=e}static fromBase64String(e){return xS(),new ww(Yu.fromBase64String(e))}static fromUint8Array(e){return MS(),new ww(Yu.fromUint8Array(e))}toBase64(){return xS(),this._delegate.toBase64()}toUint8Array(){return MS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function cT(n){return function VR(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class UR{enableIndexedDbPersistence(e,t){return function cw(n,e){aS(n=d(n,_t));const t=Wn(n),r=n._freezeSettings(),s=new rC;return Wm(t,s,new GI(s,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function dw(n){aS(n=d(n,_t));const e=Wn(n),t=n._freezeSettings(),r=new rC;return Wm(e,r,new tS(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function hw(n){if(n._initialized&&!n._terminated)throw new Re(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ur;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!So.vt())return Promise.resolve();const s=r+"main";yield So.delete(s)}),function(r){return t.apply(this,arguments)})(gv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class RS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ea||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&rc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function D(n,e,t,r={}){var s;const u=(n=d(n,E))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&rc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=Yr.MOCK_USER;else{h=(0,Gt.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Re(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Yr(w)}n._authCredentials=new Q0(new ic(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function pw(n){return function YI(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield uw(n),t=yield sC(n);return e.setNetworkEnabled(!0),function(r){const s=Ze(r);return s.fu.delete(0),Am(s)}(t)}))}(Wn(n=d(n,_t)))}(this._delegate)}disableNetwork(){return function gw(n){return function QI(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield uw(n),t=yield sC(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(s){const u=Ze(s);u.fu.add(0),yield lh(u),u.wu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Wn(n=d(n,_t)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,i("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function fw(n){return function(e){const t=new Ur;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function jI(n,e){return Bm.apply(this,arguments)}(yield lw(e),t)})),t.promise}(Wn(n=d(n,_t)))}(this._delegate)}onSnapshotsInSync(e){return function SR(n,e){return function iS(n,e){const t=new _p(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield vp(n),s=t,Ze(r).Eu.add(s),void s.next();var r,s})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield vp(n),s=t,void Ze(r).Eu.delete(s);var r,s}))}}(Wn(n=d(n,_t)),be(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Km(this,B(this._delegate,e))}catch(t){throw ps(t,"collection()","Firestore.collection()")}}doc(e){try{return new sa(this,_e(this._delegate,e))}catch(t){throw ps(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gs(this,function W(n,e){if(n=d(n,E),aC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new M(n,null,(t=e,new ra(en.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ps(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function xR(n,e){return function eT(n,e){const t=new Ur;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const r=yield(s=n,hh(s).then(u=>u.datastore));var s;new ZI(n.asyncQueue,r,e,t).run()})),t.promise}(Wn(n=d(n,_t)),t=>e(new MR(n,t)))}(this._delegate,t=>e(new OS(this,t)))}batch(){return Wn(this._delegate),new kS(new bS(this._delegate,e=>Zm(this._delegate,e)))}loadBundle(e){return function Jx(n,e){const t=Wn(n=d(n,_t)),r=new pt;return function sS(n,e,t,r){const s=function(u,h){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return zI(w,b);if(w instanceof ArrayBuffer)return zI(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new qI(w,h);var w}(t,uh(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function rw(n,e,t){const r=Ze(n);var s;(s=(0,ye.Z)(function*(u,h,m){try{const w=yield h.getMetadata();if(yield function(U,K){const le=Ze(U),Oe=Br(K.createTime);return le.persistence.runTransaction("hasNewerBundle","readonly",qe=>le._s.getBundleMetadata(qe,K.id)).then(qe=>!!qe&&qe.createTime.compareTo(Oe)>=0)}(u.localStore,w))return yield h.close(),m._completeWith({taskState:"Success",documentsLoaded:(U=w).totalDocuments,bytesLoaded:U.totalBytes,totalDocuments:U.totalDocuments,totalBytes:U.totalBytes}),Promise.resolve(new Set);m._updateProgress(Vm(w));const b=new FI(w,u.localStore,h.M);let x=yield h.da();for(;x;){const U=yield b.ku(x);U&&m._updateProgress(U),x=yield h.da()}const O=yield b.complete();return yield ja(u,O.Fu,void 0),yield function(U,K){const le=Ze(U);return le.persistence.runTransaction("Save bundle","readwrite",Oe=>le._s.saveBundleMetadata(Oe,K))}(u.localStore,w),m._completeWith(O.progress),Promise.resolve(O.Ou)}catch(w){return rc("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var U}),function(u,h,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield lw(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Xx(n,e){return function oS(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const s=Ze(t);return s.persistence.runTransaction("Get named query","readonly",u=>s._s.getNamedQuery(u,r))}(yield yp(n),e)}))}(Wn(n=d(n,_t)),e).then(t=>t?new M(n,null,t.query):null)}(this._delegate,e).then(t=>t?new gs(this,t):null)}}class gC extends aT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ww(new Yu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return sa.forKey(t,this.firestore,null)}}class OS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new gC(e)}get(e){const t=Tp(e);return this._delegate.get(t).then(r=>new Ew(this._firestore,new Ic(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Tp(e);return r?(lT("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Tp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Tp(e);return this._delegate.delete(t),this}}class kS{constructor(e){this._delegate=e}set(e,t,r){const s=Tp(e);return r?(lT("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Tp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Tp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ip{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new yw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Dw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ip.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Ip(e,new gC(e),t),s.set(t,u)),u}}Ip.INSTANCES=new WeakMap;class sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new sa(t,new T(t._delegate,r,new je(e)))}static forKey(e,t,r){return new sa(t,new T(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Km(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Km(this.firestore,B(this._delegate,e))}catch(t){throw ps(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Gt.m9)(e))instanceof T&&Fe(this._delegate,e)}set(e,t){t=lT("DocumentReference.set",t);try{return t?IS(this._delegate,e,t):IS(this._delegate,e)}catch(r){throw ps(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?TS(this._delegate,e):TS(this._delegate,e,t,...r)}catch(s){throw ps(s,"updateDoc()","DocumentReference.update()")}}delete(){return function TR(n){return Zm(d(n.firestore,_t),[new Vf(n._key,tr.none())])}(this._delegate)}onSnapshot(...e){const t=NS(e),r=PS(e,s=>new Ew(this.firestore,new Ic(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return AS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ER(n){n=d(n,T);const e=d(n.firestore,_t),t=Wn(e),r=new bp(e);return function nS(n,e){const t=new Ur;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(s,u,h){try{const m=yield function(w,b){const x=Ze(w);return x.persistence.runTransaction("read document","readonly",O=>x.ci.Ls(O,b))}(s,u);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new Re(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Ku(m,`Failed to get document '${u} from cache`);h.reject(w)}}),function(s,u,h){return r.apply(this,arguments)})(yield yp(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Ic(e,r,n._key,s,new Cp(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function DR(n){n=d(n,T);const e=d(n.firestore,_t);return JI(Wn(e),n._key,{source:"server"}).then(t=>uT(e,n,t))}(this._delegate):function wR(n){n=d(n,T);const e=d(n.firestore,_t);return JI(Wn(e),n._key).then(t=>uT(e,n,t))}(this._delegate),t.then(r=>new Ew(this.firestore,new Ic(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new sa(this.firestore,this._delegate.withConverter(e?Ip.getInstance(this.firestore,e):null))}}function ps(n,e,t){return n.message=n.message.replace(e,t),n}function NS(n){for(const e of n)if("object"==typeof e&&!cT(e))return e;return{}}function PS(n,e){var t,r;let s;return s=cT(n[0])?n[0]:cT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class Ew{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new sa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return gS(this._delegate,e._delegate)}}class Dw extends Ew{data(e){const t=this._delegate.data(e);return function LA(n,e){n||st()}(void 0!==t),t}}class gs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gC(e)}where(e,t,r){try{return new gs(this.firestore,gh(this._delegate,function cR(n,e,t){const r=e,s=fC("where",n);return new lR(s,r,t)}(e,t,r)))}catch(s){throw ps(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new gs(this.firestore,gh(this._delegate,function hR(n,e="asc"){const t=e,r=fC("orderBy",n);return new dR(r,t)}(e,t)))}catch(r){throw ps(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new gs(this.firestore,gh(this._delegate,function fR(n){return p("limit",n),new _S("limit",n,"F")}(e)))}catch(t){throw ps(t,"limit()","Query.limit()")}}limitToLast(e){try{return new gs(this.firestore,gh(this._delegate,function pR(n){return p("limitToLast",n),new _S("limitToLast",n,"L")}(e)))}catch(t){throw ps(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new gs(this.firestore,gh(this._delegate,function gR(...n){return new yS("startAt",n,!0)}(...e)))}catch(t){throw ps(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new gs(this.firestore,gh(this._delegate,function mR(...n){return new yS("startAfter",n,!1)}(...e)))}catch(t){throw ps(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new gs(this.firestore,gh(this._delegate,function _R(...n){return new vS("endBefore",n,!1)}(...e)))}catch(t){throw ps(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new gs(this.firestore,gh(this._delegate,function yR(...n){return new vS("endAt",n,!0)}(...e)))}catch(t){throw ps(t,"endAt()","Query.endAt()")}}isEqual(e){return He(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function bR(n){n=d(n,M);const e=d(n.firestore,_t),t=Wn(e),r=new bp(e);return function rS(n,e){const t=new Ur;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(s,u,h){try{const m=yield ah(s,u,!0),w=new zD(u,m.li),b=w.Gu(m.documents),x=w.applyChanges(b,!1);h.resolve(x.snapshot)}catch(m){const w=Ku(m,`Failed to execute query '${u} against cache`);h.reject(w)}}),function(s,u,h){return r.apply(this,arguments)})(yield yp(n),e,t);var r})),t.promise}(t,n._query).then(s=>new ph(e,r,n,s))}(this._delegate):"server"===(null==e?void 0:e.source)?function IR(n){n=d(n,M);const e=d(n.firestore,_t),t=Wn(e),r=new bp(e);return XI(t,n._query,{source:"server"}).then(s=>new ph(e,r,n,s))}(this._delegate):function CR(n){n=d(n,M);const e=d(n.firestore,_t),t=Wn(e),r=new bp(e);return mS(n._query),XI(t,n._query).then(s=>new ph(e,r,n,s))}(this._delegate),t.then(r=>new dT(this.firestore,new ph(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=NS(e),r=PS(e,s=>new dT(this.firestore,new ph(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return AS(this._delegate,t,r)}withConverter(e){return new gs(this.firestore,this._delegate.withConverter(e?Ip.getInstance(this.firestore,e):null))}}class jR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Dw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class dT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new gs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Dw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new jR(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Dw(this._firestore,r))})}isEqual(e){return gS(this._delegate,e._delegate)}}class Km extends gs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new sa(this.firestore,e):null}doc(e){try{return new sa(this.firestore,void 0===e?_e(this._delegate):_e(this._delegate,e))}catch(t){throw ps(t,"doc()","CollectionReference.doc()")}}add(e){return function AR(n,e){const t=d(n.firestore,_t),r=_e(n),s=pC(n.converter,e);return Zm(t,[cC(Ep(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,tr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new sa(this.firestore,t))}isEqual(e){return Fe(this._delegate,e._delegate)}withConverter(e){return new Km(this.firestore,this._delegate.withConverter(e?Ip.getInstance(this.firestore,e):null))}}function Tp(n){return d(n,T)}class hT{constructor(...e){this._delegate=new bc(...e)}static documentId(){return new hT(br.keyField().canonicalString())}isEqual(e){return(e=(0,Gt.m9)(e))instanceof bc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ap{constructor(e){this._delegate=e}static serverTimestamp(){const e=function OR(){return new nT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ap(e)}static delete(){const e=function RR(){return new mw("deleteField")}();return e._methodName="FieldValue.delete",new Ap(e)}static arrayUnion(...e){const t=function kR(...n){return new rR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ap(t)}static arrayRemove(...e){const t=function NR(...n){return new iR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ap(t)}static increment(e){const t=function PR(n){return new sR("increment",n)}(e);return t._methodName="FieldValue.increment",new Ap(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const HR={Firestore:RS,GeoPoint:uC,Timestamp:$n,Blob:ww,Transaction:OS,WriteBatch:kS,DocumentReference:sa,DocumentSnapshot:Ew,Query:gs,QueryDocumentSnapshot:Dw,QuerySnapshot:dT,CollectionReference:Km,FieldPath:hT,FieldValue:Ap,setLogLevel:function BR(n){!function FA(n){Ou.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function GR(n){(function $R(n,e){n.INTERNAL.registerComponent(new ug.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},HR)))})(n,(e,t)=>new RS(e,t,new UR)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(e0.Z);var zR=N(6451),mC=N(5363),qR=N(6063);class WR extends Fn.x{constructor(e=1/0,t=1/0,r=qR.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:h}=this;t||(r.push(e),!s&&r.push(u.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let h=0;h<u.length&&!e.closed;h+=r?1:2)e.next(u[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const h=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=h;w+=2)m=w;m&&r.splice(0,m+1)}}}var ZR=N(3099);function FS(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,ZR.B)({connector:()=>new WR(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function LS(n,e){return(0,lo.m)(e)?Rn(()=>n,e):Rn(()=>n)}var fT=N(9468);N(5867);const US=new Map,XR={activated:!1,tokenObservers:[]},eO={initialized:!1,enabled:!1};function pi(n){return US.get(n)||XR}function Ha(n,e){US.set(n,e)}function yC(){return eO}class sO{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new Gt.BH,yield function oO(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Gt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ms=new Gt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function jS(n){if(!pi(n).activated)throw ms.create("use-before-activation",{appName:n.name})}function _T(n,e){return yT.apply(this,arguments)}function yT(){return yT=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const O=yield s.getHeartbeatsHeader();O&&(r["X-Firebase-Client"]=O)}const u={method:"POST",body:JSON.stringify(e),headers:r};let h,m;try{h=yield fetch(n,u)}catch(O){throw ms.create("fetch-network-error",{originalErrorMessage:O.message})}if(200!==h.status)throw ms.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(O){throw ms.create("fetch-parse-error",{originalErrorMessage:O.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw ms.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(w[1]),x=Date.now();return{token:m.token,expireTimeMillis:x+b,issuedAtTimeMillis:x}}),yT.apply(this,arguments)}function dO(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const Cw="firebase-app-check-store";let EC=null;function $S(){return EC||(EC=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(ms.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Cw,{keyPath:"compositeKey"})}}catch(t){e(ms.create("storage-open",{originalErrorMessage:t.message}))}}),EC)}function vT(){return vT=(0,ye.Z)(function*(n,e){const r=(yield $S()).transaction(Cw,"readwrite"),u=r.objectStore(Cw).put({compositeKey:n,value:e});return new Promise((h,m)=>{u.onsuccess=w=>{h()},r.onerror=w=>{var b;m(ms.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})}),vT.apply(this,arguments)}const bw=new Pr.Yd("@firebase/app-check");function WS(n,e){return(0,Gt.hl)()?function gO(n,e){return function GS(n,e){return vT.apply(this,arguments)}(function qS(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{bw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ZS(){return yC().enabled}function KS(){return CT.apply(this,arguments)}function CT(){return CT=(0,ye.Z)(function*(){const n=yC();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),CT.apply(this,arguments)}const EO={error:"UNKNOWN_ERROR"};function DO(n){return Gt.US.encodeString(JSON.stringify(n),!1)}function DC(n){return bT.apply(this,arguments)}function bT(){return bT=(0,ye.Z)(function*(n,e=!1){const t=n.app;jS(t);const r=pi(t);let u,s=r.token;if(!s){const w=yield r.cachedTokenPromise;w&&CC(w)&&(s=w)}if(!e&&s&&CC(s))return{token:s.token};let m,h=!1;if(ZS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=_T(dO(t,yield KS()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),h=!0);const w=yield r.exchangeTokenPromise;return yield WS(t,w),Ha(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),h=!0),s=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?bw.warn(w.message):bw.error(w),u=w}return s?(m={token:s.token},Ha(t,Object.assign(Object.assign({},r),{token:s})),yield WS(t,s)):m=bO(u),h&&QS(t,m),m}),bT.apply(this,arguments)}function TT(n,e){const t=pi(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ha(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function YS(n){const{app:e}=n,t=pi(e);let r=t.tokenRefresher;r||(r=function CO(n){const{app:e}=n;return new sO((0,ye.Z)(function*(){let r;if(r=pi(e).token?yield DC(n,!0):yield DC(n),r.error)throw r.error}),()=>!0,()=>{const t=pi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ha(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function QS(n,e){const t=pi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(s){}}function CC(n){return n.expireTimeMillis-Date.now()>0}function bO(n){return{token:DO(EO),error:n}}class IO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=pi(this.app);for(const t of e)TT(this.app,t.next);return Promise.resolve()}}const sM="app-check-internal";!function UO(){(0,jl._registerComponent)(new ug.wA("app-check",n=>function TO(n,e){return new IO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(sM).initialize()})),(0,jl._registerComponent)(new ug.wA(sM,n=>function AO(n){return{getToken:e=>DC(n,e),addTokenListener:e=>function IT(n,e,t,r){const{app:s}=n,u=pi(s),h={next:t,error:r,type:e};if(Ha(s,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,h]})),u.token&&CC(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),YS(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>YS(n))}(n,"INTERNAL",e),removeTokenListener:e=>TT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,jl.registerVersion)("@firebase/app-check","0.5.7")}();class xT{constructor(){return(0,Nr.vb)("app-check")}}"undefined"!=typeof window&&window;var GO=N(127);const aM=new c.OlP("angularfire2.auth.use-emulator"),uM=new c.OlP("angularfire2.auth.settings"),lM=new c.OlP("angularfire2.auth.tenant-id"),cM=new c.OlP("angularfire2.auth.langugage-code"),dM=new c.OlP("angularfire2.auth.use-device-language"),hM=new c.OlP("angularfire.auth.persistence"),fM=(n,e,t,r,s,u,h,m)=>(0,zs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,u&&w.useDeviceLanguage(),h)for(const[b,x]of Object.entries(h))w.settings[b]=x;return m&&w.setPersistence(m),w},[t,r,s,u,h,m]);let pM=(()=>{class n{constructor(t,r,s,u,h,m,w,b,x,O,U,K){const le=new Fn.x,Oe=ft(void 0).pipe((0,mC.Q)(h.outsideAngular),Rn(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,820)))),(0,Pt.U)(()=>(0,zs.on)(t,u,r)),(0,Pt.U)(qe=>fM(qe,u,m,b,x,O,w,U)),FS({bufferSize:1,refCount:!1}));if(or(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ft(null);else{Oe.pipe(Bs()).subscribe();const Ut=Oe.pipe(Rn(Ft=>Ft.getRedirectResult().then(Yt=>Yt,()=>null)),Nr.iC,FS({bufferSize:1,refCount:!1})),Kt=Oe.pipe(Rn(Ft=>new _r.y(Yt=>({unsubscribe:u.runOutsideAngular(()=>Ft.onAuthStateChanged(hn=>Yt.next(hn),hn=>Yt.error(hn),()=>Yt.complete()))})))),Jt=Oe.pipe(Rn(Ft=>new _r.y(Yt=>({unsubscribe:u.runOutsideAngular(()=>Ft.onIdTokenChanged(hn=>Yt.next(hn),hn=>Yt.error(hn),()=>Yt.complete()))}))));this.authState=Ut.pipe(LS(Kt),(0,fT.R)(h.outsideAngular),(0,mC.Q)(h.insideAngular)),this.user=Ut.pipe(LS(Jt),(0,fT.R)(h.outsideAngular),(0,mC.Q)(h.insideAngular)),this.idToken=this.user.pipe(Rn(Ft=>Ft?(0,Dn.D)(Ft.getIdToken()):ft(null))),this.idTokenResult=this.user.pipe(Rn(Ft=>Ft?(0,Dn.D)(Ft.getIdTokenResult()):ft(null))),this.credential=(0,zR.T)(Ut,le,this.authState.pipe(is(Ft=>!Ft))).pipe((0,Pt.U)(Ft=>(null==Ft?void 0:Ft.user)?Ft:null),(0,fT.R)(h.outsideAngular),(0,mC.Q)(h.insideAngular))}return(0,zs.pX)(this,Oe,u,{spy:{apply:(qe,Ut,Kt)=>{(qe.startsWith("signIn")||qe.startsWith("createUser"))&&Kt.then(Jt=>le.next(Jt))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(zs.Dh),c.LFG(zs.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Nr.HU),c.LFG(aM,8),c.LFG(uM,8),c.LFG(lM,8),c.LFG(cM,8),c.LFG(dM,8),c.LFG(hM,8),c.LFG(xT,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function gM(n,e){return function qO(n,e=H_.z){return new _r.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function OT(n,e){return gM(n,e).pipe((0,Pt.U)(t=>({payload:t,type:"query"})))}function IC(n,e){return OT(n,e).pipe(Di(void 0),nf(),(0,Pt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,m)=>{const w=s.find(x=>x.doc.ref.isEqual(h.ref)),b=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(h.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(h.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(h.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),u}))}function mM(n,e,t){return IC(n,t).pipe(yr((r,s)=>function ZO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function KO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return kT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return kT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return kT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function Xw(n,e=oi.y){return n=null!=n?n:AA,(0,ur.e)((t,r)=>{let s,u=!0;t.subscribe((0,gn.x)(r,h=>{const m=e(h);(u||!n(s,m))&&(u=!1,s=m,r.next(h))}))})}(),(0,Pt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function kT(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function _M(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class yM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=IC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Pt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Di(void 0),nf(),is(([r,s])=>s.length>0||!r),(0,Pt.U)(([r,s])=>s),Nr.iC)}auditTrail(e){return this.stateChanges(e).pipe(yr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=_M(e);return mM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nr.iC)}valueChanges(e={}){return OT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Nr.iC)}get(e){return(0,Dn.D)(this.query.get(e)).pipe(Nr.iC)}add(e){return this.ref.add(e)}doc(e){return new vM(this.ref.doc(e),this.afs)}}class vM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=DM(r,t);return new yM(s,u,this.afs)}snapshotChanges(){return function WO(n,e){return gM(n,e).pipe(Di(void 0),nf(),(0,Pt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Nr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Dn.D)(this.ref.get(e)).pipe(Nr.iC)}}class YO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?IC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),is(t=>t.length>0),Nr.iC):IC(this.query,this.afs.schedulers.outsideAngular).pipe(Nr.iC)}auditTrail(e){return this.stateChanges(e).pipe(yr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=_M(e);return mM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nr.iC)}valueChanges(e={}){return OT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Nr.iC)}get(e){return(0,Dn.D)(this.query.get(e)).pipe(Nr.iC)}}const wM=new c.OlP("angularfire2.enableFirestorePersistence"),EM=new c.OlP("angularfire2.firestore.persistenceSettings"),QO=new c.OlP("angularfire2.firestore.settings"),JO=new c.OlP("angularfire2.firestore.use-emulator");function DM(n,e=(t=>t)){return{query:e(n),ref:n}}let TC=(()=>{class n{constructor(t,r,s,u,h,m,w,b,x,O,U,K,le,Oe,qe,Ut,Kt){this.schedulers=w;const Jt=(0,zs.on)(t,m,r),Ft=x;O&&fM(Jt,m,U,le,Oe,qe,K,Ut),[this.firestore,this.persistenceEnabled$]=(0,zs.cc)(`${Jt.name}.firestore`,"AngularFirestore",Jt.name,()=>{const Yt=m.runOutsideAngular(()=>Jt.firestore());if(u&&Yt.settings(u),Ft&&Yt.useEmulator(...Ft),s&&!or(h)){const hn=()=>{try{return(0,Dn.D)(Yt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(qi){return"undefined"!=typeof console&&console.warn(qi),ft(!1)}};return[Yt,m.runOutsideAngular(hn)]}return[Yt,ft(!1)]},[u,Ft,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:h}=DM(s,r),m=this.schedulers.ngZone.run(()=>u);return new yM(m,h,this)}collectionGroup(t,r){const s=r||(h=>h),u=this.firestore.collectionGroup(t);return new YO(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new vM(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(zs.Dh),c.LFG(zs.xv,8),c.LFG(wM,8),c.LFG(QO,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Nr.HU),c.LFG(EM,8),c.LFG(JO,8),c.LFG(pM,8),c.LFG(aM,8),c.LFG(uM,8),c.LFG(lM,8),c.LFG(cM,8),c.LFG(dM,8),c.LFG(hM,8),c.LFG(xT,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),XO=(()=>{class n{constructor(){GO.Z.registerVersion("angularfire",Nr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:wM,useValue:!0},{provide:EM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[TC]}),n})(),NT=(()=>{class n{constructor(t){this.firestore=t}getAllItems(){return new Promise(t=>{this.firestore.collection("items").valueChanges({idField:"id"}).subscribe(r=>t(r))})}addItem(t){var r=this;return(0,ye.Z)(function*(){yield r.getAllItems().then(u=>{let h=new yd("dummy",t.name,t.description,t.cost,t.image);new Promise((m,w)=>{r.firestore.collection("items").add(JSON.parse(JSON.stringify(h))).then(b=>{},b=>w(b))})})})()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(TC))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Iw{constructor(e,t,r,s,u,h,m,w){this.username=e,this.password=t,this.email=r,this.isAdmin=s,this.postCode=u,this.city=h,this.country=m,this.address=w,this.uid=""}setUid(e){this.uid=e}getUid(){return this.uid}}let Tc=(()=>{class n{constructor(t){this.firestore=t,this.originalAdmin=new Iw("admin","admin","admin@admin.com",!0,"postcode","city","country","address")}getLoggedInUser(){let t=localStorage.getItem("loggedInUser");return null!==t?JSON.parse(t):null}setLoggedInUser(t){localStorage.setItem("loggedInUser",JSON.stringify(t))}logout(){localStorage.removeItem("loggedInUser")}modifyUser(t,r,s,u,h,m,w,b){this.firestore.doc("users/"+t).update({username:r,postCode:s,password:u,email:h,country:m,city:w,address:b}),this.logout()}getAllUsers(){return new Promise(t=>{this.firestore.collection("users").valueChanges({idField:"id"}).subscribe(r=>t(r))})}getUserByUserName(t){var r=this;return(0,ye.Z)(function*(){let s=yield r.getAllUsers();for(let u=0,h=s.length;u<h;u++)if(s[u].username==t){let m=new Iw(s[u].username,s[u].password,s[u].email,s[u].isAdmin,s[u].postCode,s[u].city,s[u].country,s[u].address);return m.uid=s[u].id,m}return null})()}addUser(t){var r=this;return(0,ye.Z)(function*(){let s=yield r.getAllUsers();console.log(s);for(let u=0,h=s.length;u<h;u++)if(console.log(s[u].username),s[u].username==t.username||s[u].email==t.email)return!1;return new Promise((u,h)=>{r.firestore.collection("users").add(JSON.parse(JSON.stringify(t))).then(m=>{},m=>h(m))}),!0})()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(TC))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AC=(()=>{class n{constructor(t,r){this.firestore=t,this.authData=r}getOrdersByUsername(t){let r=this.authData.getLoggedInUser();return new Promise(null!=r?s=>{this.firestore.collection("orders",u=>u.where("username","==",r.username)).valueChanges({idField:"id"}).subscribe(u=>s(u))}:s=>{})}getOrders(){return new Promise(t=>{this.firestore.collection("orders",r=>r.orderBy("orderedItemCost","desc")).valueChanges({idField:"id"}).subscribe(r=>t(r))})}deleteOrder(t){this.firestore.doc("orders/"+t).delete()}addOrder(t){new Promise((r,s)=>{this.firestore.collection("orders").add(JSON.parse(JSON.stringify(t))).then(u=>{},u=>s(u))})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(TC),c.LFG(Tc))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ek(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div")(1,"h3"),c._uU(2),c.qZA(),c.TgZ(3,"p"),c._uU(4),c.qZA(),c.TgZ(5,"p"),c._uU(6),c.qZA(),c._UZ(7,"img",1),c.TgZ(8,"button",2),c.NdJ("click",function(){const u=c.CHM(t).$implicit;return c.oxw().processOrder(u.itemId)}),c._uU(9,"Order!"),c.qZA()()}if(2&n){const t=e.$implicit;c.xp6(2),c.hij("Name: ",t.name,""),c.xp6(2),c.hij("Description: ",t.description,""),c.xp6(2),c.hij("Cost: ",t.cost," $"),c.xp6(1),c.s9C("src",t.image,c.LSH)}}let tk=(()=>{class n{constructor(t,r,s,u){this.itemData=t,this.orderService=r,this.authData=s,this.datePipe=u,this.itemList=[]}getItems(){var t=this;return(0,ye.Z)(function*(){t.itemListP=yield t.itemData.getAllItems();for(let r=0;r<t.itemListP.length;r++){let s=new yd(t.itemListP[r].id,t.itemListP[r].name,t.itemListP[r].description,t.itemListP[r].cost,t.itemListP[r].image);t.itemList.push(s)}})()}ngOnInit(){this.getItems()}processOrder(t){for(let r=0;r<this.itemList.length;r++)if(this.itemList[r].itemId==t){let s=this.authData.getLoggedInUser(),u=this.datePipe.transform(new Date,"yyyy-MM-dd-hh:mm:ss");null!=s&&null!=u&&this.orderService.addOrder(new j_(s.username,u,this.itemList[r].itemId,this.itemList[r].name,this.itemList[r].cost))}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(NT),c.Y36(AC),c.Y36(Tc),c.Y36(Nc))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-browse"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"src"],[3,"click"]],template:function(t,r){1&t&&c.YNc(0,ek,10,4,"div",0),2&t&&c.Q6J("ngForOf",r.itemList)},directives:[Jn],styles:[""]}),n})(),nk=(()=>{class n{constructor(){this.title="Wedding Shop"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-main"]],decls:0,vars:0,template:function(t,r){},styles:[""]}),n})(),CM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),Sp=(()=>{class n extends CM{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const Qu=new c.OlP("NgValueAccessor"),sk={provide:Qu,useExisting:(0,c.Gpc)(()=>Tw),multi:!0},ak=new c.OlP("CompositionEventMode");let Tw=(()=>{class n extends CM{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ok(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(ak,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[c._Bn([sk]),c.qOj]}),n})();const zi=new c.OlP("NgValidators"),yh=new c.OlP("NgAsyncValidators");function SM(n){return function _h(n){return null==n||0===n.length}(n.value)?{required:!0}:null}function SC(n){return null}function NM(n){return null!=n}function PM(n){const e=(0,c.QGY)(n)?(0,Dn.D)(n):n;return(0,c.CqO)(e),e}function FM(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function LM(n,e){return e.map(t=>t(n))}function VM(n){return n.map(e=>function lk(n){return!n.validate}(e)?e:t=>e.validate(t))}function PT(n){return null!=n?function UM(n){if(!n)return null;const e=n.filter(NM);return 0==e.length?null:function(t){return FM(LM(t,e))}}(VM(n)):null}function FT(n){return null!=n?function BM(n){if(!n)return null;const e=n.filter(NM);return 0==e.length?null:function(t){return function rk(...n){const e=(0,xn.jO)(n),{args:t,keys:r}=vi(n),s=new _r.y(u=>{const{length:h}=t;if(!h)return void u.complete();const m=new Array(h);let w=h,b=h;for(let x=0;x<h;x++){let O=!1;(0,Ls.Xf)(t[x]).subscribe((0,gn.x)(u,U=>{O||(O=!0,b--),m[x]=U},()=>w--,void 0,()=>{(!w||!O)&&(b||u.next(r?uo(r,m):m),u.complete())}))}});return e?s.pipe(Kc(e)):s}(LM(t,e).map(PM)).pipe((0,Pt.U)(FM))}}(VM(n)):null}function jM(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function LT(n){return n?Array.isArray(n)?n:[n]:[]}function MC(n,e){return Array.isArray(n)?n.includes(e):n===e}function GM(n,e){const t=LT(e);return LT(n).forEach(s=>{MC(t,s)||t.push(s)}),t}function zM(n,e){return LT(e).filter(t=>!MC(n,t))}class qM{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=PT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=FT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class vh extends qM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class _s extends qM{get formDirective(){return null}get path(){return null}}class WM{constructor(e){this._cd=e}is(e){var t,r,s;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(s=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===s?void 0:s[e])}}let VT=(()=>{class n extends WM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(vh,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[c.qOj]}),n})(),UT=(()=>{class n extends WM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(_s,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[c.qOj]}),n})();function Aw(n,e){HT(n,e),e.valueAccessor.writeValue(n.value),function _k(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&KM(n,e)})}(n,e),function vk(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function yk(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&KM(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function mk(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function kC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function HT(n,e){const t=function HM(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(jM(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function $M(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(jM(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();kC(e._rawValidators,s),kC(e._rawAsyncValidators,s)}function KM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function zT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Sw="VALID",PC="INVALID",Ym="PENDING",Mw="DISABLED";function WT(n){return(FC(n)?n.validators:n)||null}function XM(n){return Array.isArray(n)?PT(n):n||null}function ZT(n,e){return(FC(e)?e.asyncValidators:n)||null}function ex(n){return Array.isArray(n)?FT(n):n||null}function FC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const KT=n=>n instanceof QT;function nx(n){return(n=>n instanceof sx)(n)?n.value:n.getRawValue()}function rx(n,e){const t=KT(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[e])throw new c.vHH(1001,"")}function ix(n,e){KT(n),n._forEachChild((r,s)=>{if(void 0===e[s])throw new c.vHH(1002,"")})}class YT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=XM(this._rawValidators),this._composedAsyncValidatorFn=ex(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Sw}get invalid(){return this.status===PC}get pending(){return this.status==Ym}get disabled(){return this.status===Mw}get enabled(){return this.status!==Mw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=XM(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ex(e)}addValidators(e){this.setValidators(GM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(GM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(zM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(zM(e,this._rawAsyncValidators))}hasValidator(e){return MC(this._rawValidators,e)}hasAsyncValidator(e){return MC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ym,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Mw,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Sw,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sw||this.status===Ym)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mw:Sw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ym,this._hasOwnPendingAsyncValidator=!0;const t=PM(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Ck(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(s=>{r=KT(r)?r.controls.hasOwnProperty(s)?r.controls[s]:null:(n=>n instanceof Ik)(r)&&r.at(s)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?Mw:this.errors?PC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ym)?Ym:this._anyControlsHaveStatus(PC)?PC:Sw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){FC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class sx extends YT{constructor(e=null,t,r){super(WT(t),ZT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),FC(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){zT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){zT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class QT extends YT{constructor(e,t,r){super(WT(t),ZT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ix(this,e),Object.keys(e).forEach(r=>{rx(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=nx(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Ik extends YT{constructor(e,t,r){super(WT(t),ZT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){ix(this,e),e.forEach((r,s)=>{rx(this,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>nx(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Tk={provide:_s,useExisting:(0,c.Gpc)(()=>Rw)},xw=(()=>Promise.resolve(null))();let Rw=(()=>{class n extends _s{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new QT({},PT(t),FT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){xw.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Aw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){xw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){xw.then(()=>{const r=this._findContainer(t.path),s=new QT({});(function YM(n,e){HT(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){xw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){xw.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function JM(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(zi,10),c.Y36(yh,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([Tk]),c.qOj]}),n})();const Sk={provide:vh,useExisting:(0,c.Gpc)(()=>LC)},ux=(()=>Promise.resolve(null))();let LC=(()=>{class n extends vh{constructor(t,r,s,u,h){super(),this._changeDetectorRef=h,this.control=new sx,this._registered=!1,this.update=new c.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function GT(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===Tw?t=u:function Dk(n){return Object.getPrototypeOf(n.constructor)===Sp}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function $T(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Aw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){ux.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=""===r||r&&"false"!==r;ux.then(()=>{var u;s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function RC(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(_s,9),c.Y36(zi,10),c.Y36(yh,10),c.Y36(Qu,10),c.Y36(c.sBO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([Sk]),c.qOj,c.TTD]}),n})(),JT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Mk={provide:Qu,useExisting:(0,c.Gpc)(()=>XT),multi:!0};let XT=(()=>{class n extends Sp{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[c._Bn([Mk]),c.qOj]}),n})(),lx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),Mp=(()=>{class n{constructor(){this._validator=SC}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):SC,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();const Wk={provide:zi,useExisting:(0,c.Gpc)(()=>Ow),multi:!0};let Ow=(()=>{class n extends Mp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function Gk(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>SM}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([Wk]),c.qOj]}),n})(),Xk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[lx]]}),n})(),eN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Xk]}),n})();function tN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div")(1,"form",2,3),c.NdJ("ngSubmit",function(){c.CHM(t);const s=c.MAs(2);return c.oxw(2).onSubmit(s)}),c.TgZ(3,"div",4)(4,"label",5),c._uU(5,"User Name: "),c.qZA(),c.TgZ(6,"input",6),c.NdJ("ngModelChange",function(s){return c.CHM(t),c.oxw(2).model.username=s}),c.qZA()(),c.TgZ(7,"div",4)(8,"label",7),c._uU(9,"Password: "),c.qZA(),c.TgZ(10,"input",8),c.NdJ("ngModelChange",function(s){return c.CHM(t),c.oxw(2).model.password=s}),c.qZA()(),c.TgZ(11,"div",4),c._UZ(12,"input",9),c.qZA()()()}if(2&n){const t=c.oxw(2);c.xp6(6),c.Q6J("ngModel",t.model.username),c.xp6(4),c.Q6J("ngModel",t.model.password)}}function nN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div")(1,"form",2,10),c.NdJ("ngSubmit",function(){c.CHM(t);const s=c.MAs(2);return c.oxw(2).onSubmitRegister(s)}),c.TgZ(3,"div",4)(4,"label",5),c._uU(5,"User Name: "),c.qZA(),c.TgZ(6,"input",6),c.NdJ("ngModelChange",function(s){return c.CHM(t),c.oxw(2).model.username=s}),c.qZA()(),c.TgZ(7,"div",4)(8,"label",11),c._uU(9,"Email: "),c.qZA(),c.TgZ(10,"input",12),c.NdJ("ngModelChange",function(s){return c.CHM(t),c.oxw(2).model.email=s}),c.qZA()(),c.TgZ(11,"div",4)(12,"label",7),c._uU(13,"Password: "),c.qZA(),c.TgZ(14,"input",8),c.NdJ("ngModelChange",function(s){return c.CHM(t),c.oxw(2).model.password=s}),c.qZA()(),c.TgZ(15,"div",4)(16,"label",13),c._uU(17,"Post code: "),c.qZA(),c.TgZ(18,"input",14),c.NdJ("ngModelChange",function(s){return c.CHM(t),c.oxw(2).model.postCode=s}),c.qZA()(),c.TgZ(19,"div",4)(20,"label",15),c._uU(21,"City: "),c.qZA(),c.TgZ(22,"input",16),c.NdJ("ngModelChange",function(s){return c.CHM(t),c.oxw(2).model.city=s}),c.qZA()(),c.TgZ(23,"div",4)(24,"label",17),c._uU(25,"Country: "),c.qZA(),c.TgZ(26,"input",18),c.NdJ("ngModelChange",function(s){return c.CHM(t),c.oxw(2).model.country=s}),c.qZA()(),c.TgZ(27,"div",4)(28,"label",19),c._uU(29,"Address: "),c.qZA(),c.TgZ(30,"input",20),c.NdJ("ngModelChange",function(s){return c.CHM(t),c.oxw(2).model.address=s}),c.qZA()(),c.TgZ(31,"div",4),c._UZ(32,"input",21),c.qZA()()()}if(2&n){const t=c.oxw(2);c.xp6(6),c.Q6J("ngModel",t.model.username),c.xp6(4),c.Q6J("ngModel",t.model.email),c.xp6(4),c.Q6J("ngModel",t.model.password),c.xp6(4),c.Q6J("ngModel",t.model.postCode),c.xp6(4),c.Q6J("ngModel",t.model.city),c.xp6(4),c.Q6J("ngModel",t.model.country),c.xp6(4),c.Q6J("ngModel",t.model.address)}}function rN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div")(1,"button",1),c.NdJ("click",function(){return c.CHM(t),c.oxw().switchView()}),c._uU(2),c.qZA(),c.YNc(3,tN,13,2,"div",0),c.YNc(4,nN,33,7,"div",0),c.qZA()}if(2&n){const t=c.oxw();c.xp6(2),c.Oqu(t.switchButtonText),c.xp6(1),c.Q6J("ngIf",t.isLogin),c.xp6(1),c.Q6J("ngIf",!t.isLogin)}}function iN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div")(1,"form",2,22),c.NdJ("ngSubmit",function(){c.CHM(t);const s=c.MAs(2);return c.oxw().onSubmitModify(s)}),c.TgZ(3,"div",4)(4,"label",5),c._uU(5,"User Name: "),c.qZA(),c.TgZ(6,"input",6),c.NdJ("ngModelChange",function(s){return c.CHM(t),c.oxw().model.username=s}),c.qZA()(),c.TgZ(7,"div",4)(8,"label",11),c._uU(9,"Email: "),c.qZA(),c.TgZ(10,"input",12),c.NdJ("ngModelChange",function(s){return c.CHM(t),c.oxw().model.email=s}),c.qZA()(),c.TgZ(11,"div",4)(12,"label",7),c._uU(13,"Password: "),c.qZA(),c.TgZ(14,"input",8),c.NdJ("ngModelChange",function(s){return c.CHM(t),c.oxw().model.password=s}),c.qZA()(),c.TgZ(15,"div",4)(16,"label",13),c._uU(17,"Post code: "),c.qZA(),c.TgZ(18,"input",14),c.NdJ("ngModelChange",function(s){return c.CHM(t),c.oxw().model.postCode=s}),c.qZA()(),c.TgZ(19,"div",4)(20,"label",15),c._uU(21,"City: "),c.qZA(),c.TgZ(22,"input",16),c.NdJ("ngModelChange",function(s){return c.CHM(t),c.oxw().model.city=s}),c.qZA()(),c.TgZ(23,"div",4)(24,"label",17),c._uU(25,"Country: "),c.qZA(),c.TgZ(26,"input",18),c.NdJ("ngModelChange",function(s){return c.CHM(t),c.oxw().model.country=s}),c.qZA()(),c.TgZ(27,"div",4)(28,"label",19),c._uU(29,"Address: "),c.qZA(),c.TgZ(30,"input",20),c.NdJ("ngModelChange",function(s){return c.CHM(t),c.oxw().model.address=s}),c.qZA()(),c.TgZ(31,"div",4),c._UZ(32,"input",23),c.qZA()()()}if(2&n){const t=c.oxw();c.xp6(6),c.Q6J("ngModel",t.model.username),c.xp6(4),c.Q6J("ngModel",t.model.email),c.xp6(4),c.Q6J("ngModel",t.model.password),c.xp6(4),c.Q6J("ngModel",t.model.postCode),c.xp6(4),c.Q6J("ngModel",t.model.city),c.xp6(4),c.Q6J("ngModel",t.model.country),c.xp6(4),c.Q6J("ngModel",t.model.address)}}let sN=(()=>{class n{constructor(t,r){this.router=t,this.authData=r,this.model=new Iw("username","password","name@domain.com",!0,"postcode","city","country","address"),this.isLogin=!0,this.switchButtonText="Register"}ngOnInit(){null!=this.authData.getLoggedInUser()&&(this.model=this.authData.getLoggedInUser())}onSubmit(t){let s=new Iw("","eqfguqgWEFWQQ3542545__:?_?_:?_wwegiq","",!1,"","","","");this.authData.getUserByUserName(t.value.username).then(u=>{null!==u&&(s=u),null!==s?s.password==t.value.password?(this.authData.setLoggedInUser(s),console.log("login success"),this.router.navigate(["/main"])):console.log("password is wrong"):console.log("user is null")})}onSubmitRegister(t){this.authData.addUser(new Iw(t.value.username,t.value.password,t.value.email,!1,t.value.postcode,t.value.city,t.value.country,t.value.address)).then(r=>{r&&this.switchView()})}onSubmitModify(t){console.log(this.model),console.log(this.authData.getLoggedInUser().uid),this.authData.modifyUser(this.authData.getLoggedInUser().uid,this.model.username,this.model.postCode,this.model.password,this.model.email,this.model.country,this.model.city,this.model.address)}switchView(){this.isLogin=!this.isLogin,this.switchButtonText=this.isLogin?"Register":"Login"}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Xn),c.Y36(Tc))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-auth"]],decls:3,vars:2,consts:[[4,"ngIf"],[3,"click"],[3,"ngSubmit"],["authForm","ngForm"],[1,"form-group"],["for","username"],["type","text","id","username","required","","name","username",1,"form-control",3,"ngModel","ngModelChange"],["for","password"],["type","password","id","password","required","","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","value","Login"],["registerForm","ngForm"],["for","email"],["type","email","id","email","required","","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","postcode"],["type","text","id","postcode","required","","name","postcode",1,"form-control",3,"ngModel","ngModelChange"],["for","city"],["type","text","id","city","required","","name","city",1,"form-control",3,"ngModel","ngModelChange"],["for","country"],["type","text","id","country","required","","name","country",1,"form-control",3,"ngModel","ngModelChange"],["for","address"],["type","text","id","address","required","","name","address",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","value","Register"],["modifyForm","ngForm"],["type","submit","value","Modify"]],template:function(t,r){1&t&&(c.TgZ(0,"div"),c.YNc(1,rN,5,3,"div",0),c.YNc(2,iN,33,7,"div",0),c.qZA()),2&t&&(c.xp6(1),c.Q6J("ngIf",null==r.authData.getLoggedInUser()),c.xp6(1),c.Q6J("ngIf",null!=r.authData.getLoggedInUser()))},directives:[Mr,JT,UT,Rw,Tw,Ow,VT,LC],styles:[""]}),n})();function VC(n){return null!=n&&"false"!=`${n}`}function sA(n){return n&&"function"==typeof n.connect}class Ax{applyChanges(e,t,r,s,u){e.forEachOperation((h,m,w)=>{let b,x;if(null==h.previousIndex){const O=r(h,m,w);b=t.createEmbeddedView(O.templateRef,O.context,O.index),x=1}else null==w?(t.remove(m),x=3):(b=t.get(m),t.move(b,w),x=2);u&&u({context:null==b?void 0:b.context,operation:x,record:h})})}detach(){}}const kw=new c.OlP("_ViewRepeater");var uN=N(5032);function Nw(n){return(0,ur.e)((e,t)=>{(0,Ls.Xf)(n).subscribe((0,gn.x)(t,()=>t.complete(),uN.Z)),!t.closed&&e.subscribe(t)})}const lN=new c.OlP("cdk-dir-doc",{providedIn:"root",factory:function cN(){return(0,c.f3M)(ie)}}),dN=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let oA,fN=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new c.vpe,t){const s=t.documentElement?t.documentElement.dir:null;this.value=function hN(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?dN.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||s||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(lN,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();try{oA="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){oA=!1}let aA=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function xr(n){return n===Ts}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!oA)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var xx=N(4408);const Fw={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Fw;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const s=e(u=>{t=void 0,n(u)});return new $o.w0(()=>null==t?void 0:t(s))},requestAnimationFrame(...n){const{delegate:e}=Fw;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Fw;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var Rx=N(7565);new class yN extends Rx.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let s;e=e||r.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,s){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw s}}}(class _N extends xx.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Fw.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(s=>s.id===t)||(Fw.cancelAnimationFrame(t),e._scheduled=void 0)}});let cA,wN=1;const jC={};function Ox(n){return n in jC&&(delete jC[n],!0)}const EN={setImmediate(n){const e=wN++;return jC[e]=!0,cA||(cA=Promise.resolve()),cA.then(()=>Ox(e)&&n()),e},clearImmediate(n){Ox(n)}},{setImmediate:DN,clearImmediate:CN}=EN,HC={setImmediate(...n){const{delegate:e}=HC;return((null==e?void 0:e.setImmediate)||DN)(...n)},clearImmediate(n){const{delegate:e}=HC;return((null==e?void 0:e.clearImmediate)||CN)(n)},delegate:void 0};new class IN extends Rx.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let s;e=e||r.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,s){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw s}}}(class bN extends xx.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=HC.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(s=>s.id===t)||(HC.clearImmediate(t),e._scheduled=void 0)}});var SN=N(3532);function RN(n,e=H_.z){return function AN(n){return(0,ur.e)((e,t)=>{let r=!1,s=null,u=null,h=!1;const m=()=>{if(null==u||u.unsubscribe(),u=null,r){r=!1;const b=s;s=null,t.next(b)}h&&t.complete()},w=()=>{u=null,h&&t.complete()};e.subscribe((0,gn.x)(t,b=>{r=!0,s=b,u||(0,Ls.Xf)(n(b)).subscribe(u=(0,gn.x)(t,m,w))},()=>{h=!0,(!r||!u||u.closed)&&t.complete()}))})}(()=>function xN(n=0,e,t=H_.P){let r=-1;return null!=e&&((0,SN.K)(e)?t=e:r=e),new _r.y(s=>{let u=function MN(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let h=0;return t.schedule(function(){s.closed||(s.next(h++),0<=r?this.schedule(void 0,r):s.complete())},u)})}(n,e))}let kN=(()=>{class n{constructor(t,r,s){this._platform=t,this._change=new Fn.x,this._changeListener=u=>{this._change.next(u)},this._document=s,r.runOutsideAngular(()=>{if(t.isBrowser){const u=this._getWindow();u.addEventListener("resize",this._changeListener),u.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+s,right:t.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),s=t.documentElement,u=s.getBoundingClientRect();return{top:-u.top||t.body.scrollTop||r.scrollY||s.scrollTop||0,left:-u.left||t.body.scrollLeft||r.scrollX||s.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(RN(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(aA),c.LFG(c.R0b),c.LFG(ie,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),NN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[UC,kx],UC,kx]}),n})();const PN=[[["caption"]],[["colgroup"],["col"]]],FN=["caption","colgroup, col"];function dA(n){return class extends n{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=VC(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const Jm=new c.OlP("CDK_TABLE");let Xm=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkCellDef",""]]}),n})(),e_=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),$C=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class BN{}const jN=dA(BN);let Ac=(()=>{class n extends jN{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const r=this._stickyEnd;this._stickyEnd=VC(t),this._hasStickyChanged=r!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Jm,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,r,s){if(1&t&&(c.Suo(s,Xm,5),c.Suo(s,e_,5),c.Suo(s,$C,5)),2&t){let u;c.iGM(u=c.CRH())&&(r.cell=u.first),c.iGM(u=c.CRH())&&(r.headerCell=u.first),c.iGM(u=c.CRH())&&(r.footerCell=u.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[c._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),c.qOj]}),n})();class hA{constructor(e,t){t.nativeElement.classList.add(...e._columnCssClassName)}}let fA=(()=>{class n extends hA{constructor(t,r){super(t,r)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ac),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[c.qOj]}),n})(),pA=(()=>{class n extends hA{constructor(t,r){var s;if(super(t,r),1===(null===(s=t._table)||void 0===s?void 0:s._elementRef.nativeElement.nodeType)){const u=t._table._elementRef.nativeElement.getAttribute("role");r.nativeElement.setAttribute("role","grid"===u||"treegrid"===u?"gridcell":"cell")}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ac),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[c.qOj]}),n})();class Px{constructor(){this.tasks=[],this.endTasks=[]}}const gA=new c.OlP("_COALESCED_STYLE_SCHEDULER");let Fx=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new Fn.x}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new Px,this._getScheduleObservable().pipe(Nw(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new Px;for(const r of t.tasks)r();for(const r of t.endTasks)r()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,Dn.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe((0,Vs.q)(1))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),mA=(()=>{class n{constructor(t,r){this.template=t,this._differs=r}ngOnChanges(t){if(!this._columnsDiffer){const r=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(r).create(),this._columnsDiffer.diff(r)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof Lw?t.headerCell.template:this instanceof Vw?t.footerCell.template:t.cell.template}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();class HN extends mA{}const $N=dA(HN);let Lw=(()=>{class n extends $N{constructor(t,r,s){super(t,r),this._table=s}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc),c.Y36(c.ZZ4),c.Y36(Jm,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[c.qOj,c.TTD]}),n})();class GN extends mA{}const zN=dA(GN);let Vw=(()=>{class n extends zN{constructor(t,r,s){super(t,r),this._table=s}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc),c.Y36(c.ZZ4),c.Y36(Jm,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[c.qOj,c.TTD]}),n})(),GC=(()=>{class n extends mA{constructor(t,r,s){super(t,r),this._table=s}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc),c.Y36(c.ZZ4),c.Y36(Jm,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[c.qOj]}),n})(),Sc=(()=>{class n{constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),_A=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,r){1&t&&c.GkF(0,0)},directives:[Sc],encapsulation:2}),n})(),vA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,r){1&t&&c.GkF(0,0)},directives:[Sc],encapsulation:2}),n})(),zC=(()=>{class n{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const Lx=["top","bottom","left","right"];class qN{constructor(e,t,r,s,u=!0,h=!0,m){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=r,this._coalescedStyleScheduler=s,this._isBrowser=u,this._needsPositionStickyOnElement=h,this._positionListener=m,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const r=[];for(const s of e)if(s.nodeType===s.ELEMENT_NODE){r.push(s);for(let u=0;u<s.children.length;u++)r.push(s.children[u])}this._coalescedStyleScheduler.schedule(()=>{for(const s of r)this._removeStickyStyle(s,t)})}updateStickyColumns(e,t,r,s=!0){if(!e.length||!this._isBrowser||!t.some(U=>U)&&!r.some(U=>U))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const u=e[0],h=u.children.length,m=this._getCellWidths(u,s),w=this._getStickyStartColumnPositions(m,t),b=this._getStickyEndColumnPositions(m,r),x=t.lastIndexOf(!0),O=r.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const U="rtl"===this.direction,K=U?"right":"left",le=U?"left":"right";for(const Oe of e)for(let qe=0;qe<h;qe++){const Ut=Oe.children[qe];t[qe]&&this._addStickyStyle(Ut,K,w[qe],qe===x),r[qe]&&this._addStickyStyle(Ut,le,b[qe],qe===O)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===x?[]:m.slice(0,x+1).map((Oe,qe)=>t[qe]?Oe:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===O?[]:m.slice(O).map((Oe,qe)=>r[qe+O]?Oe:null).reverse()}))})}stickRows(e,t,r){if(!this._isBrowser)return;const s="bottom"===r?e.slice().reverse():e,u="bottom"===r?t.slice().reverse():t,h=[],m=[],w=[];for(let x=0,O=0;x<s.length;x++){if(!u[x])continue;h[x]=O;const U=s[x];w[x]=this._isNativeHtmlTable?Array.from(U.children):[U];const K=U.getBoundingClientRect().height;O+=K,m[x]=K}const b=u.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{var x,O;for(let U=0;U<s.length;U++){if(!u[U])continue;const K=h[U],le=U===b;for(const Oe of w[U])this._addStickyStyle(Oe,r,K,le)}"top"===r?null===(x=this._positionListener)||void 0===x||x.stickyHeaderRowsUpdated({sizes:m,offsets:h,elements:w}):null===(O=this._positionListener)||void 0===O||O.stickyFooterRowsUpdated({sizes:m,offsets:h,elements:w})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const r=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(s=>!s)?this._removeStickyStyle(r,["bottom"]):this._addStickyStyle(r,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const s of t)e.style[s]="",e.classList.remove(this._borderCellCss[s]);Lx.some(s=>-1===t.indexOf(s)&&e.style[s])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,r,s){e.classList.add(this._stickCellCss),s&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${r}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let r=0;for(const s of Lx)e.style[s]&&(r+=t[s]);return r?`${r}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const r=[],s=e.children;for(let u=0;u<s.length;u++)r.push(s[u].getBoundingClientRect().width);return this._cachedCellWidths=r,r}_getStickyStartColumnPositions(e,t){const r=[];let s=0;for(let u=0;u<e.length;u++)t[u]&&(r[u]=s,s+=e[u]);return r}_getStickyEndColumnPositions(e,t){const r=[];let s=0;for(let u=e.length;u>0;u--)t[u]&&(r[u]=s,s+=e[u]);return r}}const wA=new c.OlP("CDK_SPL");let qC=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","rowOutlet",""]]}),n})(),WC=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),ZC=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),KC=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),YC=(()=>{class n{constructor(t,r,s,u,h,m,w,b,x,O,U,K){this._differs=t,this._changeDetectorRef=r,this._elementRef=s,this._dir=h,this._platform=w,this._viewRepeater=b,this._coalescedStyleScheduler=x,this._viewportRuler=O,this._stickyPositioningListener=U,this._ngZone=K,this._onDestroy=new Fn.x,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new c.vpe,this.viewChange=new Rr({start:0,end:Number.MAX_VALUE}),u||this._elementRef.nativeElement.setAttribute("role","table"),this._document=m,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=VC(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=VC(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,r)=>this.trackBy?this.trackBy(r.dataIndex,r.data):r),this._viewportRuler.change().pipe(Nw(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const r=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||r,this._forceRecalculateCellWidths=r,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),sA(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const r=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,r,(s,u,h)=>this._getEmbeddedViewArgs(s.item,h),s=>s.item.data,s=>{1===s.operation&&s.context&&this._renderCellTemplateForItem(s.record.item.rowDef,s.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(s=>{r.get(s.currentIndex).context.$implicit=s.item.data}),this._updateNoDataRow(),this._ngZone&&c.R0b.isInAngularZone()?this._ngZone.onStable.pipe((0,Vs.q)(1),Nw(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),s=this._elementRef.nativeElement.querySelector("thead");s&&(s.style.display=t.length?"":"none");const u=this._headerRowDefs.map(h=>h.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,u,"top"),this._headerRowDefs.forEach(h=>h.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),s=this._elementRef.nativeElement.querySelector("tfoot");s&&(s.style.display=t.length?"":"none");const u=this._footerRowDefs.map(h=>h.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,u,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,u),this._footerRowDefs.forEach(h=>h.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),r=this._getRenderedRows(this._rowOutlet),s=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...r,...s],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((u,h)=>{this._addStickyColumnStyles([u],this._headerRowDefs[h])}),this._rowDefs.forEach(u=>{const h=[];for(let m=0;m<r.length;m++)this._renderRows[m].rowDef===u&&h.push(r[m]);this._addStickyColumnStyles(h,u)}),s.forEach((u,h)=>{this._addStickyColumnStyles([u],this._footerRowDefs[h])}),Array.from(this._columnDefsByName.values()).forEach(u=>u.resetStickyChanged())}_getAllRenderRows(){const t=[],r=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let s=0;s<this._data.length;s++){let u=this._data[s];const h=this._getRenderRowsForData(u,s,r.get(u));this._cachedRenderRowsMap.has(u)||this._cachedRenderRowsMap.set(u,new WeakMap);for(let m=0;m<h.length;m++){let w=h[m];const b=this._cachedRenderRowsMap.get(w.data);b.has(w.rowDef)?b.get(w.rowDef).push(w):b.set(w.rowDef,[w]),t.push(w)}}return t}_getRenderRowsForData(t,r,s){return this._getRowDefs(t,r).map(h=>{const m=s&&s.has(h)?s.get(h):[];if(m.length){const w=m.shift();return w.dataIndex=r,w}return{data:t,rowDef:h,dataIndex:r}})}_cacheColumnDefs(){this._columnDefsByName.clear(),QC(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(r=>{this._columnDefsByName.has(r.name),this._columnDefsByName.set(r.name,r)})}_cacheRowDefs(){this._headerRowDefs=QC(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=QC(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=QC(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(r=>!r.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(h,m)=>h||!!m.getColumnsDiff(),r=this._rowDefs.reduce(t,!1);r&&this._forceRenderDataRows();const s=this._headerRowDefs.reduce(t,!1);s&&this._forceRenderHeaderRows();const u=this._footerRowDefs.reduce(t,!1);return u&&this._forceRenderFooterRows(),r||s||u}_switchDataSource(t){this._data=[],sA(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;sA(this.dataSource)?t=this.dataSource.connect(this):function aN(n){return!!n&&(n instanceof _r.y||(0,lo.m)(n.lift)&&(0,lo.m)(n.subscribe))}(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=ft(this.dataSource)),this._renderChangeSubscription=t.pipe(Nw(this._onDestroy)).subscribe(r=>{this._data=r||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,r)=>this._renderRow(this._headerRowOutlet,t,r)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,r)=>this._renderRow(this._footerRowOutlet,t,r)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,r){const s=Array.from(r.columns||[]).map(m=>this._columnDefsByName.get(m)),u=s.map(m=>m.sticky),h=s.map(m=>m.stickyEnd);this._stickyStyler.updateStickyColumns(t,u,h,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const r=[];for(let s=0;s<t.viewContainer.length;s++){const u=t.viewContainer.get(s);r.push(u.rootNodes[0])}return r}_getRowDefs(t,r){if(1==this._rowDefs.length)return[this._rowDefs[0]];let s=[];if(this.multiTemplateDataRows)s=this._rowDefs.filter(u=>!u.when||u.when(r,t));else{let u=this._rowDefs.find(h=>h.when&&h.when(r,t))||this._defaultRowDef;u&&s.push(u)}return s}_getEmbeddedViewArgs(t,r){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:r}}_renderRow(t,r,s,u={}){const h=t.viewContainer.createEmbeddedView(r.template,u,s);return this._renderCellTemplateForItem(r,u),h}_renderCellTemplateForItem(t,r){for(let s of this._getCellTemplates(t))Sc.mostRecentCellOutlet&&Sc.mostRecentCellOutlet._viewContainer.createEmbeddedView(s,r);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let r=0,s=t.length;r<s;r++){const h=t.get(r).context;h.count=s,h.first=0===r,h.last=r===s-1,h.even=r%2==0,h.odd=!h.even,this.multiTemplateDataRows?(h.dataIndex=this._renderRows[r].dataIndex,h.renderIndex=r):h.index=this._renderRows[r].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,r=>{const s=this._columnDefsByName.get(r);return t.extractCellTemplate(s)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),r=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const s of r){const u=this._document.createElement(s.tag);u.setAttribute("role","rowgroup");for(const h of s.outlets)u.appendChild(h.elementRef.nativeElement);t.appendChild(u)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(r,s)=>r||s.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new qN(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:ft()).pipe(Nw(this._onDestroy)).subscribe(r=>{this._stickyStyler.direction=r,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(r=>!r._table||r._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(!t)return;const r=0===this._rowOutlet.viewContainer.length;if(r===this._isShowingNoDataRow)return;const s=this._noDataRowOutlet.viewContainer;if(r){const u=s.createEmbeddedView(t.templateRef),h=u.rootNodes[0];1===u.rootNodes.length&&(null==h?void 0:h.nodeType)===this._document.ELEMENT_NODE&&(h.setAttribute("role","row"),h.classList.add(t._contentClassName))}else s.clear();this._isShowingNoDataRow=r}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.sBO),c.Y36(c.SBq),c.$8M("role"),c.Y36(fN,8),c.Y36(ie),c.Y36(aA),c.Y36(kw),c.Y36(gA),c.Y36(kN),c.Y36(wA,12),c.Y36(c.R0b,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,r,s){if(1&t&&(c.Suo(s,zC,5),c.Suo(s,Ac,5),c.Suo(s,GC,5),c.Suo(s,Lw,5),c.Suo(s,Vw,5)),2&t){let u;c.iGM(u=c.CRH())&&(r._noDataRow=u.first),c.iGM(u=c.CRH())&&(r._contentColumnDefs=u),c.iGM(u=c.CRH())&&(r._contentRowDefs=u),c.iGM(u=c.CRH())&&(r._contentHeaderRowDefs=u),c.iGM(u=c.CRH())&&(r._contentFooterRowDefs=u)}},viewQuery:function(t,r){if(1&t&&(c.Gf(qC,7),c.Gf(WC,7),c.Gf(ZC,7),c.Gf(KC,7)),2&t){let s;c.iGM(s=c.CRH())&&(r._rowOutlet=s.first),c.iGM(s=c.CRH())&&(r._headerRowOutlet=s.first),c.iGM(s=c.CRH())&&(r._footerRowOutlet=s.first),c.iGM(s=c.CRH())&&(r._noDataRowOutlet=s.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(t,r){2&t&&c.ekj("cdk-table-fixed-layout",r.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[c._Bn([{provide:Jm,useExisting:n},{provide:kw,useClass:Ax},{provide:gA,useClass:Fx},{provide:wA,useValue:null}])],ngContentSelectors:FN,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,r){1&t&&(c.F$t(PN),c.Hsn(0),c.Hsn(1,1),c.GkF(2,0)(3,1)(4,2)(5,3))},directives:[WC,qC,KC,ZC],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})();function QC(n,e){return n.concat(Array.from(e))}let ZN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[NN]]}),n})();const $x="cdk-high-contrast-black-on-white",Gx="cdk-high-contrast-white-on-black",EA="cdk-high-contrast-active";let l1=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(t):null,u=(s&&s.backgroundColor||"").replace(/ /g,"");switch(t.remove(),u){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(EA),t.remove($x),t.remove(Gx),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(EA),t.add($x)):2===r&&(t.add(EA),t.add(Gx))}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(aA),c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const d1=new c.OlP("mat-sanity-checks",{providedIn:"root",factory:function c1(){return!0}});let qx=(()=>{class n{constructor(t,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function mN(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(l1),c.LFG(d1,8),c.LFG(ie))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[UC],UC]}),n})();const _1=[[["caption"]],[["colgroup"],["col"]]],y1=["caption","colgroup, col"];let Bw=(()=>{class n extends YC{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(t,r){2&t&&c.ekj("mat-table-fixed-layout",r.fixedLayout)},exportAs:["matTable"],features:[c._Bn([{provide:kw,useClass:Ax},{provide:YC,useExisting:n},{provide:Jm,useExisting:n},{provide:gA,useClass:Fx},{provide:wA,useValue:null}]),c.qOj],ngContentSelectors:y1,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,r){1&t&&(c.F$t(_1),c.Hsn(0),c.Hsn(1,1),c.GkF(2,0)(3,1)(4,2)(5,3))},directives:[WC,qC,KC,ZC],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})(),JC=(()=>{class n extends Xm{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matCellDef",""]],features:[c._Bn([{provide:Xm,useExisting:n}]),c.qOj]}),n})(),XC=(()=>{class n extends e_{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matHeaderCellDef",""]],features:[c._Bn([{provide:e_,useExisting:n}]),c.qOj]}),n})(),eb=(()=>{class n extends Ac{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[c._Bn([{provide:Ac,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),c.qOj]}),n})(),tb=(()=>{class n extends fA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[c.qOj]}),n})(),nb=(()=>{class n extends pA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[c.qOj]}),n})(),CA=(()=>{class n extends Lw{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[c._Bn([{provide:Lw,useExisting:n}]),c.qOj]}),n})(),bA=(()=>{class n extends GC{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[c._Bn([{provide:GC,useExisting:n}]),c.qOj]}),n})(),IA=(()=>{class n extends _A{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[c._Bn([{provide:_A,useExisting:n}]),c.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,r){1&t&&c.GkF(0,0)},directives:[Sc],encapsulation:2}),n})(),TA=(()=>{class n extends vA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[c._Bn([{provide:vA,useExisting:n}]),c.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,r){1&t&&c.GkF(0,0)},directives:[Sc],encapsulation:2}),n})(),S1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ZN,qx],qx]}),n})();function x1(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div")(1,"button",10),c.NdJ("click",function(){return c.CHM(t),c.oxw().navigateToAllOrders()}),c._uU(2,"View all orders"),c.qZA()()}}function R1(n,e){1&n&&(c.TgZ(0,"th",11),c._uU(1," Username "),c.qZA())}function O1(n,e){if(1&n&&(c.TgZ(0,"td",12),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.hij(" ",t.username," ")}}function k1(n,e){1&n&&(c.TgZ(0,"th",11),c._uU(1," Date "),c.qZA())}function N1(n,e){if(1&n&&(c.TgZ(0,"td",12),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.hij(" ",t.orderDate," ")}}function P1(n,e){1&n&&(c.TgZ(0,"th",11),c._uU(1," Item name "),c.qZA())}function F1(n,e){if(1&n&&(c.TgZ(0,"td",12),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.hij(" ",t.orderedItemName," ")}}function L1(n,e){1&n&&(c.TgZ(0,"th",11),c._uU(1," Item cost "),c.qZA())}function V1(n,e){if(1&n&&(c.TgZ(0,"td",12),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.hij(" ",t.orderedItemCost," $")}}function U1(n,e){1&n&&c._UZ(0,"tr",13)}function B1(n,e){1&n&&c._UZ(0,"tr",14)}let j1=(()=>{class n{constructor(t,r,s){this.orderData=t,this.authData=r,this.router=s,this.columndefs=["username","date","itemname","itemcost"],this.orders=[]}getOrdersForUser(){var t=this;return(0,ye.Z)(function*(){null!=t.authData.getLoggedInUser()&&(yield t.orderData.getOrdersByUsername(t.authData.getLoggedInUser().username).then(r=>{for(let s=0;s<r.length;s++)t.orders.push(new j_(r[s].username,r[s].orderDate,r[s].orderedItemId,r[s].orderedItemName,r[s].orderedItemCost));t.table.renderRows()}))})()}navigateToAllOrders(){this.router.navigate(["adminorders"])}ngOnInit(){this.getOrdersForUser()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(AC),c.Y36(Tc),c.Y36(Xn))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-orders"]],viewQuery:function(t,r){if(1&t&&c.Gf(Bw,5),2&t){let s;c.iGM(s=c.CRH())&&(r.table=s.first)}},decls:16,vars:4,consts:[[4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","username"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","itemname"],["matColumnDef","itemcost"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,r){1&t&&(c.YNc(0,x1,3,0,"div",0),c.TgZ(1,"table",1),c.ynx(2,2),c.YNc(3,R1,2,0,"th",3),c.YNc(4,O1,2,1,"td",4),c.BQk(),c.ynx(5,5),c.YNc(6,k1,2,0,"th",3),c.YNc(7,N1,2,1,"td",4),c.BQk(),c.ynx(8,6),c.YNc(9,P1,2,0,"th",3),c.YNc(10,F1,2,1,"td",4),c.BQk(),c.ynx(11,7),c.YNc(12,L1,2,0,"th",3),c.YNc(13,V1,2,1,"td",4),c.BQk(),c.YNc(14,U1,1,0,"tr",8),c.YNc(15,B1,1,0,"tr",9),c.qZA()),2&t&&(c.Q6J("ngIf",null!=r.authData.getLoggedInUser()&&r.authData.getLoggedInUser().isAdmin),c.xp6(1),c.Q6J("dataSource",r.orders),c.xp6(13),c.Q6J("matHeaderRowDef",r.columndefs),c.xp6(1),c.Q6J("matRowDefColumns",r.columndefs))},directives:[Mr,Bw,eb,XC,tb,JC,nb,CA,IA,bA,TA],styles:[""]}),n})();function H1(n,e){1&n&&c._UZ(0,"img",12),2&n&&c.s9C("src",e.$implicit,c.LSH)}let $1=(()=>{class n{constructor(t){this.itemData=t,this.model=new yd("dummy","Example Item","Example Description",100,""),this.base64textString=[]}ngOnInit(){}onSubmit(t){this.itemData.addItem(new yd("dummy",t.value.name,t.value.description,t.value.cost,1==this.base64textString.length?this.base64textString[0]:"")),this.base64textString=[]}onUploadChange(t){const r=t.target.files[0];if(r){const s=new FileReader;s.onload=this.handleReaderLoaded.bind(this),s.readAsBinaryString(r)}}handleReaderLoaded(t){this.base64textString=[],this.base64textString.push("data:image/png;base64,"+btoa(t.target.result))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(NT))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-items"]],decls:18,vars:4,consts:[[3,"ngSubmit"],["addForm","ngForm"],[1,"form-group"],["for","name"],["type","text","id","name","required","","name","name",1,"form-control",3,"ngModel","ngModelChange"],["for","description"],["type","description","id","description","required","","name","description",1,"form-control",3,"ngModel","ngModelChange"],["for","cost"],["type","number","id","cost","required","","name","cost",1,"form-control",3,"ngModel","ngModelChange"],["type","file","accept",".png, .jpg, .jpeg",3,"change"],["alt","","id","img",3,"src",4,"ngFor","ngForOf"],["type","submit","value","Register Item"],["alt","","id","img",3,"src"]],template:function(t,r){if(1&t){const s=c.EpF();c.TgZ(0,"form",0,1),c.NdJ("ngSubmit",function(){c.CHM(s);const h=c.MAs(1);return r.onSubmit(h)}),c.TgZ(2,"div",2)(3,"label",3),c._uU(4,"Item Name: "),c.qZA(),c.TgZ(5,"input",4),c.NdJ("ngModelChange",function(h){return r.model.name=h}),c.qZA()(),c.TgZ(6,"div",2)(7,"label",5),c._uU(8,"Description: "),c.qZA(),c.TgZ(9,"input",6),c.NdJ("ngModelChange",function(h){return r.model.description=h}),c.qZA()(),c.TgZ(10,"div",2)(11,"label",7),c._uU(12,"Cost ($): "),c.qZA(),c.TgZ(13,"input",8),c.NdJ("ngModelChange",function(h){return r.model.cost=h}),c.qZA()(),c.TgZ(14,"input",9),c.NdJ("change",function(h){return r.onUploadChange(h)}),c.qZA(),c.YNc(15,H1,1,1,"img",10),c.TgZ(16,"div",2),c._UZ(17,"input",11),c.qZA()()}2&t&&(c.xp6(5),c.Q6J("ngModel",r.model.name),c.xp6(4),c.Q6J("ngModel",r.model.description),c.xp6(4),c.Q6J("ngModel",r.model.cost),c.xp6(2),c.Q6J("ngForOf",r.base64textString))},directives:[JT,UT,Rw,Tw,Ow,VT,LC,XT,Jn],styles:[".file-input[_ngcontent-%COMP%]{display:none}"]}),n})(),Yx=(()=>{class n{constructor(t,r){this.authData=t,this.router=r}canActivate(){var t;return!(null==this.authData.getLoggedInUser()||!(null===(t=this.authData.getLoggedInUser())||void 0===t?void 0:t.isAdmin))||(this.router.navigate(["auth"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Tc),c.LFG(Xn))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function G1(n,e){1&n&&(c.TgZ(0,"th",10),c._uU(1," Username "),c.qZA())}function z1(n,e){if(1&n&&(c.TgZ(0,"td",11),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.hij(" ",t.username," ")}}function q1(n,e){1&n&&(c.TgZ(0,"th",10),c._uU(1," Date "),c.qZA())}function W1(n,e){if(1&n&&(c.TgZ(0,"td",11),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.hij(" ",t.orderDate," ")}}function Z1(n,e){1&n&&(c.TgZ(0,"th",10),c._uU(1," Item name "),c.qZA())}function K1(n,e){if(1&n&&(c.TgZ(0,"td",11),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.hij(" ",t.orderedItemName," ")}}function Y1(n,e){1&n&&(c.TgZ(0,"th",10),c._uU(1," Item cost "),c.qZA())}function Q1(n,e){if(1&n&&(c.TgZ(0,"td",11),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.hij(" ",t.orderedItemCost," $")}}function J1(n,e){1&n&&(c.TgZ(0,"th",10),c._uU(1," Shipped? "),c.qZA())}function X1(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"td",11)(1,"button",12),c.NdJ("click",function(){const u=c.CHM(t).$implicit;return c.oxw().shippedOrder(u.id)}),c._uU(2,"Shipped"),c.qZA()()}}function eP(n,e){1&n&&c._UZ(0,"tr",13)}function tP(n,e){1&n&&c._UZ(0,"tr",14)}const nP=[{path:"",redirectTo:"/main",pathMatch:"full"},{path:"browse",component:tk},{path:"main",component:nk},{path:"auth",component:sN},{path:"orders",component:j1,canActivate:[(()=>{class n{constructor(t,r){this.authData=t,this.router=r}canActivate(){return null!=this.authData.getLoggedInUser()||(this.router.navigate(["auth"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Tc),c.LFG(Xn))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"items",component:$1,canActivate:[Yx]},{path:"adminorders",component:(()=>{class n{constructor(t,r,s){this.orderData=t,this.authData=r,this.router=s,this.columndefs=["username","date","itemname","itemcost","shipped"],this.orders=[]}getOrders(){var t=this;return(0,ye.Z)(function*(){null!=t.authData.getLoggedInUser()&&(t.orders=[],yield t.orderData.getOrders().then(r=>{for(let s=0;s<r.length;s++)t.orders.push(new j_(r[s].username,r[s].orderDate,r[s].orderedItemId,r[s].orderedItemName,r[s].orderedItemCost)),t.orders[s].setId(r[s].id);t.table.renderRows()}))})()}shippedOrder(t){this.orderData.deleteOrder(t),this.getOrders()}ngOnInit(){this.getOrders()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(AC),c.Y36(Tc),c.Y36(Xn))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-adminorders"]],viewQuery:function(t,r){if(1&t&&c.Gf(Bw,5),2&t){let s;c.iGM(s=c.CRH())&&(r.table=s.first)}},decls:18,vars:3,consts:[["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","username"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","itemname"],["matColumnDef","itemcost"],["matColumnDef","shipped"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,r){1&t&&(c.TgZ(0,"table",0),c.ynx(1,1),c.YNc(2,G1,2,0,"th",2),c.YNc(3,z1,2,1,"td",3),c.BQk(),c.ynx(4,4),c.YNc(5,q1,2,0,"th",2),c.YNc(6,W1,2,1,"td",3),c.BQk(),c.ynx(7,5),c.YNc(8,Z1,2,0,"th",2),c.YNc(9,K1,2,1,"td",3),c.BQk(),c.ynx(10,6),c.YNc(11,Y1,2,0,"th",2),c.YNc(12,Q1,2,1,"td",3),c.BQk(),c.ynx(13,7),c.YNc(14,J1,2,0,"th",2),c.YNc(15,X1,3,0,"td",3),c.BQk(),c.YNc(16,eP,1,0,"tr",8),c.YNc(17,tP,1,0,"tr",9),c.qZA()),2&t&&(c.Q6J("dataSource",r.orders),c.xp6(16),c.Q6J("matHeaderRowDef",r.columndefs),c.xp6(1),c.Q6J("matRowDefColumns",r.columndefs))},directives:[Bw,eb,XC,tb,JC,nb,CA,IA,bA,TA],styles:[""]}),n})(),canActivate:[Yx]}];let rP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[tf.forRoot(nP)],tf]}),n})();function iP(n,e){1&n&&(c.TgZ(0,"h1"),c._uU(1," Welcome to my wedding shop!"),c.qZA())}function sP(n,e){if(1&n&&(c.TgZ(0,"h1"),c._uU(1),c.qZA()),2&n){const t=c.oxw();let r;c.xp6(1),c.hij(" Welcome to my wedding shop, ",null==(r=t.authData.getLoggedInUser())?null:r.username,"")}}function oP(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div")(1,"button",9),c.NdJ("click",function(){return c.CHM(t),c.oxw().logout()}),c._uU(2,"Log out!"),c.qZA()()}}let aP=(()=>{class n{constructor(t,r){this.authData=t,this.router=r,this.title="Wedding Shop"}logout(){this.authData.logout(),this.router.navigate(["/main"])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Tc),c.Y36(Xn))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:38,vars:4,consts:[[1,"center"],[4,"ngIf"],[1,"containerBox"],["routerLink","/auth"],[1,"text-box"],["src","assets/images/flowery-bg.jpg",1,"img-responsive"],["routerLink","/browse"],["routerLink","/orders"],["routerLink","/items"],[3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"html")(1,"head")(2,"title"),c._uU(3),c.qZA()(),c.TgZ(4,"body")(5,"div",0),c.YNc(6,iP,2,0,"h1",1),c.YNc(7,sP,2,1,"h1",1),c.qZA(),c.YNc(8,oP,3,0,"div",1),c.TgZ(9,"div",2)(10,"nav")(11,"a",3)(12,"div",4)(13,"h4"),c._uU(14,"Register / Login"),c.qZA()(),c._UZ(15,"img",5),c.qZA()()(),c.TgZ(16,"div",2)(17,"nav")(18,"a",6)(19,"div",4)(20,"h4"),c._uU(21,"Browse"),c.qZA()(),c._UZ(22,"img",5),c.qZA()()(),c.TgZ(23,"div",2)(24,"nav")(25,"a",7)(26,"div",4)(27,"h4"),c._uU(28,"Orders"),c.qZA()(),c._UZ(29,"img",5),c.qZA()()(),c.TgZ(30,"div",2)(31,"nav")(32,"a",8)(33,"div",4)(34,"h4"),c._uU(35,"Add / Remove items"),c.qZA()(),c._UZ(36,"img",5),c.qZA()()()()(),c._UZ(37,"router-outlet")),2&t&&(c.xp6(3),c.Oqu(r.title),c.xp6(3),c.Q6J("ngIf",null==r.authData.getLoggedInUser()),c.xp6(1),c.Q6J("ngIf",null!=r.authData.getLoggedInUser()),c.xp6(1),c.Q6J("ngIf",null!=r.authData.getLoggedInUser()))},directives:[Mr,ig,Nl],styles:['.center[_ngcontent-%COMP%]{display:flex;justify-content:center}.containerBox[_ngcontent-%COMP%]{position:relative;display:inline-block;width:24.5%;margin-left:5px}.containerBox[_ngcontent-%COMP%]:hover{border:5px;border-style:solid;border-color:green;width:23%}.containerBox[_ngcontent-%COMP%]:active{border:5px;border-style:solid;border-color:#ff0}.text-box[_ngcontent-%COMP%]{position:absolute;height:100%;text-align:center;width:100%}.text-box[_ngcontent-%COMP%]:before{content:"";display:inline-block;height:100%;vertical-align:middle}h4[_ngcontent-%COMP%]{display:inline-block;font-size:30px;color:#ef0;text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000}img[_ngcontent-%COMP%]{display:block;max-width:100%;height:auto}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;height:100%;width:100%;background:url(bg.1d39584d5ec7b25a.jpg) no-repeat center center fixed;background-size:cover}']}),n})();const Qx_firebaseConfig={apiKey:"AIzaSyCVSAxaKKI70j6XI5OERi-AzJaX8kt-3Mk",authDomain:"trial-weddingshop.firebaseapp.com",projectId:"trial-weddingshop",storageBucket:"trial-weddingshop.appspot.com",messagingSenderId:"1084541764028",appId:"1:1084541764028:web:c6223c5e211d5a0e732bb9"};let uP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[aP]}),n.\u0275inj=c.cJS({providers:[Nc,Tc,AC,NT],imports:[[ga,rP,eN,S1,zs.hO.initializeApp(Qx_firebaseConfig),XO]]}),n})();(0,c.G48)(),ul().bootstrapModule(uP).catch(n=>console.error(n))},5867:(at,Ie,N)=>{N.d(Ie,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=N(9681);(0,c.registerVersion)("firebase","9.7.0","app")},127:(at,Ie,N)=>{N.d(Ie,{Z:()=>c.Z});var c=N(3942);c.Z.registerVersion("firebase","9.7.0","app-compat")},820:(at,Ie,N)=>{N.r(Ie);var c=N(5861),Y=N(3942),P=N(2090),oe=N(9681),ee=N(655),ge=N(1877),ie=N(4859);const ke=function We(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),nt=new ge.Yd("@firebase/auth");function Ye(_,...f){nt.logLevel<=ge.in.ERROR&&nt.error(`Auth (${oe.SDK_VERSION}): ${_}`,...f)}function Te(_,...f){throw $e(_,...f)}function ve(_,...f){return $e(_,...f)}function we(_,f,g){const v=Object.assign(Object.assign({},Ve()),{[f]:g});return new P.LL("auth","Firebase",v).create(f,{appName:_.name})}function Ge(_,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Te(_,"argument-error"),we(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(_,...f){if("string"!=typeof _){const g=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=_.name),_._errorFactory.create(g,...v)}return fe.create(_,...f)}function re(_,f,...g){if(!_)throw $e(f,...g)}function Ke(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Ye(f),new Error(f)}function X(_,f){_||Ke(f)}const ae=new Map;function ne(_){X(_ instanceof Function,"Expected a class definition");let f=ae.get(_);return f?(X(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,ae.set(_,f),f)}function Le(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Et(){return"http:"===zt()||"https:"===zt()}function zt(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Bt{constructor(f,g){this.shortDelay=f,this.longDelay=g,X(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function nn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Et()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Zn(_,f){X(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class vn{static initialize(f,g,v){this.fetchImpl=f,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ke("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ke("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ke("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},gi=new Bt(3e4,6e4);function Wt(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function jt(_,f,g,v){return nr.apply(this,arguments)}function nr(){return(nr=(0,c.Z)(function*(_,f,g,v,S={}){return ei(_,S,(0,c.Z)(function*(){let k={},z={};v&&("GET"===f?z=v:k={body:JSON.stringify(v)});const se=(0,P.xO)(Object.assign({key:_.config.apiKey},z)).slice(1),Be=yield _._getAdditionalHeaders();return Be["Content-Type"]="application/json",_.languageCode&&(Be["X-Firebase-Locale"]=_.languageCode),vn.fetch()(Sr(_,_.config.apiHost,g,se),Object.assign({method:f,headers:Be,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function ei(_,f,g){return ys.apply(this,arguments)}function ys(){return(ys=(0,c.Z)(function*(_,f,g){_._canInitEmulator=!1;const v=Object.assign(Object.assign({},Qt),f);try{const S=new Wi(_),k=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const z=yield k.json();if("needConfirmation"in z)throw Zi(_,"account-exists-with-different-credential",z);if(k.ok&&!("errorMessage"in z))return z;{const se=k.ok?z.errorMessage:z.error.message,[Be,tt]=se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw Zi(_,"credential-already-in-use",z);if("EMAIL_EXISTS"===Be)throw Zi(_,"email-already-in-use",z);const mt=v[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(tt)throw we(_,mt,tt);Te(_,mt)}}catch(S){if(S instanceof P.ZR)throw S;Te(_,"network-request-failed")}})).apply(this,arguments)}function Ar(_,f,g,v){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,c.Z)(function*(_,f,g,v,S={}){const k=yield jt(_,f,g,v,S);return"mfaPendingCredential"in k&&Te(_,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function Sr(_,f,g,v){const S=`${f}${g}?${v}`;return _.config.emulator?Zn(_.config,S):`${_.config.apiScheme}://${S}`}class Wi{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(ve(this.auth,"network-request-failed")),gi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zi(_,f,g){const v={appName:_.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const S=ve(_,f,v);return S.customData._tokenResponse=g,S}function jr(){return(jr=(0,c.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Kn(_,f){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,c.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ti(_,f){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,c.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function fn(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function oa(){return(oa=(0,c.Z)(function*(_,f=!1){const g=(0,P.m9)(_),v=yield g.getIdToken(f),S=ot(v);re(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const k="object"==typeof S.firebase?S.firebase:void 0,z=null==k?void 0:k.sign_in_provider;return{claims:S,token:v,authTime:fn(Ht(S.auth_time)),issuedAtTime:fn(Ht(S.iat)),expirationTime:fn(Ht(S.exp)),signInProvider:z||null,signInSecondFactor:(null==k?void 0:k.sign_in_second_factor)||null}})).apply(this,arguments)}function Ht(_){return 1e3*Number(_)}function ot(_){const[f,g,v]=_.split(".");if(void 0===f||void 0===g||void 0===v)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,P.tV)(g);return S?JSON.parse(S):(Ye("Failed to decode base64 JWT payload"),null)}catch(S){return Ye("Caught error parsing JWT payload as JSON",S),null}}function rr(_,f){return ki.apply(this,arguments)}function ki(){return(ki=(0,c.Z)(function*(_,f,g=!1){if(g)return f;try{return yield f}catch(v){throw v instanceof P.ZR&&Vt(v)&&_.auth.currentUser===_&&(yield _.auth.signOut()),v}})).apply(this,arguments)}function Vt({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Qs{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,c.Z)(function*(){yield g.iteration()}),v)}iteration(){var f=this;return(0,c.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class dr{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=fn(this.lastLoginAt),this.creationTime=fn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ir(_){return ct.apply(this,arguments)}function ct(){return(ct=(0,c.Z)(function*(_){var f;const g=_.auth,v=yield _.getIdToken(),S=yield rr(_,ti(g,{idToken:v}));re(null==S?void 0:S.users.length,g,"internal-error");const k=S.users[0];_._notifyReloadListener(k);const z=(null===(f=k.providerUserInfo)||void 0===f?void 0:f.length)?Ae(k.providerUserInfo):[],se=Je(_.providerData,z),mt=!!_.isAnonymous&&!(_.email&&k.passwordHash||(null==se?void 0:se.length)),ut={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:se,metadata:new dr(k.createdAt,k.lastLoginAt),isAnonymous:mt};Object.assign(_,ut)})).apply(this,arguments)}function Nt(){return(Nt=(0,c.Z)(function*(_){const f=(0,P.m9)(_);yield ir(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Je(_,f){return[..._.filter(v=>!f.some(S=>S.providerId===v.providerId)),...f]}function Ae(_){return _.map(f=>{var{providerId:g}=f,v=(0,ee._T)(f,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function dt(){return(dt=(0,c.Z)(function*(_,f){const g=yield ei(_,{},(0,c.Z)(function*(){const v=(0,P.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:S,apiKey:k}=_.config,z=Sr(_,S,"/v1/token",`key=${k}`),se=yield _._getAdditionalHeaders();return se["Content-Type"]="application/x-www-form-urlencoded",vn.fetch()(z,{method:"POST",headers:se,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Lt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){re(f.idToken,"internal-error"),re(void 0!==f.idToken,"internal-error"),re(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function yt(_){const f=ot(_);return re(f,"internal-error"),re(void 0!==f.exp,"internal-error"),re(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var v=this;return(0,c.Z)(function*(){return re(!v.accessToken||v.refreshToken,f,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var v=this;return(0,c.Z)(function*(){const{accessToken:S,refreshToken:k,expiresIn:z}=yield function Xe(_,f){return dt.apply(this,arguments)}(f,g);v.updateTokensAndExpiration(S,k,Number(z))})()}updateTokensAndExpiration(f,g,v){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,g){const{refreshToken:v,accessToken:S,expirationTime:k}=g,z=new Lt;return v&&(re("string"==typeof v,"internal-error",{appName:f}),z.refreshToken=v),S&&(re("string"==typeof S,"internal-error",{appName:f}),z.accessToken=S),k&&(re("number"==typeof k,"internal-error",{appName:f}),z.expirationTime=k),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Lt,this.toJSON())}_performRefresh(){return Ke("not implemented")}}function Rt(_,f){re("string"==typeof _||void 0===_,"internal-error",{appName:f})}class j{constructor(f){var{uid:g,auth:v,stsTokenManager:S}=f,k=(0,ee._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new dr(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,c.Z)(function*(){const v=yield rr(g,g.stsTokenManager.getToken(g.auth,f));return re(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(f){return function vs(_){return oa.apply(this,arguments)}(this,f)}reload(){return function hr(_){return Nt.apply(this,arguments)}(this)}_assign(f){this!==f&&(re(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new j(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var v=this;return(0,c.Z)(function*(){let S=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),S=!0),g&&(yield ir(v)),yield v.auth._persistUserIfCurrent(v),S&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,c.Z)(function*(){const g=yield f.getIdToken();return yield rr(f,function lt(_,f){return jr.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var v,S,k,z,se,Be,tt,mt;const ut=null!==(v=g.displayName)&&void 0!==v?v:void 0,In=null!==(S=g.email)&&void 0!==S?S:void 0,Hi=null!==(k=g.phoneNumber)&&void 0!==k?k:void 0,Bl=null!==(z=g.photoURL)&&void 0!==z?z:void 0,wu=null!==(se=g.tenantId)&&void 0!==se?se:void 0,Eu=null!==(Be=g._redirectEventId)&&void 0!==Be?Be:void 0,Jh=null!==(tt=g.createdAt)&&void 0!==tt?tt:void 0,x_=null!==(mt=g.lastLoginAt)&&void 0!==mt?mt:void 0,{uid:Jo,emailVerified:fd,isAnonymous:pd,providerData:Xh,stsTokenManager:gd}=g;re(Jo&&gd,f,"internal-error");const Xn=Lt.fromJSON(this.name,gd);re("string"==typeof Jo,f,"internal-error"),Rt(ut,f.name),Rt(In,f.name),re("boolean"==typeof fd,f,"internal-error"),re("boolean"==typeof pd,f,"internal-error"),Rt(Hi,f.name),Rt(Bl,f.name),Rt(wu,f.name),Rt(Eu,f.name),Rt(Jh,f.name),Rt(x_,f.name);const ef=new j({uid:Jo,auth:f,email:In,emailVerified:fd,displayName:ut,isAnonymous:pd,photoURL:Bl,phoneNumber:Hi,tenantId:wu,stsTokenManager:Xn,createdAt:Jh,lastLoginAt:x_});return Xh&&Array.isArray(Xh)&&(ef.providerData=Xh.map(rg=>Object.assign({},rg))),Eu&&(ef._redirectEventId=Eu),ef}static _fromIdTokenResponse(f,g,v=!1){return(0,c.Z)(function*(){const S=new Lt;S.updateFromServerResponse(g);const k=new j({uid:g.localId,auth:f,stsTokenManager:S,isAnonymous:v});return yield ir(k),k})()}}const G=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(g,v){var S=this;return(0,c.Z)(function*(){S.storage[g]=v})()}_get(g){var v=this;return(0,c.Z)(function*(){const S=v.storage[g];return void 0===S?null:S})()}_remove(g){var v=this;return(0,c.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return _.type="NONE",_})();function de(_,f,g){return`firebase:${_}:${f}:${g}`}class Q{constructor(f,g,v){this.persistence=f,this.auth=g,this.userKey=v;const{config:S,name:k}=this.auth;this.fullUserKey=de(this.userKey,S.apiKey,k),this.fullPersistenceKey=de("persistence",S.apiKey,k),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,c.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?j._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,c.Z)(function*(){if(g.persistence===f)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,v="authUser"){return(0,c.Z)(function*(){if(!g.length)return new Q(ne(G),f,v);const S=(yield Promise.all(g.map(function(){var tt=(0,c.Z)(function*(mt){if(yield mt._isAvailable())return mt});return function(mt){return tt.apply(this,arguments)}}()))).filter(tt=>tt);let k=S[0]||ne(G);const z=de(v,f.config.apiKey,f.name);let se=null;for(const tt of g)try{const mt=yield tt._get(z);if(mt){const ut=j._fromJSON(f,mt);tt!==k&&(se=ut),k=tt;break}}catch(mt){}const Be=S.filter(tt=>tt._shouldAllowMigration);return k._shouldAllowMigration&&Be.length?(k=Be[0],se&&(yield k._set(z,se.toJSON())),yield Promise.all(g.map(function(){var tt=(0,c.Z)(function*(mt){if(mt!==k)try{yield mt._remove(z)}catch(ut){}});return function(mt){return tt.apply(this,arguments)}}())),new Q(k,f,v)):new Q(k,f,v)})()}}function Ue(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if($t(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(gt(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(St(f))return"Blackberry";if(un(f))return"Webos";if(Zt(f))return"Safari";if((f.includes("chrome/")||fr(f))&&!f.includes("edge/"))return"Chrome";if(wn(f))return"Android";{const v=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function gt(_=(0,P.z$)()){return/firefox\//i.test(_)}function Zt(_=(0,P.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function fr(_=(0,P.z$)()){return/crios\//i.test(_)}function $t(_=(0,P.z$)()){return/iemobile/i.test(_)}function wn(_=(0,P.z$)()){return/android/i.test(_)}function St(_=(0,P.z$)()){return/blackberry/i.test(_)}function un(_=(0,P.z$)()){return/webos/i.test(_)}function Qn(_=(0,P.z$)()){return/iphone|ipad|ipod/i.test(_)}function Ki(_=(0,P.z$)()){return Qn(_)||wn(_)||un(_)||St(_)||/windows phone/i.test(_)||$t(_)}function ua(_,f=[]){let g;switch(_){case"Browser":g=Ue((0,P.z$)());break;case"Worker":g=`${Ue((0,P.z$)())}-${_}`;break;default:g=_}const v=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${oe.SDK_VERSION}/${v}`}class ni{constructor(f,g,v){this.app=f,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mt(this),this.idTokenSubscription=new Mt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(f,g){var v=this;return g&&(this._popupRedirectResolver=ne(g)),this._initializationPromise=this.queue((0,c.Z)(function*(){var S,k;if(!v._deleted&&(v.persistenceManager=yield Q.create(v,f),!v._deleted)){if(null===(S=v._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(z){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(k=v.currentUser)||void 0===k?void 0:k.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,c.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,c.Z)(function*(){var v;let S=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const k=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,z=null==S?void 0:S._redirectEventId,se=yield g.tryRedirectSignIn(f);(!k||k===z)&&(null==se?void 0:se.user)&&(S=se.user)}return S?S._redirectEventId?(re(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===S._redirectEventId?g.directlySetCurrentUser(S):g.reloadAndSetCurrentUserOrClear(S)):g.reloadAndSetCurrentUserOrClear(S):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,c.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(S){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,c.Z)(function*(){try{yield ir(f)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function ze(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,c.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,c.Z)(function*(){const v=f?(0,P.m9)(f):null;return v&&re(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,c.Z)(function*(){if(!g._deleted)return f&&re(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,c.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,c.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,c.Z)(function*(){yield g.assertedPersistence.setPersistence(ne(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new P.LL("auth","Firebase",f())}onAuthStateChanged(f,g,v){return this.registerStateListener(this.authStateSubscription,f,g,v)}onIdTokenChanged(f,g,v){return this.registerStateListener(this.idTokenSubscription,f,g,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var v=this;return(0,c.Z)(function*(){const S=yield v.getOrInitRedirectPersistenceManager(g);return null===f?S.removeCurrentUser():S.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,c.Z)(function*(){if(!g.redirectPersistenceManager){const v=f&&ne(f)||g._popupRedirectResolver;re(v,g,"argument-error"),g.redirectPersistenceManager=yield Q.create(g,[ne(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,c.Z)(function*(){var v,S;return g._isInitialized&&(yield g.queue((0,c.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===f?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,c.Z)(function*(){if(f===g.currentUser)return g.queue((0,c.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,v,S){if(this._deleted)return()=>{};const k="function"==typeof g?g:g.next.bind(g),z=this._isInitialized?Promise.resolve():this._initializationPromise;return re(z,this,"internal-error"),z.then(()=>k(this.currentUser)),"function"==typeof g?f.addObserver(g,v,S):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,c.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=ua(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,c.Z)(function*(){var g;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const S=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return S&&(v["X-Firebase-Client"]=S),v})()}}function Ne(_){return(0,P.m9)(_)}class Mt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,P.ne)(g=>this.observer=g)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function sr(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function kn(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class rn{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return Ke("not implemented")}_getIdTokenResponse(f){return Ke("not implemented")}_linkToIdToken(f,g){return Ke("not implemented")}_getReauthenticationResolver(f){return Ke("not implemented")}}function Sn(_,f){return Es.apply(this,arguments)}function Es(){return(Es=(0,c.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:resetPassword",Wt(_,f))})).apply(this,arguments)}function It(_,f){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,c.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Xs(_,f){return la.apply(this,arguments)}function la(){return(la=(0,c.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:update",Wt(_,f))})).apply(this,arguments)}function Jn(){return(Jn=(0,c.Z)(function*(_,f){return Ar(_,"POST","/v1/accounts:signInWithPassword",Wt(_,f))})).apply(this,arguments)}function Yi(_,f){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,c.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:sendOobCode",Wt(_,f))})).apply(this,arguments)}function Mr(_,f){return sn.apply(this,arguments)}function sn(){return(sn=(0,c.Z)(function*(_,f){return Yi(_,f)})).apply(this,arguments)}function Ga(_,f){return za.apply(this,arguments)}function za(){return(za=(0,c.Z)(function*(_,f){return Yi(_,f)})).apply(this,arguments)}function mi(_,f){return ri.apply(this,arguments)}function ri(){return(ri=(0,c.Z)(function*(_,f){return Yi(_,f)})).apply(this,arguments)}function Mc(_,f){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,c.Z)(function*(_,f){return Yi(_,f)})).apply(this,arguments)}function Hr(){return(Hr=(0,c.Z)(function*(_,f){return Ar(_,"POST","/v1/accounts:signInWithEmailLink",Wt(_,f))})).apply(this,arguments)}function xc(){return(xc=(0,c.Z)(function*(_,f){return Ar(_,"POST","/v1/accounts:signInWithEmailLink",Wt(_,f))})).apply(this,arguments)}class Wa extends rn{constructor(f,g,v,S=null){super("password",v),this._email=f,this._password=g,this._tenantId=S}static _fromEmailAndPassword(f,g){return new Wa(f,g,"password")}static _fromEmailAndCode(f,g,v=null){return new Wa(f,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,c.Z)(function*(){switch(g.signInMethod){case"password":return function Ds(_,f){return Jn.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function qa(_,f){return Hr.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Te(f,"internal-error")}})()}_linkToIdToken(f,g){var v=this;return(0,c.Z)(function*(){switch(v.signInMethod){case"password":return It(f,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function wh(_,f){return xc.apply(this,arguments)}(f,{idToken:g,email:v._email,oobCode:v._password});default:Te(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Nn(_,f){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,c.Z)(function*(_,f){return Ar(_,"POST","/v1/accounts:signInWithIdp",Wt(_,f))})).apply(this,arguments)}class Ji extends rn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Ji(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Te("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:S}=g,k=(0,ee._T)(g,["providerId","signInMethod"]);if(!v||!S)return null;const z=new Ji(v,S);return z.idToken=k.idToken||void 0,z.accessToken=k.accessToken||void 0,z.secret=k.secret,z.nonce=k.nonce,z.pendingToken=k.pendingToken||null,z}_getIdTokenResponse(f){return Nn(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Nn(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Nn(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,P.xO)(g)}return f}}function kp(_,f){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,c.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:sendVerificationCode",Wt(_,f))})).apply(this,arguments)}function bs(){return(bs=(0,c.Z)(function*(_,f){return Ar(_,"POST","/v1/accounts:signInWithPhoneNumber",Wt(_,f))})).apply(this,arguments)}function kc(){return(kc=(0,c.Z)(function*(_,f){const g=yield Ar(_,"POST","/v1/accounts:signInWithPhoneNumber",Wt(_,f));if(g.temporaryProof)throw Zi(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Pp={USER_NOT_FOUND:"user-not-found"};function Pc(){return(Pc=(0,c.Z)(function*(_,f){return Ar(_,"POST","/v1/accounts:signInWithPhoneNumber",Wt(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Pp)})).apply(this,arguments)}class ko extends rn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new ko({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new ko({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Ju(_,f){return bs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Np(_,f){return kc.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Nc(_,f){return Pc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:v,verificationCode:S}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:v,code:S}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:v,phoneNumber:S,temporaryProof:k}=f;return v||g||S||k?new ko({verificationId:g,verificationCode:v,phoneNumber:S,temporaryProof:k}):null}}class eo{constructor(f){var g,v,S,k,z,se;const Be=(0,P.zd)((0,P.pd)(f)),tt=null!==(g=Be.apiKey)&&void 0!==g?g:null,mt=null!==(v=Be.oobCode)&&void 0!==v?v:null,ut=function t_(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Be.mode)&&void 0!==S?S:null);re(tt&&mt&&ut,"argument-error"),this.apiKey=tt,this.operation=ut,this.code=mt,this.continueUrl=null!==(k=Be.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(z=Be.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(se=Be.tenantId)&&void 0!==se?se:null}static parseLink(f){const g=function Za(_){const f=(0,P.zd)((0,P.pd)(_)).link,g=f?(0,P.zd)((0,P.pd)(f)).deep_link_id:null,v=(0,P.zd)((0,P.pd)(_)).deep_link_id;return(v?(0,P.zd)((0,P.pd)(v)).link:null)||v||g||f||_}(f);try{return new eo(g)}catch(v){return null}}}let Xu=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,v){return Wa._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const S=eo.parseLink(v);return re(S,"argument-error"),Wa._fromEmailAndCode(g,S.code,S.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Is{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class $r extends Is{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class No extends $r{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return re("providerId"in g&&"signInMethod"in g,"argument-error"),Ji._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return re(f.idToken||f.accessToken,"argument-error"),Ji._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return No.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return No.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:S,pendingToken:k,nonce:z,providerId:se}=f;if(!v&&!S&&!g&&!k||!se)return null;try{return new No(se)._credential({idToken:g,accessToken:v,nonce:z,pendingToken:k})}catch(Be){return null}}}let to=(()=>{class _ extends $r{constructor(){super("facebook.com")}static credential(g){return Ji._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(v){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),ca=(()=>{class _ extends $r{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return Ji._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:S}=g;if(!v&&!S)return null;try{return _.credential(v,S)}catch(k){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Fc=(()=>{class _ extends $r{constructor(){super("github.com")}static credential(g){return Ji._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(v){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Po extends rn{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Nn(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Nn(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Nn(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:S,pendingToken:k}=g;return v&&S&&k&&v===S?new Po(v,k):null}static _create(f,g){return new Po(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ii extends Is{constructor(f){re(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ii.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ii.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Po.fromJSON(f);return re(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:v}=f;if(!g||!v)return null;try{return Po._create(v,g)}catch(S){return null}}}let Ka=(()=>{class _ extends $r{constructor(){super("twitter.com")}static credential(g,v){return Ji._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:S}=g;if(!v||!S)return null;try{return _.credential(v,S)}catch(k){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Ya(_,f){return xr.apply(this,arguments)}function xr(){return(xr=(0,c.Z)(function*(_,f){return Ar(_,"POST","/v1/accounts:signUp",Wt(_,f))})).apply(this,arguments)}class or{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,v,S=!1){return(0,c.Z)(function*(){const k=yield j._fromIdTokenResponse(f,v,S),z=Dh(v);return new or({user:k,providerId:z,_tokenResponse:v,operationType:g})})()}static _forOperation(f,g,v){return(0,c.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const S=Dh(v);return new or({user:f,providerId:S,_tokenResponse:v,operationType:g})})()}}function Dh(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Lc(){return(Lc=(0,c.Z)(function*(_){var f;const g=Ne(_);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new or({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield Ya(g,{returnSecureToken:!0}),S=yield or._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ja extends P.ZR{constructor(f,g,v,S){var k;super(g.code,g.message),this.operationType=v,this.user=S,Object.setPrototypeOf(this,Ja.prototype),this.customData={appName:f.name,tenantId:null!==(k=f.tenantId)&&void 0!==k?k:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,g,v,S){return new Ja(f,g,v,S)}}function Xa(_,f,g,v){return("reauthenticate"===f?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Ja._fromErrorAndOperation(_,k,f,v):k})}function Xi(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function el(){return(el=(0,c.Z)(function*(_,f){const g=(0,P.m9)(_);yield As(!0,g,f);const{providerUserInfo:v}=yield Kn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),S=Xi(v||[]);return g.providerData=g.providerData.filter(k=>S.has(k.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function dn(_,f){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,c.Z)(function*(_,f,g=!1){const v=yield rr(_,f._linkToIdToken(_.auth,yield _.getIdToken()),g);return or._forOperation(_,"link",v)})).apply(this,arguments)}function As(_,f,g){return on.apply(this,arguments)}function on(){return(on=(0,c.Z)(function*(_,f,g){yield ir(f);const S=!1===_?"provider-already-linked":"no-such-provider";re(Xi(f.providerData).has(g)===_,f.auth,S)})).apply(this,arguments)}function Vc(_,f){return no.apply(this,arguments)}function no(){return(no=(0,c.Z)(function*(_,f,g=!1){const{auth:v}=_,S="reauthenticate";try{const k=yield rr(_,Xa(v,S,f,_),g);re(k.idToken,v,"internal-error");const z=ot(k.idToken);re(z,v,"internal-error");const{sub:se}=z;return re(_.uid===se,v,"user-mismatch"),or._forOperation(_,S,k)}catch(k){throw"auth/user-not-found"===(null==k?void 0:k.code)&&Te(v,"user-mismatch"),k}})).apply(this,arguments)}function ro(_,f){return pr.apply(this,arguments)}function pr(){return(pr=(0,c.Z)(function*(_,f,g=!1){const v="signIn",S=yield Xa(_,v,f),k=yield or._fromIdTokenResponse(_,v,S);return g||(yield _._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Mn(_,f){return ha.apply(this,arguments)}function ha(){return(ha=(0,c.Z)(function*(_,f){return ro(Ne(_),f)})).apply(this,arguments)}function _i(_,f){return gr.apply(this,arguments)}function gr(){return(gr=(0,c.Z)(function*(_,f){const g=(0,P.m9)(_);return yield As(!1,g,f.providerId),dn(g,f)})).apply(this,arguments)}function Ss(_,f){return es.apply(this,arguments)}function es(){return(es=(0,c.Z)(function*(_,f){return Vc((0,P.m9)(_),f)})).apply(this,arguments)}function eu(_,f){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,c.Z)(function*(_,f){return Ar(_,"POST","/v1/accounts:signInWithCustomToken",Wt(_,f))})).apply(this,arguments)}function xs(){return(xs=(0,c.Z)(function*(_,f){const g=Ne(_),v=yield eu(g,{token:f,returnSecureToken:!0}),S=yield or._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class ht{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?tu._fromServerResponse(f,g):Te(f,"internal-error")}}class tu extends ht{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new tu(g)}}function fa(_,f,g){var v;re((null===(v=g.url)||void 0===v?void 0:v.length)>0,_,"invalid-continue-uri"),re(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(re(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(re(g.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function ru(){return(ru=(0,c.Z)(function*(_,f,g){const v=(0,P.m9)(_),S={requestType:"PASSWORD_RESET",email:f};g&&fa(v,S,g),yield Ga(v,S)})).apply(this,arguments)}function tl(){return(tl=(0,c.Z)(function*(_,f,g){yield Sn((0,P.m9)(_),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Ce(){return(Ce=(0,c.Z)(function*(_,f){yield Xs((0,P.m9)(_),{oobCode:f})})).apply(this,arguments)}function Ot(_,f){return rl.apply(this,arguments)}function rl(){return(rl=(0,c.Z)(function*(_,f){const g=(0,P.m9)(_),v=yield Sn(g,{oobCode:f}),S=v.requestType;switch(re(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(v.mfaInfo,g,"internal-error");default:re(v.email,g,"internal-error")}let k=null;return v.mfaInfo&&(k=ht._fromServerResponse(Ne(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:k},operation:S}})).apply(this,arguments)}function Lo(){return(Lo=(0,c.Z)(function*(_,f){const{data:g}=yield Ot((0,P.m9)(_),f);return g.email})).apply(this,arguments)}function zr(){return(zr=(0,c.Z)(function*(_,f,g){const v=Ne(_),S=yield Ya(v,{returnSecureToken:!0,email:f,password:g}),k=yield or._fromIdTokenResponse(v,"signIn",S);return yield v._updateCurrentUser(k.user),k})).apply(this,arguments)}function Uc(){return(Uc=(0,c.Z)(function*(_,f,g){const v=(0,P.m9)(_),S={requestType:"EMAIL_SIGNIN",email:f};re(g.handleCodeInApp,v,"argument-error"),g&&fa(v,S,g),yield mi(v,S)})).apply(this,arguments)}function Rs(){return(Rs=(0,c.Z)(function*(_,f,g){const v=(0,P.m9)(_),S=Xu.credentialWithLink(f,g||Le());return re(S._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Mn(v,S)})).apply(this,arguments)}function ar(_,f){return si.apply(this,arguments)}function si(){return(si=(0,c.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:createAuthUri",Wt(_,f))})).apply(this,arguments)}function Os(){return(Os=(0,c.Z)(function*(_,f){const v={identifier:f,continueUri:Et()?Le():"http://localhost"},{signinMethods:S}=yield ar((0,P.m9)(_),v);return S||[]})).apply(this,arguments)}function al(){return(al=(0,c.Z)(function*(_,f){const g=(0,P.m9)(_),S={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&fa(g.auth,S,f);const{email:k}=yield Mr(g.auth,S);k!==_.email&&(yield _.reload())})).apply(this,arguments)}function uu(){return(uu=(0,c.Z)(function*(_,f,g){const v=(0,P.m9)(_),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};g&&fa(v.auth,k,g);const{email:z}=yield Mc(v.auth,k);z!==_.email&&(yield _.reload())})).apply(this,arguments)}function ul(_,f){return pa.apply(this,arguments)}function pa(){return(pa=(0,c.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ll(){return(ll=(0,c.Z)(function*(_,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const v=(0,P.m9)(_),k={idToken:yield v.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},z=yield rr(v,ul(v.auth,k));v.displayName=z.displayName||null,v.photoURL=z.photoUrl||null;const se=v.providerData.find(({providerId:Be})=>"password"===Be);se&&(se.displayName=v.displayName,se.photoURL=v.photoURL),yield v._updateTokensIfNecessary(z)})).apply(this,arguments)}function dl(_,f,g){return io.apply(this,arguments)}function io(){return(io=(0,c.Z)(function*(_,f,g){const{auth:v}=_,k={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(k.email=f),g&&(k.password=g);const z=yield rr(_,It(v,k));yield _._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class so{constructor(f,g,v={}){this.isNewUser=f,this.providerId=g,this.profile=v}}class Hc extends so{constructor(f,g,v,S){super(f,g,v),this.username=S}}class $c extends so{constructor(f,g){super(f,"facebook.com",g)}}class oo extends Hc{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class ks extends so{constructor(f,g){super(f,"google.com",g)}}class hl extends Hc{constructor(f,g,v){super(f,"twitter.com",g,v)}}function mr(_){const{user:f,_tokenResponse:g}=_;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function jc(_){var f,g;if(!_)return null;const{providerId:v}=_,S=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},k=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!v&&(null==_?void 0:_.idToken)){const z=null===(g=null===(f=ot(_.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(z)return new so(k,"anonymous"!==z&&"custom"!==z?z:null)}if(!v)return null;switch(v){case"facebook.com":return new $c(k,S);case"github.com":return new oo(k,S);case"google.com":return new ks(k,S);case"twitter.com":return new hl(k,S,_.screenName||null);case"custom":case"anonymous":return new so(k,null);default:return new so(k,v,S)}}(g)}class ts{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new ts("enroll",f)}static _fromMfaPendingCredential(f){return new ts("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,v;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return ts._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(v=f.multiFactorSession)||void 0===v?void 0:v.idToken)return ts._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ma{constructor(f,g,v){this.session=f,this.hints=g,this.signInResolver=v}static _fromError(f,g){const v=Ne(f),S=g.customData._serverResponse,k=(S.mfaInfo||[]).map(se=>ht._fromServerResponse(v,se));re(S.mfaPendingCredential,v,"internal-error");const z=ts._fromMfaPendingCredential(S.mfaPendingCredential);return new ma(z,k,function(){var se=(0,c.Z)(function*(Be){const tt=yield Be._process(v,z);delete S.mfaInfo,delete S.mfaPendingCredential;const mt=Object.assign(Object.assign({},S),{idToken:tt.idToken,refreshToken:tt.refreshToken});switch(g.operationType){case"signIn":const ut=yield or._fromIdTokenResponse(v,g.operationType,mt);return yield v._updateCurrentUser(ut.user),ut;case"reauthenticate":return re(g.user,v,"internal-error"),or._forOperation(g.user,g.operationType,mt);default:Te(v,"internal-error")}});return function(Be){return se.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,c.Z)(function*(){return g.signInResolver(f)})()}}function Pn(_,f){return jt(_,"POST","/v2/accounts/mfaEnrollment:start",Wt(_,f))}class ns{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>ht._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new ns(f)}getSession(){var f=this;return(0,c.Z)(function*(){return ts._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var v=this;return(0,c.Z)(function*(){const S=f,k=yield v.getSession(),z=yield rr(v.user,S._process(v.user.auth,k,g));return yield v.user._updateTokensIfNecessary(z),v.user.reload()})()}unenroll(f){var g=this;return(0,c.Z)(function*(){const v="string"==typeof f?f:f.uid,S=yield g.user.getIdToken(),k=yield rr(g.user,function Lp(_,f){return jt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Wt(_,f))}(g.user.auth,{idToken:S,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:z})=>z!==v),yield g.user._updateTokensIfNecessary(k);try{yield g.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const Uo=new WeakMap,gl="__sak";class ao{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(gl,"1"),this.storage.removeItem(gl),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const xn=(()=>{class _ extends ao{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function qc(){const _=(0,P.z$)();return Zt(_)||Qn(_)}()&&function Un(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=Ki(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const S=this.storage.getItem(v),k=this.localCache[v];S!==k&&g(v,k,S)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((se,Be,tt)=>{this.notifyListeners(se,tt)});const S=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const se=this.storage.getItem(S);if(g.newValue!==se)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!v)return}const k=()=>{const se=this.storage.getItem(S);!v&&this.localCache[S]===se||this.notifyListeners(S,se)},z=this.storage.getItem(S);!function aa(){return(0,P.w1)()&&10===document.documentMode}()||z===g.newValue||g.newValue===g.oldValue?k():setTimeout(k,10)}notifyListeners(g,v){this.localCache[g]=v;const S=this.listeners[g];if(S)for(const k of Array.from(S))k(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var S=()=>super._set,k=this;return(0,c.Z)(function*(){yield S().call(k,g,v),k.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,S=this;return(0,c.Z)(function*(){const k=yield v().call(S,g);return S.localCache[g]=JSON.stringify(k),k})()}_remove(g){var v=()=>super._remove,S=this;return(0,c.Z)(function*(){yield v().call(S,g),delete S.localCache[g]})()}}return _.type="LOCAL",_})(),Fn=(()=>{class _ extends ao{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return _.type="SESSION",_})();let _r=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(k=>k.isListeningto(g));if(v)return v;const S=new _(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,c.Z)(function*(){const S=g,{eventId:k,eventType:z,data:se}=S.data,Be=v.handlersMap[z];if(!(null==Be?void 0:Be.size))return;S.ports[0].postMessage({status:"ack",eventId:k,eventType:z});const tt=Array.from(Be).map(function(){var ut=(0,c.Z)(function*(In){return In(S.origin,se)});return function(In){return ut.apply(this,arguments)}}()),mt=yield function Rr(_){return Promise.all(_.map(function(){var f=(0,c.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return f.apply(this,arguments)}}()))}(tt);S.ports[0].postMessage({status:"done",eventId:k,eventType:z,response:mt})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Bo(_="",f=10){let g="";for(let v=0;v<f;v++)g+=Math.floor(10*Math.random());return _+g}class Wc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,v=50){var S=this;return(0,c.Z)(function*(){const k="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let z,se;return new Promise((Be,tt)=>{const mt=Bo("",20);k.port1.start();const ut=setTimeout(()=>{tt(new Error("unsupported_event"))},v);se={messageChannel:k,onMessage(In){const Hi=In;if(Hi.data.eventId===mt)switch(Hi.data.status){case"ack":clearTimeout(ut),z=setTimeout(()=>{tt(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Be(Hi.data.response);break;default:clearTimeout(ut),clearTimeout(z),tt(new Error("invalid_response"))}}},S.handlers.add(se),k.port1.addEventListener("message",se.onMessage),S.target.postMessage({eventType:f,eventId:mt,data:g},[k.port2])}).finally(()=>{se&&S.removeMessageHandler(se)})})()}}function cn(){return window}function vi(){return void 0!==cn().WorkerGlobalScope&&"function"==typeof cn().importScripts}function oi(){return(oi=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const ml="firebaseLocalStorageDb",uo="firebaseLocalStorage",gn="fbase_key";class rs{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function jo(_,f){return _.transaction([uo],f?"readwrite":"readonly").objectStore(uo)}function Ps(){const _=indexedDB.open(ml,1);return new Promise((f,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const v=_.result;try{v.createObjectStore(uo,{keyPath:gn})}catch(S){g(S)}}),_.addEventListener("success",(0,c.Z)(function*(){const v=_.result;v.objectStoreNames.contains(uo)?f(v):(v.close(),yield function ai(){const _=indexedDB.deleteDatabase(ml);return new rs(_).toPromise()}(),f(yield Ps()))}))})}function lo(_,f,g){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,c.Z)(function*(_,f,g){const v=jo(_,!0).put({[gn]:f,value:g});return new rs(v).toPromise()})).apply(this,arguments)}function Fs(){return(Fs=(0,c.Z)(function*(_,f){const g=jo(_,!1).get(f),v=yield new rs(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Fi(_,f){const g=jo(_,!0).delete(f);return new rs(g).toPromise()}const wi=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,c.Z)(function*(){return g.db||(g.db=yield Ps()),g.db})()}_withRetries(g){var v=this;return(0,c.Z)(function*(){let S=0;for(;;)try{const k=yield v._openDb();return yield g(k)}catch(k){if(S++>3)throw k;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,c.Z)(function*(){return vi()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,c.Z)(function*(){g.receiver=_r._getInstance(function Zc(){return vi()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,c.Z)(function*(S,k){return{keyProcessed:(yield g._poll()).includes(k.key)}});return function(S,k){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,c.Z)(function*(S,k){return["keyChanged"]});return function(S,k){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,c.Z)(function*(){var v,S;if(g.activeServiceWorker=yield function cu(){return oi.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Wc(g.activeServiceWorker);const k=yield g.sender._send("ping",{},800);!k||(null===(v=k[0])||void 0===v?void 0:v.fulfilled)&&(null===(S=k[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,c.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Pt(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Ps();return yield lo(g,gl,"1"),yield Fi(g,gl),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,c.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var S=this;return(0,c.Z)(function*(){return S._withPendingWrite((0,c.Z)(function*(){return yield S._withRetries(k=>lo(k,g,v)),S.localCache[g]=v,S.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,c.Z)(function*(){const S=yield v._withRetries(k=>function _l(_,f){return Fs.apply(this,arguments)}(k,g));return v.localCache[g]=S,S})()}_remove(g){var v=this;return(0,c.Z)(function*(){return v._withPendingWrite((0,c.Z)(function*(){return yield v._withRetries(S=>Fi(S,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,c.Z)(function*(){const v=yield g._withRetries(z=>{const se=jo(z,!1).getAll();return new rs(se).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const S=[],k=new Set;for(const{fbase_key:z,value:se}of v)k.add(z),JSON.stringify(g.localCache[z])!==JSON.stringify(se)&&(g.notifyListeners(z,se),S.push(z));for(const z of Object.keys(g.localCache))g.localCache[z]&&!k.has(z)&&(g.notifyListeners(z,null),S.push(z));return S})()}notifyListeners(g,v){this.localCache[g]=v;const S=this.listeners[g];if(S)for(const k of Array.from(S))k(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Ho(_,f){return jt(_,"POST","/v2/accounts/mfaSignIn:start",Wt(_,f))}function Ei(){return(Ei=(0,c.Z)(function*(_){return(yield jt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Rn(_){return new Promise((f,g)=>{const v=document.createElement("script");v.setAttribute("src",_),v.onload=f,v.onerror=S=>{const k=ve("internal-error");k.customData=S,g(k)},v.type="text/javascript",v.charset="UTF-8",function Qc(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(v)})}function Vs(_){return`__${_}${Math.floor(1e6*Math.random())}`}const yr=1e12;class is{constructor(f){this.auth=f,this.counter=yr,this._widgets=new Map}render(f,g){const v=this.counter;return this._widgets.set(v,new Li(f,this.auth.name,g||{})),this.counter++,v}reset(f){var g;const v=f||yr;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(f){var g;return(null===(g=this._widgets.get(f||yr))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,c.Z)(function*(){var v;return null===(v=g._widgets.get(f||yr))||void 0===v||v.execute(),""})()}}class Li{constructor(f,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof f?document.getElementById(f):f;re(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Cn(_){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<_;v++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Us=Vs("rcb"),Jc=new Bt(3e4,6e4);class Up{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!cn().grecaptcha}load(f,g=""){return re(function Bp(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(cn().grecaptcha):new Promise((v,S)=>{const k=cn().setTimeout(()=>{S(ve(f,"network-request-failed"))},Jc.get());cn()[Us]=()=>{cn().clearTimeout(k),delete cn()[Us];const se=cn().grecaptcha;if(!se)return void S(ve(f,"internal-error"));const Be=se.render;se.render=(tt,mt)=>{const ut=Be(tt,mt);return this.counter++,ut},this.hostLanguage=g,v(se)},Rn(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Us,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(k),S(ve(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!cn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class jp{load(f){return(0,c.Z)(function*(){return new is(f)})()}clearedOneInstance(){}}const Bs="recaptcha",qr={theme:"light",type:"image"};class Hp{constructor(f,g=Object.assign({},qr),v){this.parameters=g,this.type=Bs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ne(v),this.isInvisible="invisible"===this.parameters.size,re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof f?document.getElementById(f):f;re(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jp:new Up,this.validateStartingState()}verify(){var f=this;return(0,c.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(g)||new Promise(k=>{const z=se=>{!se||(f.tokenChangeListeners.delete(z),k(se))};f.tokenChangeListeners.add(z),f.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof f)f(g);else if("string"==typeof f){const v=cn()[f];"function"==typeof v&&v(g)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,c.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,c.Z)(function*(){re(Et()&&!vi(),f.auth,"internal-error"),yield function js(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function ur(_){return Ei.apply(this,arguments)}(f.auth);re(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ss{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=ko._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function _n(){return(_n=(0,c.Z)(function*(_,f,g){const v=Ne(_),S=yield vr(v,f,(0,P.m9)(g));return new ss(S,k=>Mn(v,k))})).apply(this,arguments)}function zo(){return(zo=(0,c.Z)(function*(_,f,g){const v=(0,P.m9)(_);yield As(!1,v,"phone");const S=yield vr(v.auth,f,(0,P.m9)(g));return new ss(S,k=>_i(v,k))})).apply(this,arguments)}function wl(){return(wl=(0,c.Z)(function*(_,f,g){const v=(0,P.m9)(_),S=yield vr(v.auth,f,(0,P.m9)(g));return new ss(S,k=>Ss(v,k))})).apply(this,arguments)}function vr(_,f,g){return ui.apply(this,arguments)}function ui(){return(ui=(0,c.Z)(function*(_,f,g){var v;const S=yield g.verify();try{let k;if(re("string"==typeof S,_,"argument-error"),re(g.type===Bs,_,"argument-error"),k="string"==typeof f?{phoneNumber:f}:f,"session"in k){const z=k.session;if("phoneNumber"in k)return re("enroll"===z.type,_,"internal-error"),(yield Pn(_,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{re("signin"===z.type,_,"internal-error");const se=(null===(v=k.multiFactorHint)||void 0===v?void 0:v.uid)||k.multiFactorUid;return re(se,_,"missing-multi-factor-info"),(yield Ho(_,{mfaPendingCredential:z.credential,mfaEnrollmentId:se,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield kp(_,{phoneNumber:k.phoneNumber,recaptchaToken:S});return z}}finally{g._reset()}})).apply(this,arguments)}function os(){return(os=(0,c.Z)(function*(_,f){yield dn((0,P.m9)(_),f)})).apply(this,arguments)}let Ci=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=Ne(g)}verifyPhoneNumber(g,v){return vr(this.auth,g,(0,P.m9)(v))}static credential(g,v){return ko._fromVerification(g,v)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:S}=g;return v&&S?ko._fromTokenResponse(v,S):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Vi(_,f){return f?ne(f):(re(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class _a extends rn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Nn(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Nn(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Nn(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Dl(_){return ro(_.auth,new _a(_),_.bypassAuthState)}function Cl(_){const{auth:f,user:g}=_;return re(g,f,"internal-error"),Vc(g,new _a(_),_.bypassAuthState)}function xt(_){return bl.apply(this,arguments)}function bl(){return(bl=(0,c.Z)(function*(_){const{auth:f,user:g}=_;return re(g,f,"internal-error"),dn(g,new _a(_),_.bypassAuthState)})).apply(this,arguments)}class Bn{constructor(f,g,v,S,k=!1){this.auth=f,this.resolver=v,this.user=S,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,c.Z)(function*(v,S){f.pendingPromise={resolve:v,reject:S};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(k){f.reject(k)}});return function(v,S){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,c.Z)(function*(){const{urlResponse:v,sessionId:S,postBody:k,tenantId:z,error:se,type:Be}=f;if(se)return void g.reject(se);const tt={auth:g.auth,requestUri:v,sessionId:S,tenantId:z||void 0,postBody:k||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Be)(tt))}catch(mt){g.reject(mt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Dl;case"linkViaPopup":case"linkViaRedirect":return xt;case"reauthViaPopup":case"reauthViaRedirect":return Cl;default:Te(this.auth,"internal-error")}}resolve(f){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Il=new Bt(2e3,1e4);function Xc(){return(Xc=(0,c.Z)(function*(_,f,g){const v=Ne(_);Ge(_,f,Is);const S=Vi(v,g);return new Bi(v,"signInViaPopup",f,S).executeNotNull()})).apply(this,arguments)}function hu(){return(hu=(0,c.Z)(function*(_,f,g){const v=(0,P.m9)(_);Ge(v.auth,f,Is);const S=Vi(v.auth,g);return new Bi(v.auth,"reauthViaPopup",f,S,v).executeNotNull()})).apply(this,arguments)}function fu(){return(fu=(0,c.Z)(function*(_,f,g){const v=(0,P.m9)(_);Ge(v.auth,f,Is);const S=Vi(v.auth,g);return new Bi(v.auth,"linkViaPopup",f,S,v).executeNotNull()})).apply(this,arguments)}let Bi=(()=>{class _ extends Bn{constructor(g,v,S,k,z){super(g,v,k,z),this.provider=S,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,c.Z)(function*(){const v=yield g.execute();return re(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,c.Z)(function*(){X(1===g.filter.length,"Popup operations only handle one event");const v=Bo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(ve(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,S;this.pollId=(null===(S=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Il.get())};g()}}return _.currentPopupAction=null,_})();const ji=new Map;class jn extends Bn{constructor(f,g,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,c.Z)(function*(){let v=ji.get(g.auth._key());if(!v){try{const k=(yield function li(_,f){return Tl.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;v=()=>Promise.resolve(k)}catch(S){v=()=>Promise.reject(S)}ji.set(g.auth._key(),v)}return g.bypassAuthState||ji.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,v=this;return(0,c.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(v,f);if("unknown"!==f.type){if(f.eventId){const S=yield v.auth._redirectUserForId(f.eventId);if(S)return v.user=S,g().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function Tl(){return(Tl=(0,c.Z)(function*(_,f){const g=I(f),v=C(_);if(!(yield v._isAvailable()))return!1;const S="true"===(yield v._get(g));return yield v._remove(g),S})).apply(this,arguments)}function ho(_,f){return qo.apply(this,arguments)}function qo(){return(qo=(0,c.Z)(function*(_,f){return C(_)._set(I(f),"true")})).apply(this,arguments)}function C(_){return ne(_._redirectPersistence)}function I(_){return de("pendingRedirect",_.config.apiKey,_.name)}function q(){return(q=(0,c.Z)(function*(_,f,g){const v=Ne(_);Ge(_,f,Is);const S=Vi(v,g);return yield ho(S,v),S._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function xe(){return(xe=(0,c.Z)(function*(_,f,g){const v=(0,P.m9)(_);Ge(v.auth,f,Is);const S=Vi(v.auth,g);yield ho(S,v.auth);const k=yield fo(v);return S._openRedirect(v.auth,f,"reauthViaRedirect",k)})).apply(this,arguments)}function Tt(){return(Tt=(0,c.Z)(function*(_,f,g){const v=(0,P.m9)(_);Ge(v.auth,f,Is);const S=Vi(v.auth,g);yield As(!1,v,f.providerId),yield ho(S,v.auth);const k=yield fo(v);return S._openRedirect(v.auth,f,"linkViaRedirect",k)})).apply(this,arguments)}function Ln(){return(Ln=(0,c.Z)(function*(_,f){return yield Ne(_)._initializationPromise,bn(_,f,!1)})).apply(this,arguments)}function bn(_,f){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,c.Z)(function*(_,f,g=!1){const v=Ne(_),S=Vi(v,f),z=yield new jn(v,S,g).execute();return z&&!g&&(delete z.user._redirectEventId,yield v._persistUserIfCurrent(z.user),yield v._setRedirectUser(null,f)),z})).apply(this,arguments)}function fo(_){return Or.apply(this,arguments)}function Or(){return(Or=(0,c.Z)(function*(_){const f=Bo(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class bi{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(g=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Al(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return td(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var v;if(f.error&&!td(f)){const S=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(ve(this.auth,S))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const v=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(po(f))}saveEventToCache(f){this.cachedEventUids.add(po(f)),this.lastProcessedEventTime=Date.now()}}function po(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function td({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Sl(_){return ya.apply(this,arguments)}function ya(){return(ya=(0,c.Z)(function*(_,f={}){return jt(_,"GET","/v1/projects",f)})).apply(this,arguments)}const Gp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r_=/^https?/;function as(){return(as=(0,c.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield Sl(_);for(const g of f)try{if(Ml(g))return}catch(v){}Te(_,"unauthorized-domain")})).apply(this,arguments)}function Ml(_){const f=Le(),{protocol:g,hostname:v}=new URL(f);if(_.startsWith("chrome-extension://")){const z=new URL(_);return""===z.hostname&&""===v?"chrome-extension:"===g&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&z.hostname===v}if(!r_.test(g))return!1;if(Gp.test(_))return v===_;const S=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(v)}const s_=new Bt(3e4,6e4);function o_(){const _=cn().___jsl;if(null==_?void 0:_.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let nd=null;function a_(_){return nd=nd||function zp(_){return new Promise((f,g)=>{var v,S,k;function z(){o_(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{o_(),g(ve(_,"network-request-failed"))},timeout:s_.get()})}if(null===(S=null===(v=cn().gapi)||void 0===v?void 0:v.iframes)||void 0===S?void 0:S.Iframe)f(gapi.iframes.getContext());else{if(!(null===(k=cn().gapi)||void 0===k?void 0:k.load)){const se=Vs("iframefcb");return cn()[se]=()=>{gapi.load?z():g(ve(_,"network-request-failed"))},Rn(`https://apis.google.com/js/api.js?onload=${se}`).catch(Be=>g(Be))}z()}}).catch(f=>{throw nd=null,f})}(_),nd}const Th=new Bt(5e3,15e3),mo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function va(_){const f=_.config;re(f.authDomain,_,"auth-domain-config-required");const g=f.emulator?Zn(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,v={apiKey:f.apiKey,appName:_.name,v:oe.SDK_VERSION},S=rd.get(_.config.apiHost);S&&(v.eid=S);const k=_._getFrameworks();return k.length&&(v.fw=k.join(",")),`${g}?${(0,P.xO)(v).slice(1)}`}function Zo(){return Zo=(0,c.Z)(function*(_){const f=yield a_(_),g=cn().gapi;return re(g,_,"internal-error"),f.open({where:document.body,url:va(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mo,dontclear:!0},v=>new Promise(function(){var S=(0,c.Z)(function*(k,z){yield v.restyle({setHideOnLeave:!1});const se=ve(_,"network-request-failed"),Be=cn().setTimeout(()=>{z(se)},Th.get());function tt(){cn().clearTimeout(Be),k(v)}v.ping(tt).then(tt,()=>{z(se)})});return function(k,z){return S.apply(this,arguments)}}()))}),Zo.apply(this,arguments)}const l_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class od{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function xh(_,f,g,v,S,k){re(_.config.authDomain,_,"auth-domain-config-required"),re(_.config.apiKey,_,"invalid-api-key");const z={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:v,v:oe.SDK_VERSION,eventId:S};if(f instanceof Is){f.setDefaultLanguage(_.languageCode),z.providerId=f.providerId||"",(0,P.xb)(f.getCustomParameters())||(z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Be,tt]of Object.entries(k||{}))z[Be]=tt}if(f instanceof $r){const Be=f.getScopes().filter(tt=>""!==tt);Be.length>0&&(z.scopes=Be.join(","))}_.tenantId&&(z.tid=_.tenantId);const se=z;for(const Be of Object.keys(se))void 0===se[Be]&&delete se[Be];return`${function d_({config:_}){return _.emulator?Zn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,P.xO)(se).slice(1)}`}const $s="webStorageSupport";class Rh extends class qp{constructor(f){this.factorId=f}_process(f,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,v);case"signin":return this._finalizeSignIn(f,g.credential);default:return Ke("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Rh(f)}_finalizeEnroll(f,g,v){return function Gc(_,f){return jt(_,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(_,f))}(f,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function $o(_,f){return jt(_,"POST","/v2/accounts/mfaSignIn:finalize",Wt(_,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let h_=(()=>{class _{constructor(){}static assertion(g){return Rh._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var f_="@firebase/auth",Oh="0.19.12";class Wp{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,c.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(v=>{var S;f((null===(S=v)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Gs(){return window}function _u(){return(_u=(0,c.Z)(function*(_,f,g){var v;const{BuildInfo:S}=Gs();X(f.sessionId,"AuthEvent did not contain a session ID");const k=yield wa(f.sessionId),z={};return Qn()?z.ibi=S.packageName:wn()?z.apn=S.packageName:Te(_,"operation-not-supported-in-this-environment"),S.displayName&&(z.appDisplayName=S.displayName),z.sessionId=k,xh(_,g,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,z)})).apply(this,arguments)}function Ii(){return(Ii=(0,c.Z)(function*(_){const{BuildInfo:f}=Gs(),g={};Qn()?g.iosBundleId=f.packageName:wn()?g.androidPackageName=f.packageName:Te(_,"operation-not-supported-in-this-environment"),yield Sl(_,g)})).apply(this,arguments)}function ud(){return(ud=(0,c.Z)(function*(_,f,g){const{cordova:v}=Gs();let S=()=>{};try{yield new Promise((k,z)=>{let se=null;function Be(){var ut;k();const In=null===(ut=v.plugins.browsertab)||void 0===ut?void 0:ut.close;"function"==typeof In&&In(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function tt(){se||(se=window.setTimeout(()=>{z(ve(_,"redirect-cancelled-by-user"))},2e3))}function mt(){"visible"===(null==document?void 0:document.visibilityState)&&tt()}f.addPassiveListener(Be),document.addEventListener("resume",tt,!1),wn()&&document.addEventListener("visibilitychange",mt,!1),S=()=>{f.removePassiveListener(Be),document.removeEventListener("resume",tt,!1),document.removeEventListener("visibilitychange",mt,!1),se&&window.clearTimeout(se)}})}finally{S()}})).apply(this,arguments)}function wa(_){return Kp.apply(this,arguments)}function Kp(){return(Kp=(0,c.Z)(function*(_){const f=yu(_),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function yu(_){if(X(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),g=new Uint8Array(f);for(let v=0;v<_.length;v++)g[v]=_.charCodeAt(v);return g}!function g_(_){(0,oe._registerComponent)(new ie.wA("auth",(f,{options:g})=>{const v=f.getProvider("app").getImmediate(),S=f.getProvider("heartbeat"),{apiKey:k,authDomain:z}=v.options;return((se,Be)=>{re(k&&!k.includes(":"),"invalid-api-key",{appName:se.name}),re(!(null==z?void 0:z.includes(":")),"argument-error",{appName:se.name});const tt={apiKey:k,authDomain:z,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ua(_)},mt=new ni(se,Be,tt);return function me(_,f){const g=(null==f?void 0:f.persistence)||[],v=(Array.isArray(g)?g:[g]).map(ne);(null==f?void 0:f.errorMap)&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(v,null==f?void 0:f.popupRedirectResolver)}(mt,g),mt})(v,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,v)=>{f.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new ie.wA("auth-internal",f=>{const g=Ne(f.getProvider("auth").getImmediate());return new Wp(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(f_,Oh,function p_(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,oe.registerVersion)(f_,Oh,"esm2017")}("Browser");class Fh extends bi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,c.Z)(function*(){yield f.initPromise})()}}function Ol(_){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,c.Z)(function*(_){const f=yield Nl()._get(Vh(_));return f&&(yield Nl()._remove(Vh(_))),f})).apply(this,arguments)}function kl(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*f.length);_.push(f.charAt(v))}return _.join("")}function Nl(){return ne(xn)}function Vh(_){return de("authEvent",_.config.apiKey,_.name)}function cd(_){if(!(null==_?void 0:_.includes("?")))return{};const[f,...g]=_.split("?");return(0,P.zd)(g.join("?"))}function Hh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function dd(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function Qp(_=(0,P.z$)()){return!("file:"!==dd()&&"ionic:"!==dd()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function wr(){try{const _=self.localStorage,f=Bo();if(_)return _.setItem(f,"1"),_.removeItem(f),!function Qo(_=(0,P.z$)()){return function w_(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function E_(_=(0,P.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,P.hl)()}catch(_){return _o()&&(0,P.hl)()}return!1}function _o(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ll(){return(function v_(){return"http:"===dd()||"https:"===dd()}()||(0,P.ru)()||Qp())&&!function hd(){return(0,P.b$)()||(0,P.UG)()}()&&wr()&&!_o()}function $h(){return Qp()&&"undefined"!=typeof document}function Ea(){return(Ea=(0,c.Z)(function*(){return!!$h()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const Ti={LOCAL:"local",NONE:"none",SESSION:"session"},Da=re,zh="persistence";function Ca(_){return qh.apply(this,arguments)}function qh(){return(qh=(0,c.Z)(function*(_){yield _._initializationPromise;const f=Vl(),g=de(zh,_.config.apiKey,_.name);f&&f.setItem(g,_._getPersistence())})).apply(this,arguments)}function Vl(){var _;try{return(null===(_=function Gh(){return"undefined"!=typeof window?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch(f){return null}}const D_=re;class di{constructor(){this.browserResolver=ne(class Ko{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fn,this._completeRedirectFn=bn}_openPopup(f,g,v,S){var k=this;return(0,c.Z)(function*(){var z;X(null===(z=k.eventManagers[f._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const se=xh(f,g,v,Le(),S);return function ad(_,f,g,v=500,S=600){const k=Math.max((window.screen.availHeight-S)/2,0).toString(),z=Math.max((window.screen.availWidth-v)/2,0).toString();let se="";const Be=Object.assign(Object.assign({},l_),{width:v.toString(),height:S.toString(),top:k,left:z}),tt=(0,P.z$)().toLowerCase();g&&(se=fr(tt)?"_blank":g),gt(tt)&&(f=f||"http://localhost",Be.scrollbars="yes");const mt=Object.entries(Be).reduce((In,[Hi,Bl])=>`${In}${Hi}=${Bl},`,"");if(function $a(_=(0,P.z$)()){var f;return Qn(_)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(tt)&&"_self"!==se)return function Mh(_,f){const g=document.createElement("a");g.href=_,g.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(f||"",se),new od(null);const ut=window.open(f||"",se,mt);re(ut,_,"popup-blocked");try{ut.focus()}catch(In){}return new od(ut)}(f,se,Bo())})()}_openRedirect(f,g,v,S){var k=this;return(0,c.Z)(function*(){return yield k._originValidation(f),function Ih(_){cn().location.href=_}(xh(f,g,v,Le(),S)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:S,promise:k}=this.eventManagers[g];return S?Promise.resolve(S):(X(k,"If manager is not set, promise should be"),k)}const v=this.initAndGetManager(f);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(f){var g=this;return(0,c.Z)(function*(){const v=yield function u_(_){return Zo.apply(this,arguments)}(f),S=new bi(f);return v.register("authEvent",k=>(re(null==k?void 0:k.authEvent,f,"invalid-auth-event"),{status:S.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:S},g.iframes[f._key()]=v,S})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send($s,{type:$s},S=>{var k;const z=null===(k=null==S?void 0:S[0])||void 0===k?void 0:k[$s];void 0!==z&&g(!!z),Te(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function i_(_){return as.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ki()||Zt()||Qn()}}),this.cordovaResolver=ne(class jh{constructor(){this._redirectPersistence=Fn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bn}_initialize(f){var g=this;return(0,c.Z)(function*(){const v=f._key();let S=g.eventManagers.get(v);return S||(S=new Fh(f),g.eventManagers.set(v,S),g.attachCallbackListeners(f,S)),S})()}_openPopup(f){Te(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,v,S){var k=this;return(0,c.Z)(function*(){!function ld(_){var f,g,v,S,k,z,se,Be,tt,mt;const ut=Gs();re("function"==typeof(null===(f=null==ut?void 0:ut.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(void 0!==(null===(g=null==ut?void 0:ut.BuildInfo)||void 0===g?void 0:g.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re("function"==typeof(null===(k=null===(S=null===(v=null==ut?void 0:ut.cordova)||void 0===v?void 0:v.plugins)||void 0===S?void 0:S.browsertab)||void 0===k?void 0:k.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(Be=null===(se=null===(z=null==ut?void 0:ut.cordova)||void 0===z?void 0:z.plugins)||void 0===se?void 0:se.browsertab)||void 0===Be?void 0:Be.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(mt=null===(tt=null==ut?void 0:ut.cordova)||void 0===tt?void 0:tt.InAppBrowser)||void 0===mt?void 0:mt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const z=yield k._initialize(f);yield z.initialized(),z.resetRedirect(),function pu(){ji.clear()}(),yield k._originValidation(f);const se=function Lh(_,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:kl(),postBody:null,tenantId:_.tenantId,error:ve(_,"no-auth-event")}}(f,v,S);yield function Gw(_,f){return Nl()._set(Vh(_),f)}(f,se);const Be=yield function kh(_,f,g){return _u.apply(this,arguments)}(f,se,g),tt=yield function Rl(_){const{cordova:f}=Gs();return new Promise(g=>{f.plugins.browsertab.isAvailable(v=>{let S=null;v?f.plugins.browsertab.openUrl(_):S=f.InAppBrowser.open(_,function Js(_=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),g(S)})})}(Be);return function Zp(_,f,g){return ud.apply(this,arguments)}(f,z,tt)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Nh(_){return Ii.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:v,handleOpenURL:S,BuildInfo:k}=Gs(),z=setTimeout((0,c.Z)(function*(){yield Ol(f),g.onEvent(Hh())}),500),se=function(){var mt=(0,c.Z)(function*(ut){clearTimeout(z);const In=yield Ol(f);let Hi=null;In&&(null==ut?void 0:ut.url)&&(Hi=function __(_,f){var g,v;const S=function Pl(_){const f=cd(_),g=f.link?decodeURIComponent(f.link):void 0,v=cd(g).link,S=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return cd(S).link||S||v||g||_}(f);if(S.includes("/__/auth/callback")){const k=cd(S),z=k.firebaseError?function Uh(_){try{return JSON.parse(_)}catch(f){return null}}(decodeURIComponent(k.firebaseError)):null,se=null===(v=null===(g=null==z?void 0:z.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Be=se?ve(se):null;return Be?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:S,postBody:null}}return null}(In,ut.url)),g.onEvent(Hi||Hh())});return function(In){return mt.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,se);const Be=S,tt=`${k.packageName.toLowerCase()}://`;Gs().handleOpenURL=function(){var mt=(0,c.Z)(function*(ut){if(ut.toLowerCase().startsWith(tt)&&se({url:ut}),"function"==typeof Be)try{Be(ut)}catch(In){console.error(In)}});return function(ut){return mt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Fn,this._completeRedirectFn=bn}_initialize(f){var g=this;return(0,c.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,v,S){var k=this;return(0,c.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openPopup(f,g,v,S)})()}_openRedirect(f,g,v,S){var k=this;return(0,c.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openRedirect(f,g,v,S)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return $h()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return D_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,c.Z)(function*(){if(f.underlyingResolver)return;const g=yield function kr(){return Ea.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function eg(_){return _.unwrap()}function ba(_){return tg(_)}function tg(_){const{_tokenResponse:f}=_ instanceof P.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof P.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ci.credentialFromResult(_);const g=f.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=ca;break;case"facebook.com":v=to;break;case"github.com":v=Fc;break;case"twitter.com":v=Ka;break;default:const{oauthIdToken:S,oauthAccessToken:k,oauthTokenSecret:z,pendingToken:se,nonce:Be}=f;return k||z||S||se?se?g.startsWith("saml.")?Po._create(g,se):Ji._fromParams({providerId:g,signInMethod:g,pendingToken:se,idToken:S,accessToken:k}):new No(g).credential({idToken:S,accessToken:k,rawNonce:Be}):null}return _ instanceof P.ZR?v.credentialFromError(_):v.credentialFromResult(_)}function Er(_,f){return f.catch(g=>{throw g instanceof P.ZR&&function b_(_,f){var g;const v=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new I_(_,function lu(_,f){var g;const v=(0,P.m9)(_),S=f;return re(f.customData.operationType,v,"argument-error"),re(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),ma._fromError(v,S)}(_,f));else if(v){const S=tg(f),k=f;S&&(k.credential=S,k.tenantId=v.tenantId||void 0,k.email=v.email||void 0,k.phoneNumber=v.phoneNumber||void 0)}}(_,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:ba(g),additionalUserInfo:mr(g),user:yo.getOrCreate(S)}})}function Wh(_,f){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,c.Z)(function*(_,f){const g=yield f;return{verificationId:g.verificationId,confirm:v=>Er(_,g.confirm(v))}})).apply(this,arguments)}class I_{constructor(f,g){this.resolver=g,this.auth=function C_(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Er(eg(this.auth),this.resolver.resolveSignIn(f))}}class yo{constructor(f){this._delegate=f,this.multiFactor=function zc(_){const f=(0,P.m9)(_);return Uo.has(f)||Uo.set(f,ns._fromUser(f)),Uo.get(f)}(f)}static getOrCreate(f){return yo.USER_MAP.has(f)||yo.USER_MAP.set(f,new yo(f)),yo.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,c.Z)(function*(){return Er(g.auth,_i(g._delegate,f))})()}linkWithPhoneNumber(f,g){var v=this;return(0,c.Z)(function*(){return Wh(v.auth,function vl(_,f,g){return zo.apply(this,arguments)}(v._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,c.Z)(function*(){return Er(g.auth,function Ui(_,f,g){return fu.apply(this,arguments)}(g._delegate,f,di))})()}linkWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Ca(Ne(g.auth)),function et(_,f,g){return function wt(_,f,g){return Tt.apply(this,arguments)}(_,f,g)}(g._delegate,f,di)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,c.Z)(function*(){return Er(g.auth,Ss(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Wh(this.auth,function $p(_,f,g){return wl.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Er(this.auth,function co(_,f,g){return hu.apply(this,arguments)}(this._delegate,f,di))}reauthenticateWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Ca(Ne(g.auth)),function te(_,f,g){return function Me(_,f,g){return xe.apply(this,arguments)}(_,f,g)}(g._delegate,f,di)})()}sendEmailVerification(f){return function yi(_,f){return al.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,c.Z)(function*(){return yield function da(_,f){return el.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function cl(_,f){return dl((0,P.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function Bc(_,f){return dl((0,P.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function El(_,f){return os.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function ga(_,f){return ll.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function au(_,f,g){return uu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}yo.USER_MAP=new WeakMap;const Ul=re;let Kh=(()=>{class _{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;Ul(S,"invalid-api-key",{appName:g.name}),Ul(S,"invalid-api-key",{appName:g.name});const k="undefined"!=typeof window?di:void 0;this._delegate=v.initialize({options:{persistence:T_(S,g.name),popupRedirectResolver:k}}),this._delegate._updateErrorMap(ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?yo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function ln(_,f,g){const v=Ne(_);re(v._canInitEmulator,v,"emulator-config-failed"),re(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const S=!!(null==g?void 0:g.disableWarnings),k=sr(f),{host:z,port:se}=function ws(_){const f=sr(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(v);if(S){const k=S[1];return{host:k,port:kn(v.substr(k.length+1))}}{const[k,z]=v.split(":");return{host:k,port:kn(z)}}}(f);v.config.emulator={url:`${k}//${z}${null===se?"":`:${se}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:z,port:se,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Ni(){function _(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,g,v)}applyActionCode(g){return function nl(_,f){return Ce.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Ot(this._delegate,g)}confirmPasswordReset(g,v){return function iu(_,f,g){return tl.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var S=this;return(0,c.Z)(function*(){return Er(S._delegate,function Vo(_,f,g){return zr.apply(this,arguments)}(S._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function ou(_,f){return Os.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function ol(_,f){const g=eo.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,c.Z)(function*(){Ul(Ll(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function Dt(_,f){return Ln.apply(this,arguments)}(g._delegate,di);return v?Er(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Yp(_,f){Ne(_)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,v,S){const{next:k,error:z,complete:se}=Yh(g,v,S);return this._delegate.onAuthStateChanged(k,z,se)}onIdTokenChanged(g,v,S){const{next:k,error:z,complete:se}=Yh(g,v,S);return this._delegate.onIdTokenChanged(k,z,se)}sendSignInLinkToEmail(g,v){return function sl(_,f,g){return Uc.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function nu(_,f,g){return ru.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,c.Z)(function*(){let S;switch(function Jp(_,f){Da(Object.values(Ti).includes(f),_,"invalid-persistence-type"),(0,P.b$)()?Da(f!==Ti.SESSION,_,"unsupported-persistence-type"):(0,P.UG)()?Da(f===Ti.NONE,_,"unsupported-persistence-type"):_o()?Da(f===Ti.NONE||f===Ti.LOCAL&&(0,P.hl)(),_,"unsupported-persistence-type"):Da(f===Ti.NONE||wr(),_,"unsupported-persistence-type")}(v._delegate,g),g){case Ti.SESSION:S=Fn;break;case Ti.LOCAL:S=(yield ne(wi)._isAvailable())?wi:xn;break;case Ti.NONE:S=G;break;default:return Te("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Er(this._delegate,function Qa(_){return Lc.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Er(this._delegate,Mn(this._delegate,g))}signInWithCustomToken(g){return Er(this._delegate,function Ms(_,f){return xs.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return Er(this._delegate,function il(_,f,g){return Mn((0,P.m9)(_),Xu.credential(f,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return Er(this._delegate,function su(_,f,g){return Rs.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Wh(this._delegate,function du(_,f,g){return _n.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,c.Z)(function*(){return Ul(Ll(),v._delegate,"operation-not-supported-in-this-environment"),Er(v._delegate,function Hs(_,f,g){return Xc.apply(this,arguments)}(v._delegate,g,di))})()}signInWithRedirect(g){var v=this;return(0,c.Z)(function*(){return Ul(Ll(),v._delegate,"operation-not-supported-in-this-environment"),yield Ca(v._delegate),function R(_,f,g){return function L(_,f,g){return q.apply(this,arguments)}(_,f,g)}(v._delegate,g,di)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function pn(_,f){return Lo.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Ti,_})();function Yh(_,f,g){let v=_;"function"!=typeof _&&({next:v,error:f,complete:g}=_);const S=v;return{next:z=>S(z&&yo.getOrCreate(z)),error:f,complete:g}}function T_(_,f){const g=function Xp(_,f){const g=Vl();if(!g)return[];const v=de(zh,_,f);switch(g.getItem(v)){case Ti.NONE:return[G];case Ti.LOCAL:return[wi,Fn];case Ti.SESSION:return[Fn];default:return[]}}(_,f);if("undefined"!=typeof self&&!g.includes(wi)&&g.push(wi),"undefined"!=typeof window)for(const v of[xn,Fn])g.includes(v)||g.push(v);return g.includes(G)||g.push(G),g}class Qh{constructor(){this.providerId="phone",this._delegate=new Ci(eg(Y.Z.auth()))}static credential(f,g){return Ci.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Qh.PHONE_SIGN_IN_METHOD=Ci.PHONE_SIGN_IN_METHOD,Qh.PROVIDER_ID=Ci.PROVIDER_ID;const A_=re;class S_{constructor(f,g,v=Y.Z.app()){var S;A_(null===(S=v.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Hp(f,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ng(_){_.INTERNAL.registerComponent(new ie.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new Kh(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Xu,FacebookAuthProvider:to,GithubAuthProvider:Fc,GoogleAuthProvider:ca,OAuthProvider:No,SAMLAuthProvider:ii,PhoneAuthProvider:Qh,PhoneMultiFactorGenerator:h_,RecaptchaVerifier:S_,TwitterAuthProvider:Ka,Auth:Kh,AuthCredential:rn,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.12")}(Y.Z)},8306:(at,Ie,N)=>{N.d(Ie,{y:()=>H});var c=N(930),Y=N(727),P=N(8822),oe=N(4671);var ie=N(2416),he=N(576),ce=N(2806);let H=(()=>{class Se{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const fe=new Se;return fe.source=this,fe.operator=Ve,fe}subscribe(Ve,fe,Ee){const nt=function We(Se){return Se&&Se instanceof c.Lv||function J(Se){return Se&&(0,he.m)(Se.next)&&(0,he.m)(Se.error)&&(0,he.m)(Se.complete)}(Se)&&(0,Y.Nn)(Se)}(Ve)?Ve:new c.Hp(Ve,fe,Ee);return(0,ce.x)(()=>{const{operator:Ye,source:Te}=this;nt.add(Ye?Ye.call(nt,Te):Te?this._subscribe(nt):this._trySubscribe(nt))}),nt}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(fe){Ve.error(fe)}}forEach(Ve,fe){return new(fe=$(fe))((Ee,nt)=>{const Ye=new c.Hp({next:Te=>{try{Ve(Te)}catch(ve){nt(ve),Ye.unsubscribe()}},error:nt,complete:Ee});this.subscribe(Ye)})}_subscribe(Ve){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Ve)}[P.L](){return this}pipe(...Ve){return function ge(Se){return 0===Se.length?oe.y:1===Se.length?Se[0]:function(Ve){return Se.reduce((fe,Ee)=>Ee(fe),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=$(Ve))((fe,Ee)=>{let nt;this.subscribe(Ye=>nt=Ye,Ye=>Ee(Ye),()=>fe(nt))})}}return Se.create=ke=>new Se(ke),Se})();function $(Se){var ke;return null!==(ke=null!=Se?Se:ie.v.Promise)&&void 0!==ke?ke:Promise}},7579:(at,Ie,N)=>{N.d(Ie,{x:()=>ie});var c=N(8306),Y=N(727);const oe=(0,N(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ee=N(8737),ge=N(2806);let ie=(()=>{class ce extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const J=new he(this,this);return J.operator=$,J}_throwIfClosed(){if(this.closed)throw new oe}next($){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next($)}})}error($){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:J}=this;for(;J.length;)J.shift().error($)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:J,isStopped:We,observers:Se}=this;return J||We?Y.Lc:(this.currentObservers=null,Se.push($),new Y.w0(()=>{this.currentObservers=null,(0,ee.P)(Se,$)}))}_checkFinalizedStatuses($){const{hasError:J,thrownError:We,isStopped:Se}=this;J?$.error(We):Se&&$.complete()}asObservable(){const $=new c.y;return $.source=this,$}}return ce.create=(H,$)=>new he(H,$),ce})();class he extends ie{constructor(H,$){super(),this.destination=H,this.source=$}next(H){var $,J;null===(J=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===J||J.call($,H)}error(H){var $,J;null===(J=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===J||J.call($,H)}complete(){var H,$;null===($=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===$||$.call(H)}_subscribe(H){var $,J;return null!==(J=null===($=this.source)||void 0===$?void 0:$.subscribe(H))&&void 0!==J?J:Y.Lc}}},930:(at,Ie,N)=>{N.d(Ie,{Hp:()=>Ve,Lv:()=>J});var c=N(576),Y=N(727),P=N(2416),oe=N(7849),ee=N(5032);const ge=ce("C",void 0,void 0);function ce(Te,ve,we){return{kind:Te,value:ve,error:we}}var H=N(3410),$=N(2806);class J extends Y.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,Y.Nn)(ve)&&ve.add(this)):this.destination=Ye}static create(ve,we,Ge){return new Ve(ve,we,Ge)}next(ve){this.isStopped?nt(function he(Te){return ce("N",Te,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?nt(function ie(Te){return ce("E",void 0,Te)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?nt(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Se(Te,ve){return We.call(Te,ve)}class ke{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:we}=this;if(we.next)try{we.next(ve)}catch(Ge){fe(Ge)}}error(ve){const{partialObserver:we}=this;if(we.error)try{we.error(ve)}catch(Ge){fe(Ge)}else fe(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(we){fe(we)}}}class Ve extends J{constructor(ve,we,Ge){let $e;if(super(),(0,c.m)(ve)||!ve)$e={next:null!=ve?ve:void 0,error:null!=we?we:void 0,complete:null!=Ge?Ge:void 0};else{let re;this&&P.v.useDeprecatedNextContext?(re=Object.create(ve),re.unsubscribe=()=>this.unsubscribe(),$e={next:ve.next&&Se(ve.next,re),error:ve.error&&Se(ve.error,re),complete:ve.complete&&Se(ve.complete,re)}):$e=ve}this.destination=new ke($e)}}function fe(Te){P.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Te):(0,oe.h)(Te)}function nt(Te,ve){const{onStoppedNotification:we}=P.v;we&&H.z.setTimeout(()=>we(Te,ve))}const Ye={closed:!0,next:ee.Z,error:function Ee(Te){throw Te},complete:ee.Z}},727:(at,Ie,N)=>{N.d(Ie,{Lc:()=>ge,w0:()=>ee,Nn:()=>ie});var c=N(576);const P=(0,N(3888).d)(ce=>function($){ce(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((J,We)=>`${We+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var oe=N(8737);class ee{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Se of $)Se.remove(this);else $.remove(this);const{initialTeardown:J}=this;if((0,c.m)(J))try{J()}catch(Se){H=Se instanceof P?Se.errors:[Se]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Se of We)try{he(Se)}catch(ke){H=null!=H?H:[],ke instanceof P?H=[...H,...ke.errors]:H.push(ke)}}if(H)throw new P(H)}}add(H){var $;if(H&&H!==this)if(this.closed)he(H);else{if(H instanceof ee){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(H)}}_hasParent(H){const{_parentage:$}=this;return $===H||Array.isArray($)&&$.includes(H)}_addParent(H){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(H),$):$?[$,H]:H}_removeParent(H){const{_parentage:$}=this;$===H?this._parentage=null:Array.isArray($)&&(0,oe.P)($,H)}remove(H){const{_finalizers:$}=this;$&&(0,oe.P)($,H),H instanceof ee&&H._removeParent(this)}}ee.EMPTY=(()=>{const ce=new ee;return ce.closed=!0,ce})();const ge=ee.EMPTY;function ie(ce){return ce instanceof ee||ce&&"closed"in ce&&(0,c.m)(ce.remove)&&(0,c.m)(ce.add)&&(0,c.m)(ce.unsubscribe)}function he(ce){(0,c.m)(ce)?ce():ce.unsubscribe()}},2416:(at,Ie,N)=>{N.d(Ie,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,Ie,N)=>{N.d(Ie,{E:()=>Y});const Y=new(N(8306).y)(ee=>ee.complete())},8996:(at,Ie,N)=>{N.d(Ie,{D:()=>ve});var c=N(8421),Y=N(5363),P=N(9468),ge=N(8306),he=N(2202),ce=N(576),H=N(9672);function J(we,Ge){if(!we)throw new Error("Iterable cannot be null");return new ge.y($e=>{(0,H.f)($e,Ge,()=>{const re=we[Symbol.asyncIterator]();(0,H.f)($e,Ge,()=>{re.next().then(Ke=>{Ke.done?$e.complete():$e.next(Ke.value)})},0,!0)})})}var We=N(3670),Se=N(8239),ke=N(1144),Ve=N(6495),fe=N(2206),Ee=N(4532),nt=N(3260);function ve(we,Ge){return Ge?function Te(we,Ge){if(null!=we){if((0,We.c)(we))return function oe(we,Ge){return(0,c.Xf)(we).pipe((0,P.R)(Ge),(0,Y.Q)(Ge))}(we,Ge);if((0,ke.z)(we))return function ie(we,Ge){return new ge.y($e=>{let re=0;return Ge.schedule(function(){re===we.length?$e.complete():($e.next(we[re++]),$e.closed||this.schedule())})})}(we,Ge);if((0,Se.t)(we))return function ee(we,Ge){return(0,c.Xf)(we).pipe((0,P.R)(Ge),(0,Y.Q)(Ge))}(we,Ge);if((0,fe.D)(we))return J(we,Ge);if((0,Ve.T)(we))return function $(we,Ge){return new ge.y($e=>{let re;return(0,H.f)($e,Ge,()=>{re=we[he.h](),(0,H.f)($e,Ge,()=>{let Ke,X;try{({value:Ke,done:X}=re.next())}catch(ae){return void $e.error(ae)}X?$e.complete():$e.next(Ke)},0,!0)}),()=>(0,ce.m)(null==re?void 0:re.return)&&re.return()})}(we,Ge);if((0,nt.L)(we))return function Ye(we,Ge){return J((0,nt.Q)(we),Ge)}(we,Ge)}throw(0,Ee.z)(we)}(we,Ge):(0,c.Xf)(we)}},8421:(at,Ie,N)=>{N.d(Ie,{Xf:()=>We});var c=N(655),Y=N(1144),P=N(8239),oe=N(8306),ee=N(3670),ge=N(2206),ie=N(4532),he=N(6495),ce=N(3260),H=N(576),$=N(7849),J=N(8822);function We(Te){if(Te instanceof oe.y)return Te;if(null!=Te){if((0,ee.c)(Te))return function Se(Te){return new oe.y(ve=>{const we=Te[J.L]();if((0,H.m)(we.subscribe))return we.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,Y.z)(Te))return function ke(Te){return new oe.y(ve=>{for(let we=0;we<Te.length&&!ve.closed;we++)ve.next(Te[we]);ve.complete()})}(Te);if((0,P.t)(Te))return function Ve(Te){return new oe.y(ve=>{Te.then(we=>{ve.closed||(ve.next(we),ve.complete())},we=>ve.error(we)).then(null,$.h)})}(Te);if((0,ge.D)(Te))return Ee(Te);if((0,he.T)(Te))return function fe(Te){return new oe.y(ve=>{for(const we of Te)if(ve.next(we),ve.closed)return;ve.complete()})}(Te);if((0,ce.L)(Te))return function nt(Te){return Ee((0,ce.Q)(Te))}(Te)}throw(0,ie.z)(Te)}function Ee(Te){return new oe.y(ve=>{(function Ye(Te,ve){var we,Ge,$e,re;return(0,c.mG)(this,void 0,void 0,function*(){try{for(we=(0,c.KL)(Te);!(Ge=yield we.next()).done;)if(ve.next(Ge.value),ve.closed)return}catch(Ke){$e={error:Ke}}finally{try{Ge&&!Ge.done&&(re=we.return)&&(yield re.call(we))}finally{if($e)throw $e.error}}ve.complete()})})(Te,ve).catch(we=>ve.error(we))})}},6451:(at,Ie,N)=>{N.d(Ie,{T:()=>ge});var c=N(8189),Y=N(8421),P=N(515),oe=N(3269),ee=N(8996);function ge(...ie){const he=(0,oe.yG)(ie),ce=(0,oe._6)(ie,1/0),H=ie;return H.length?1===H.length?(0,Y.Xf)(H[0]):(0,c.J)(ce)((0,ee.D)(H,he)):P.E}},5403:(at,Ie,N)=>{N.d(Ie,{x:()=>Y});var c=N(930);function Y(oe,ee,ge,ie,he){return new P(oe,ee,ge,ie,he)}class P extends c.Lv{constructor(ee,ge,ie,he,ce,H){super(ee),this.onFinalize=ce,this.shouldUnsubscribe=H,this._next=ge?function($){try{ge($)}catch(J){ee.error(J)}}:super._next,this._error=he?function($){try{he($)}catch(J){ee.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch($){ee.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ee;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(ee=this.onFinalize)||void 0===ee||ee.call(this))}}}},4004:(at,Ie,N)=>{N.d(Ie,{U:()=>P});var c=N(4482),Y=N(5403);function P(oe,ee){return(0,c.e)((ge,ie)=>{let he=0;ge.subscribe((0,Y.x)(ie,ce=>{ie.next(oe.call(ee,ce,he++))}))})}},8189:(at,Ie,N)=>{N.d(Ie,{J:()=>P});var c=N(5577),Y=N(4671);function P(oe=1/0){return(0,c.z)(Y.y,oe)}},5577:(at,Ie,N)=>{N.d(Ie,{z:()=>he});var c=N(4004),Y=N(8421),P=N(4482),oe=N(9672),ee=N(5403),ie=N(576);function he(ce,H,$=1/0){return(0,ie.m)(H)?he((J,We)=>(0,c.U)((Se,ke)=>H(J,Se,We,ke))((0,Y.Xf)(ce(J,We))),$):("number"==typeof H&&($=H),(0,P.e)((J,We)=>function ge(ce,H,$,J,We,Se,ke,Ve){const fe=[];let Ee=0,nt=0,Ye=!1;const Te=()=>{Ye&&!fe.length&&!Ee&&H.complete()},ve=Ge=>Ee<J?we(Ge):fe.push(Ge),we=Ge=>{Se&&H.next(Ge),Ee++;let $e=!1;(0,Y.Xf)($(Ge,nt++)).subscribe((0,ee.x)(H,re=>{null==We||We(re),Se?ve(re):H.next(re)},()=>{$e=!0},void 0,()=>{if($e)try{for(Ee--;fe.length&&Ee<J;){const re=fe.shift();ke?(0,oe.f)(H,ke,()=>we(re)):we(re)}Te()}catch(re){H.error(re)}}))};return ce.subscribe((0,ee.x)(H,ve,()=>{Ye=!0,Te()})),()=>{null==Ve||Ve()}}(J,We,ce,$)))}},5363:(at,Ie,N)=>{N.d(Ie,{Q:()=>oe});var c=N(9672),Y=N(4482),P=N(5403);function oe(ee,ge=0){return(0,Y.e)((ie,he)=>{ie.subscribe((0,P.x)(he,ce=>(0,c.f)(he,ee,()=>he.next(ce),ge),()=>(0,c.f)(he,ee,()=>he.complete(),ge),ce=>(0,c.f)(he,ee,()=>he.error(ce),ge)))})}},3099:(at,Ie,N)=>{N.d(Ie,{B:()=>ge});var c=N(8996),Y=N(5698),P=N(7579),oe=N(930),ee=N(4482);function ge(he={}){const{connector:ce=(()=>new P.x),resetOnError:H=!0,resetOnComplete:$=!0,resetOnRefCountZero:J=!0}=he;return We=>{let Se=null,ke=null,Ve=null,fe=0,Ee=!1,nt=!1;const Ye=()=>{null==ke||ke.unsubscribe(),ke=null},Te=()=>{Ye(),Se=Ve=null,Ee=nt=!1},ve=()=>{const we=Se;Te(),null==we||we.unsubscribe()};return(0,ee.e)((we,Ge)=>{fe++,!nt&&!Ee&&Ye();const $e=Ve=null!=Ve?Ve:ce();Ge.add(()=>{fe--,0===fe&&!nt&&!Ee&&(ke=ie(ve,J))}),$e.subscribe(Ge),Se||(Se=new oe.Hp({next:re=>$e.next(re),error:re=>{nt=!0,Ye(),ke=ie(Te,H,re),$e.error(re)},complete:()=>{Ee=!0,Ye(),ke=ie(Te,$),$e.complete()}}),(0,c.D)(we).subscribe(Se))})(We)}}function ie(he,ce,...H){return!0===ce?(he(),null):!1===ce?null:ce(...H).pipe((0,Y.q)(1)).subscribe(()=>he())}},9468:(at,Ie,N)=>{N.d(Ie,{R:()=>Y});var c=N(4482);function Y(P,oe=0){return(0,c.e)((ee,ge)=>{ge.add(P.schedule(()=>ee.subscribe(ge),oe))})}},5698:(at,Ie,N)=>{N.d(Ie,{q:()=>oe});var c=N(515),Y=N(4482),P=N(5403);function oe(ee){return ee<=0?()=>c.E:(0,Y.e)((ge,ie)=>{let he=0;ge.subscribe((0,P.x)(ie,ce=>{++he<=ee&&(ie.next(ce),ee<=he&&ie.complete())}))})}},8505:(at,Ie,N)=>{N.d(Ie,{b:()=>ee});var c=N(576),Y=N(4482),P=N(5403),oe=N(4671);function ee(ge,ie,he){const ce=(0,c.m)(ge)||ie||he?{next:ge,error:ie,complete:he}:ge;return ce?(0,Y.e)((H,$)=>{var J;null===(J=ce.subscribe)||void 0===J||J.call(ce);let We=!0;H.subscribe((0,P.x)($,Se=>{var ke;null===(ke=ce.next)||void 0===ke||ke.call(ce,Se),$.next(Se)},()=>{var Se;We=!1,null===(Se=ce.complete)||void 0===Se||Se.call(ce),$.complete()},Se=>{var ke;We=!1,null===(ke=ce.error)||void 0===ke||ke.call(ce,Se),$.error(Se)},()=>{var Se,ke;We&&(null===(Se=ce.unsubscribe)||void 0===Se||Se.call(ce)),null===(ke=ce.finalize)||void 0===ke||ke.call(ce)}))}):oe.y}},4408:(at,Ie,N)=>{N.d(Ie,{o:()=>ee});var c=N(727);class Y extends c.w0{constructor(ie,he){super()}schedule(ie,he=0){return this}}const P={setInterval(ge,ie,...he){const{delegate:ce}=P;return(null==ce?void 0:ce.setInterval)?ce.setInterval(ge,ie,...he):setInterval(ge,ie,...he)},clearInterval(ge){const{delegate:ie}=P;return((null==ie?void 0:ie.clearInterval)||clearInterval)(ge)},delegate:void 0};var oe=N(8737);class ee extends Y{constructor(ie,he){super(ie,he),this.scheduler=ie,this.work=he,this.pending=!1}schedule(ie,he=0){if(this.closed)return this;this.state=ie;const ce=this.id,H=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId(H,ce,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(H,this.id,he),this}requestAsyncId(ie,he,ce=0){return P.setInterval(ie.flush.bind(ie,this),ce)}recycleAsyncId(ie,he,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return he;P.clearInterval(he)}execute(ie,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(ie,he);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,he){let H,ce=!1;try{this.work(ie)}catch($){ce=!0,H=$||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:ie,scheduler:he}=this,{actions:ce}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ce,this),null!=ie&&(this.id=this.recycleAsyncId(he,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,Ie,N)=>{N.d(Ie,{v:()=>P});var c=N(6063);class Y{constructor(ee,ge=Y.now){this.schedulerActionCtor=ee,this.now=ge}schedule(ee,ge=0,ie){return new this.schedulerActionCtor(this,ee).schedule(ie,ge)}}Y.now=c.l.now;class P extends Y{constructor(ee,ge=Y.now){super(ee,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ee){const{actions:ge}=this;if(this._active)return void ge.push(ee);let ie;this._active=!0;do{if(ie=ee.execute(ee.state,ee.delay))break}while(ee=ge.shift());if(this._active=!1,ie){for(;ee=ge.shift();)ee.unsubscribe();throw ie}}}},4986:(at,Ie,N)=>{N.d(Ie,{P:()=>oe,z:()=>P});var c=N(4408);const P=new(N(7565).v)(c.o),oe=P},6063:(at,Ie,N)=>{N.d(Ie,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(at,Ie,N)=>{N.d(Ie,{z:()=>c});const c={setTimeout(Y,P,...oe){const{delegate:ee}=c;return(null==ee?void 0:ee.setTimeout)?ee.setTimeout(Y,P,...oe):setTimeout(Y,P,...oe)},clearTimeout(Y){const{delegate:P}=c;return((null==P?void 0:P.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(at,Ie,N)=>{N.d(Ie,{h:()=>Y});const Y=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,Ie,N)=>{N.d(Ie,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(at,Ie,N)=>{N.d(Ie,{_6:()=>ge,jO:()=>oe,yG:()=>ee});var c=N(576),Y=N(3532);function P(ie){return ie[ie.length-1]}function oe(ie){return(0,c.m)(P(ie))?ie.pop():void 0}function ee(ie){return(0,Y.K)(P(ie))?ie.pop():void 0}function ge(ie,he){return"number"==typeof P(ie)?ie.pop():he}},8737:(at,Ie,N)=>{function c(Y,P){if(Y){const oe=Y.indexOf(P);0<=oe&&Y.splice(oe,1)}}N.d(Ie,{P:()=>c})},3888:(at,Ie,N)=>{function c(Y){const oe=Y(ee=>{Error.call(ee),ee.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}N.d(Ie,{d:()=>c})},2806:(at,Ie,N)=>{N.d(Ie,{O:()=>oe,x:()=>P});var c=N(2416);let Y=null;function P(ee){if(c.v.useDeprecatedSynchronousErrorHandling){const ge=!Y;if(ge&&(Y={errorThrown:!1,error:null}),ee(),ge){const{errorThrown:ie,error:he}=Y;if(Y=null,ie)throw he}}else ee()}function oe(ee){c.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=ee)}},9672:(at,Ie,N)=>{function c(Y,P,oe,ee=0,ge=!1){const ie=P.schedule(function(){oe(),ge?Y.add(this.schedule(null,ee)):this.unsubscribe()},ee);if(Y.add(ie),!ge)return ie}N.d(Ie,{f:()=>c})},4671:(at,Ie,N)=>{function c(Y){return Y}N.d(Ie,{y:()=>c})},1144:(at,Ie,N)=>{N.d(Ie,{z:()=>c});const c=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(at,Ie,N)=>{N.d(Ie,{D:()=>Y});var c=N(576);function Y(P){return Symbol.asyncIterator&&(0,c.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(at,Ie,N)=>{function c(Y){return"function"==typeof Y}N.d(Ie,{m:()=>c})},3670:(at,Ie,N)=>{N.d(Ie,{c:()=>P});var c=N(8822),Y=N(576);function P(oe){return(0,Y.m)(oe[c.L])}},6495:(at,Ie,N)=>{N.d(Ie,{T:()=>P});var c=N(2202),Y=N(576);function P(oe){return(0,Y.m)(null==oe?void 0:oe[c.h])}},8239:(at,Ie,N)=>{N.d(Ie,{t:()=>Y});var c=N(576);function Y(P){return(0,c.m)(null==P?void 0:P.then)}},3260:(at,Ie,N)=>{N.d(Ie,{L:()=>oe,Q:()=>P});var c=N(655),Y=N(576);function P(ee){return(0,c.FC)(this,arguments,function*(){const ie=ee.getReader();try{for(;;){const{value:he,done:ce}=yield(0,c.qq)(ie.read());if(ce)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(he)}}finally{ie.releaseLock()}})}function oe(ee){return(0,Y.m)(null==ee?void 0:ee.getReader)}},3532:(at,Ie,N)=>{N.d(Ie,{K:()=>Y});var c=N(576);function Y(P){return P&&(0,c.m)(P.schedule)}},4482:(at,Ie,N)=>{N.d(Ie,{A:()=>Y,e:()=>P});var c=N(576);function Y(oe){return(0,c.m)(null==oe?void 0:oe.lift)}function P(oe){return ee=>{if(Y(ee))return ee.lift(function(ge){try{return oe(ge,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(at,Ie,N)=>{function c(){}N.d(Ie,{Z:()=>c})},7849:(at,Ie,N)=>{N.d(Ie,{h:()=>P});var c=N(2416),Y=N(3410);function P(oe){Y.z.setTimeout(()=>{const{onUnhandledError:ee}=c.v;if(!ee)throw oe;ee(oe)})}},4532:(at,Ie,N)=>{function c(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(Ie,{z:()=>c})},655:(at,Ie,N)=>{function oe(X,ae){var ne={};for(var De in X)Object.prototype.hasOwnProperty.call(X,De)&&ae.indexOf(De)<0&&(ne[De]=X[De]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var me=0;for(De=Object.getOwnPropertySymbols(X);me<De.length;me++)ae.indexOf(De[me])<0&&Object.prototype.propertyIsEnumerable.call(X,De[me])&&(ne[De[me]]=X[De[me]])}return ne}function he(X,ae,ne,De){return new(ne||(ne=Promise))(function(Le,Et){function zt(Bt){try{ze(De.next(Bt))}catch(Zn){Et(Zn)}}function nn(Bt){try{ze(De.throw(Bt))}catch(Zn){Et(Zn)}}function ze(Bt){Bt.done?Le(Bt.value):function me(Le){return Le instanceof ne?Le:new ne(function(Et){Et(Le)})}(Bt.value).then(zt,nn)}ze((De=De.apply(X,ae||[])).next())})}function fe(X){return this instanceof fe?(this.v=X,this):new fe(X)}function Ee(X,ae,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,De=ne.apply(X,ae||[]),Le=[];return me={},Et("next"),Et("throw"),Et("return"),me[Symbol.asyncIterator]=function(){return this},me;function Et(vn){De[vn]&&(me[vn]=function(Qt){return new Promise(function(gi,Wt){Le.push([vn,Qt,gi,Wt])>1||zt(vn,Qt)})})}function zt(vn,Qt){try{!function nn(vn){vn.value instanceof fe?Promise.resolve(vn.value.v).then(ze,Bt):Zn(Le[0][2],vn)}(De[vn](Qt))}catch(gi){Zn(Le[0][3],gi)}}function ze(vn){zt("next",vn)}function Bt(vn){zt("throw",vn)}function Zn(vn,Qt){vn(Qt),Le.shift(),Le.length&&zt(Le[0][0],Le[0][1])}}function Ye(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,ae=X[Symbol.asyncIterator];return ae?ae.call(X):(X=function J(X){var ae="function"==typeof Symbol&&Symbol.iterator,ne=ae&&X[ae],De=0;if(ne)return ne.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&De>=X.length&&(X=void 0),{value:X&&X[De++],done:!X}}};throw new TypeError(ae?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),ne={},De("next"),De("throw"),De("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function De(Le){ne[Le]=X[Le]&&function(Et){return new Promise(function(zt,nn){!function me(Le,Et,zt,nn){Promise.resolve(nn).then(function(ze){Le({value:ze,done:zt})},Et)}(zt,nn,(Et=X[Le](Et)).done,Et.value)})}}}N.d(Ie,{FC:()=>Ee,KL:()=>Ye,_T:()=>oe,mG:()=>he,qq:()=>fe})},5e3:(at,Ie,N)=>{N.d(Ie,{$8M:()=>Vs,$Z:()=>br,AFp:()=>Nm,AaK:()=>he,BQk:()=>Nu,CHM:()=>rl,CRH:()=>Tr,CZH:()=>Nv,CqO:()=>Vy,EJc:()=>dh,EpF:()=>ea,F$t:()=>ac,F4k:()=>kd,FYo:()=>cm,FiY:()=>ci,G48:()=>ja,Gf:()=>SD,GfV:()=>dm,GkF:()=>Ly,Gpc:()=>$,Hsn:()=>Gg,JOm:()=>se,LFG:()=>et,LSH:()=>vu,Lbi:()=>Pv,MAs:()=>Ry,NdJ:()=>je,OlP:()=>mn,Oqu:()=>Vu,PXZ:()=>ZD,Q6J:()=>ku,QGY:()=>Ma,Qsj:()=>sD,R0b:()=>fs,RDi:()=>Xi,Rgc:()=>La,SBq:()=>Na,Sil:()=>Lv,Suo:()=>wm,TTD:()=>to,TgZ:()=>$g,Udp:()=>Ud,VLi:()=>UI,X6Q:()=>Qv,XFs:()=>lt,Xpm:()=>Rt,Y36:()=>xf,YKP:()=>dD,YNc:()=>K0,Yjl:()=>fr,Yz7:()=>Qt,ZZ4:()=>hh,_Bn:()=>um,_UZ:()=>On,_Vd:()=>ia,_c5:()=>YI,_uU:()=>Kg,aQg:()=>yp,c2e:()=>Zu,cJS:()=>Wt,cg1:()=>zn,dDg:()=>qD,deG:()=>Up,dqk:()=>Vt,eFA:()=>Zv,ekj:()=>Wg,f3M:()=>Tt,g9A:()=>Fm,h0i:()=>xo,hGG:()=>QI,hij:()=>Si,iGM:()=>AD,ifc:()=>Ht,ip1:()=>km,kL8:()=>ev,lG2:()=>Zt,n5z:()=>Qc,oAB:()=>Q,oxw:()=>xa,q4F:()=>th,qLn:()=>Er,qOj:()=>by,qZA:()=>Do,s9C:()=>Ra,sBO:()=>HI,sIi:()=>xd,s_b:()=>tp,soG:()=>Ku,tBr:()=>Or,tb:()=>Lm,tp0:()=>po,uIk:()=>Vg,vHH:()=>ke,vpe:()=>Ro,wAp:()=>Qe,xp6:()=>n0,ynx:()=>Rf,z2F:()=>dp,zSh:()=>Sg,zs3:()=>Kr});var c=N(7579),Y=N(727),P=N(8306),oe=N(6451),ee=N(3099);function ge(i){for(let o in i)if(i[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function ie(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function he(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(he).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ce(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const H=ge({__forward_ref__:ge});function $(i){return i.__forward_ref__=$,i.toString=function(){return he(this())},i}function J(i){return We(i)?i():i}function We(i){return"function"==typeof i&&i.hasOwnProperty(H)&&i.__forward_ref__===$}class ke extends Error{constructor(o,a){super(function Ve(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function fe(i){return"string"==typeof i?i:null==i?"":String(i)}function Ee(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():fe(i)}function ve(i,o){const a=o?` in ${o}`:"";throw new ke(-201,`No provider for ${Ee(i)} found${a}`)}function nn(i,o){null==i&&function ze(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Qt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Wt(i){return{providers:i.providers||[],imports:i.imports||[]}}function jt(i){return nr(i,Oi)||nr(i,Wi)}function nr(i,o){return i.hasOwnProperty(o)?i[o]:null}function Ar(i){return i&&(i.hasOwnProperty(Sr)||i.hasOwnProperty(Zi))?i[Sr]:null}const Oi=ge({\u0275prov:ge}),Sr=ge({\u0275inj:ge}),Wi=ge({ngInjectableDef:ge}),Zi=ge({ngInjectorDef:ge});var lt=(()=>((lt=lt||{})[lt.Default=0]="Default",lt[lt.Host=1]="Host",lt[lt.Self=2]="Self",lt[lt.SkipSelf=4]="SkipSelf",lt[lt.Optional=8]="Optional",lt))();let jr;function Vn(i){const o=jr;return jr=i,o}function ti(i,o,a){const l=jt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&lt.Optional?null:void 0!==o?o:void ve(he(i),"Injector")}function fn(i){return{toString:i}.toString()}var Yn=(()=>((Yn=Yn||{})[Yn.OnPush=0]="OnPush",Yn[Yn.Default=1]="Default",Yn))(),Ht=(()=>{return(i=Ht||(Ht={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ht;var i})();const ot="undefined"!=typeof globalThis&&globalThis,yt="undefined"!=typeof window&&window,rr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Vt=ot||"undefined"!=typeof global&&global||yt||rr,ir={},ct=[],hr=ge({\u0275cmp:ge}),Nt=ge({\u0275dir:ge}),Je=ge({\u0275pipe:ge}),Ae=ge({\u0275mod:ge}),Xe=ge({\u0275fac:ge}),dt=ge({__NG_ELEMENT_ID__:ge});let Lt=0;function Rt(i){return fn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Yn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||ct,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Ht.Emulated,id:"c",styles:i.styles||ct,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,p=i.features,y=i.pipes;return l.id+=Lt++,l.inputs=gt(i.inputs,a),l.outputs=gt(i.outputs),p&&p.forEach(E=>E(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(V):null,l.pipeDefs=y?()=>("function"==typeof y?y():y).map(G):null,l})}function V(i){return $t(i)||function wn(i){return i[Nt]||null}(i)}function G(i){return function St(i){return i[Je]||null}(i)}const de={};function Q(i){return fn(()=>{const o={type:i.type,bootstrap:i.bootstrap||ct,declarations:i.declarations||ct,imports:i.imports||ct,exports:i.exports||ct,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(de[i.id]=i.type),o})}function gt(i,o){if(null==i)return ir;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,o&&(o[d]=p)}return a}const Zt=Rt;function fr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function $t(i){return i[hr]||null}function un(i,o){const a=i[Ae]||null;if(!a&&!0===o)throw new Error(`Type ${he(i)} does not have '\u0275mod' property.`);return a}function mi(i){return Array.isArray(i)&&"object"==typeof i[1]}function ri(i){return Array.isArray(i)&&!0===i[1]}function Mc(i){return 0!=(8&i.flags)}function Cs(i){return 2==(2&i.flags)}function qa(i){return 1==(1&i.flags)}function Hr(i){return null!==i.template}function wh(i){return 0!=(512&i[2])}function $r(i,o){return i.hasOwnProperty(Xe)?i[Xe]:null}class No{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function to(){return ca}function ca(i){return i.type.prototype.ngOnChanges&&(i.setInput=Fp),Fc}function Fc(){const i=Ts(this),o=null==i?void 0:i.current;if(o){const a=i.previous;if(a===ir)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Fp(i,o,a,l){const d=Ts(i)||function ii(i,o){return i[Po]=o}(i,{previous:ir,current:null}),p=d.current||(d.current={}),y=d.previous,E=this.declaredInputs[a],D=y[E];p[E]=new No(D&&D.currentValue,o,y===ir),i[l]=o}to.ngInherit=!0;const Po="__ngSimpleChanges__";function Ts(i){return i[Po]||null}let Xa;function Xi(i){Xa=i}function dn(i){return!!i.listen}const Fo={createRenderer:(i,o)=>function da(){return void 0!==Xa?Xa:"undefined"!=typeof document?document:void 0}()};function on(i){for(;Array.isArray(i);)i=i[0];return i}function ro(i,o){return on(o[i])}function pr(i,o){return on(o[i.index])}function ha(i,o){return i.data[o]}function gr(i,o){const a=o[i];return mi(a)?a:a[0]}function Ss(i){return 4==(4&i[2])}function es(i){return 128==(128&i[2])}function Gr(i,o){return null==o?null:i[o]}function Ms(i){i[18]=0}function xs(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const ht={lFrame:so(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function iu(){return ht.bindingsEnabled}function Ce(){return ht.lFrame.lView}function Ot(){return ht.lFrame.tView}function rl(i){return ht.lFrame.contextLView=i,i[8]}function pn(){let i=Lo();for(;null!==i&&64===i.type;)i=i.parent;return i}function Lo(){return ht.lFrame.currentTNode}function zr(i,o){const a=ht.lFrame;a.currentTNode=i,a.isParent=o}function il(){return ht.lFrame.isParent}function sl(){ht.lFrame.isParent=!1}function su(){return ht.isInCheckNoChangesMode}function Rs(i){ht.isInCheckNoChangesMode=i}function Os(){return ht.lFrame.bindingIndex++}function uu(i,o){const a=ht.lFrame;a.bindingIndex=a.bindingRootIndex=i,pa(o)}function pa(i){ht.lFrame.currentDirectiveIndex=i}function ll(){return ht.lFrame.currentQueryIndex}function cl(i){ht.lFrame.currentQueryIndex=i}function Bc(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function dl(i,o,a){if(a&lt.SkipSelf){let d=o,p=i;for(;!(d=d.parent,null!==d||a&lt.Host||(d=Bc(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,i=p}const l=ht.lFrame=jc();return l.currentTNode=o,l.lView=i,!0}function io(i){const o=jc(),a=i[1];ht.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function jc(){const i=ht.lFrame,o=null===i?null:i.child;return null===o?so(i):o}function so(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Hc(){const i=ht.lFrame;return ht.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const $c=Hc;function oo(){const i=Hc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function mr(){return ht.lFrame.selectedIndex}function Ns(i){ht.lFrame.selectedIndex=i}function En(){const i=ht.lFrame;return ha(i.tView,i.selectedIndex)}function ts(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:D,ngAfterViewChecked:T,ngOnDestroy:M}=p;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),D&&(i.viewHooks||(i.viewHooks=[])).push(-a,D),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function ma(i,o,a){Gc(i,o,3,a)}function lu(i,o,a,l){(3&i[2])===a&&Gc(i,o,a,l)}function Pn(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function Gc(i,o,a,l){const p=null!=l?l:-1,y=o.length-1;let E=0;for(let D=void 0!==l?65535&i[18]:0;D<y;D++)if("number"==typeof o[D+1]){if(E=o[D],null!=l&&E>=l)break}else o[D]<0&&(i[18]+=65536),(E<p||-1==p)&&(Lp(i,a,o,D),i[18]=(4294901760&i[18])+D+2),D++}function Lp(i,o,a,l){const d=a[l]<0,p=a[l+1],E=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class Uo{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function ft(i,o,a){const l=dn(i);let d=0;for(;d<a.length;){const p=a[d];if("number"==typeof p){if(0!==p)break;d++;const y=a[d++],E=a[d++],D=a[d++];l?i.setAttribute(o,E,D,y):o.setAttributeNS(y,E,D)}else{const y=p,E=a[++d];Rr(y)?l&&i.setProperty(o,y,E):l?i.setAttribute(o,y,E):o.setAttribute(y,E),d++}}return d}function Fn(i){return 3===i||4===i||6===i}function Rr(i){return 64===i.charCodeAt(0)}function _r(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Bo(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function Bo(i,o,a,l,d){let p=0,y=i.length;if(-1===o)y=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(i[p+1]=d));if(l===i[p+1])return void(i[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==y&&(i.splice(y,0,o),p=y+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==d&&i.splice(p++,0,d)}function Wc(i){return-1!==i}function cn(i){return 32767&i}function vi(i,o){let a=function Ih(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let cu=!0;function oi(i){const o=cu;return cu=i,o}let Kc=0;function gn(i,o){const a=jo(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,rs(l.data,i),rs(o,null),rs(l.blueprint,null));const d=ai(i,o),p=i.injectorIndex;if(Wc(d)){const y=cn(d),E=vi(d,o),D=E[1].data;for(let T=0;T<8;T++)o[p+T]=E[y+T]|D[y+T]}return o[p+8]=d,p}function rs(i,o){i.push(0,0,0,0,0,0,0,0,o)}function jo(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function ai(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const p=d[1],y=p.type;if(l=2===y?p.declTNode:1===y?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Ps(i,o,a){!function uo(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(dt)&&(l=a[dt]),null==l&&(l=a[dt]=Kc++);const d=255&l;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function Pi(i,o,a){if(a&lt.Optional)return i;ve(o,"NodeInjector")}function _l(i,o,a,l){if(a&lt.Optional&&void 0===l&&(l=null),0==(a&(lt.Self|lt.Host))){const d=i[9],p=Vn(void 0);try{return d?d.get(o,l,a&lt.Optional):ti(o,l,a&lt.Optional)}finally{Vn(p)}}return Pi(l,o,a)}function Fs(i,o,a,l=lt.Default,d){if(null!==i){const p=function Ho(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(dt)?i[dt]:void 0;return"number"==typeof o?o>=0?255&o:yl:o}(a);if("function"==typeof p){if(!dl(o,i,l))return l&lt.Host?Pi(d,a,l):_l(o,a,l,d);try{const y=p(l);if(null!=y||l&lt.Optional)return y;ve(a)}finally{$c()}}else if("number"==typeof p){let y=null,E=jo(i,o),D=-1,T=l&lt.Host?o[16][6]:null;for((-1===E||l&lt.SkipSelf)&&(D=-1===E?ai(i,o):o[E+8],-1!==D&&ur(l,!1)?(y=o[1],E=cn(D),o=vi(D,o)):E=-1);-1!==E;){const M=o[1];if($o(p,E,M.data)){const F=Yc(E,o,a,y,l,T);if(F!==Fi)return F}D=o[E+8],-1!==D&&ur(l,o[1].data[E+8]===T)&&$o(p,E,o)?(y=M,E=cn(D),o=vi(D,o)):E=-1}}}return _l(o,a,l,d)}const Fi={};function yl(){return new Ei(pn(),Ce())}function Yc(i,o,a,l,d,p){const y=o[1],E=y.data[i+8],M=Ls(E,y,a,null==l?Cs(E)&&cu:l!=y&&0!=(3&E.type),d&lt.Host&&p===E);return null!==M?wi(o,y,M,E):Fi}function Ls(i,o,a,l,d){const p=i.providerIndexes,y=o.data,E=1048575&p,D=i.directiveStart,M=p>>20,B=d?E+M:i.directiveEnd;for(let W=l?E:E+M;W<B;W++){const _e=y[W];if(W<D&&a===_e||W>=D&&_e.type===a)return W}if(d){const W=y[D];if(W&&Hr(W)&&W.type===a)return D}return null}function wi(i,o,a,l){let d=i[a];const p=o.data;if(function zc(i){return i instanceof Uo}(d)){const y=d;y.resolving&&function nt(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new ke(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ee(p[a]));const E=oi(y.canSeeViewProviders);y.resolving=!0;const D=y.injectImpl?Vn(y.injectImpl):null;dl(i,l,lt.Default);try{d=i[a]=y.factory(void 0,p,i,l),o.firstCreatePass&&a>=l.directiveStart&&function pl(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const y=ca(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==D&&Vn(D),oi(E),y.resolving=!1,$c()}}return d}function $o(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function ur(i,o){return!(i&lt.Self||i&lt.Host&&o)}class Ei{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Fs(this._tNode,this._lView,o,l,a)}}function Qc(i){return fn(()=>{const o=i.prototype.constructor,a=o[Xe]||Rn(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const p=d[Xe]||Rn(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Rn(i){return We(i)?()=>{const o=Rn(J(i));return o&&o()}:$r(i)}function Vs(i){return function lo(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(Fn(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(pn(),i)}const Go="__parameters__";function Cn(i,o,a){return fn(()=>{const l=function Li(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const y=new d(...p);return E.annotation=y,E;function E(D,T,M){const F=D.hasOwnProperty(Go)?D[Go]:Object.defineProperty(D,Go,{value:[]})[Go];for(;F.length<=M;)F.push(null);return(F[M]=F[M]||[]).push(y),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class mn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Qt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Up=new mn("AnalyzeForEntryComponents");function vr(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),vr(l,o)):o!==i&&o.push(l)}return o}function ui(i,o){i.forEach(a=>Array.isArray(a)?ui(a,o):o(a))}function El(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function os(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Ci(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}function Bn(i,o,a){let l=Hs(i,o);return l>=0?i[1|l]=a:(l=~l,function Dl(i,o,a,l){let d=i.length;if(d==o)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function Il(i,o){const a=Hs(i,o);if(a>=0)return i[1|a]}function Hs(i,o){return function co(i,o,a){let l=0,d=i.length>>a;for(;d!==l;){const p=l+(d-l>>1),y=i[p<<a];if(o===y)return p<<a;y>o?d=p:l=p+1}return~(d<<a)}(i,o,1)}const ho={},qo="__NG_DI_FLAG__",pu="ngTempTokenPath",I=/\n/gm,L="__source",q=ge({provide:String,useValue:ge});let te;function Me(i){const o=te;return te=i,o}function xe(i,o=lt.Default){if(void 0===te)throw new ke(203,"");return null===te?ti(i,void 0,o):te.get(i,o&lt.Optional?null:void 0,o)}function et(i,o=lt.Default){return(function Kn(){return jr}()||xe)(J(i),o)}const Tt=et;function Dt(i){const o=[];for(let a=0;a<i.length;a++){const l=J(i[a]);if(Array.isArray(l)){if(0===l.length)throw new ke(900,"");let d,p=lt.Default;for(let y=0;y<l.length;y++){const E=l[y],D=bn(E);"number"==typeof D?-1===D?d=E.token:p|=D:d=E}o.push(et(d,p))}else o.push(et(l))}return o}function Ln(i,o){return i[qo]=o,i.prototype[qo]=o,i}function bn(i){return i[qo]}const Or=Ln(Cn("Inject",i=>({token:i})),-1),ci=Ln(Cn("Optional"),8),po=Ln(Cn("SkipSelf"),4);class ad{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function $s(i){return i instanceof ad?i.changingThisBreaksApplicationSecurity:i}const Gs=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,kh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Xt=(()=>((Xt=Xt||{})[Xt.NONE=0]="NONE",Xt[Xt.HTML=1]="HTML",Xt[Xt.STYLE=2]="STYLE",Xt[Xt.SCRIPT=3]="SCRIPT",Xt[Xt.URL=4]="URL",Xt[Xt.RESOURCE_URL=5]="RESOURCE_URL",Xt))();function vu(i){const o=function Qo(){const i=Ce();return i&&i[12]}();return o?o.sanitize(Xt.URL,i)||"":function Ko(i,o){const a=function mu(i){return i instanceof ad&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?$s(i):function _u(i){return(i=String(i)).match(Gs)||i.match(kh)?i:"unsafe:"+i}(fe(i))}const $h="__ngContext__";function kr(i,o){i[$h]=o}function Gh(i){const o=function Ea(i){return i[$h]||null}(i);return o?Array.isArray(o)?o:o.lView:null}function ba(i){return i.ngOriginalError}function tg(i,...o){i.error(...o)}class Er{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function b_(i){return i&&i.ngErrorLogger||tg}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&ba(o);for(;a&&ba(a);)a=ba(a);return a||null}}const S_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Vt))();function g(i){return i instanceof Function?i():i}var se=(()=>((se=se||{})[se.Important=1]="Important",se[se.DashCase=2]="DashCase",se))();function tt(i,o){return undefined(i,o)}function In(i){const o=i[3];return ri(o)?o[3]:o}function wu(i){return Jh(i[13])}function Eu(i){return Jh(i[4])}function Jh(i){for(;null!==i&&!ri(i);)i=i[4];return i}function Jo(i,o,a,l,d){if(null!=l){let p,y=!1;ri(l)?p=l:mi(l)&&(y=!0,l=l[0]);const E=on(l);0===i&&null!==a?null==d?P_(o,a,E):us(o,a,E,d||null,!0):1===i&&null!==a?us(o,a,E,d||null,!0):2===i?function U_(i,o,a){const l=tf(i,o);l&&function ib(i,o,a,l){dn(i)?i.removeChild(o,a,l):o.removeChild(a)}(i,l,o,a)}(o,E,y):3===i&&o.destroyNode(E),null!=p&&function j_(i,o,a,l,d){const p=a[7];p!==on(a)&&Jo(o,i,l,p,d);for(let E=10;E<a.length;E++){const D=a[E];ag(D[1],D,i,o,l,p)}}(o,i,p,a,d)}}function gd(i,o,a){if(dn(i))return i.createElement(o,a);{const l=null!==a?function Ja(i){const o=i.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(o):i.createElementNS(l,o)}}function zw(i,o){const a=i[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,xs(d,-1)),a.splice(l,1)}function O_(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&zw(d,l),o>0&&(i[a-1][4]=l[4]);const p=os(i,10+o);!function Xn(i,o){ag(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const y=p[19];null!==y&&y.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function k_(i,o){if(!(256&o[2])){const a=o[11];dn(a)&&a.destroyNode&&ag(i,o,a,3,null,null),function R_(i){let o=i[13];if(!o)return N_(i[1],i);for(;o;){let a=null;if(mi(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)mi(o)&&N_(o[1],o),o=o[3];null===o&&(o=i),mi(o)&&N_(o[1],o),a=o&&o[4]}o=a}}(o)}}function N_(i,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function Ww(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Uo)){const p=a[l+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=d[p[y]],D=p[y+1];try{D.call(E)}finally{}}else try{p.call(d)}finally{}}}}(i,o),function qw(i,o){const a=i.cleanup,l=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const y=a[p+1],E="function"==typeof y?y(o):on(o[y]),D=l[d=a[p+2]],T=a[p+3];"boolean"==typeof T?E.removeEventListener(a[p],D,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),p+=2}else{const y=l[d=a[p+1]];a[p].call(y)}if(null!==l){for(let p=d+1;p<l.length;p++)l[p]();o[7]=null}}(i,o),1===o[1].type&&dn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&ri(o[3])){a!==o[3]&&zw(a,o);const l=o[19];null!==l&&l.detachView(i)}}}function sg(i,o,a){return function rb(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===Ht.None||d===Ht.Emulated)return null}return pr(l,a)}(i,o.parent,a)}function us(i,o,a,l,d){dn(i)?i.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function P_(i,o,a){dn(i)?i.appendChild(o,a):o.appendChild(a)}function Zw(i,o,a,l,d){null!==l?us(i,o,a,l,d):P_(i,o,a)}function tf(i,o){return dn(i)?i.parentNode(o):o.parentNode}function Kw(i,o,a){return F_(i,o,a)}let F_=function Yw(i,o,a){return 40&i.type?pr(i,a):null};function og(i,o,a,l){const d=sg(i,l,o),p=o[11],E=Kw(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)Zw(p,d,a[D],E,!1);else Zw(p,d,a,E,!1)}function _d(i,o){if(null!==o){const a=o.type;if(3&a)return pr(o,i);if(4&a)return V_(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return _d(i,l);{const d=i[o.index];return ri(d)?V_(-1,d):on(d)}}if(32&a)return tt(o,i)()||on(i[o.index]);{const l=Jw(i,o);return null!==l?Array.isArray(l)?l[0]:_d(In(i[16]),l):_d(i,o.next)}}return null}function Jw(i,o){return null!==o?i[16][6].projection[o.projection]:null}function V_(i,o){const a=10+i+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return _d(l,d)}return o[7]}function B_(i,o,a,l,d,p,y){for(;null!=a;){const E=l[a.index],D=a.type;if(y&&0===o&&(E&&kr(on(E),l),a.flags|=4),64!=(64&a.flags))if(8&D)B_(i,o,a.child,l,d,p,!1),Jo(o,i,d,E,p);else if(32&D){const T=tt(a,l);let M;for(;M=T();)Jo(o,i,d,M,p);Jo(o,i,d,E,p)}else 16&D?yd(i,o,l,a,d,p):Jo(o,i,d,E,p);a=y?a.projectionNext:a.next}}function ag(i,o,a,l,d,p){B_(a,l,i.firstChild,o,d,p,!1)}function yd(i,o,a,l,d,p){const y=a[16],D=y[6].projection[l.projection];if(Array.isArray(D))for(let T=0;T<D.length;T++)Jo(o,i,d,D[T],p);else B_(i,o,D,y[3],d,p,!0)}function Nr(i,o,a){dn(i)?i.setAttribute(o,"style",a):o.style.cssText=a}function nf(i,o,a){dn(i)?""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a):o.className=a}function Xw(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||i.charCodeAt(d+p)<=32)return d}a=d+1}}const zs="ng-template";function SA(i,o,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==Xw(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function e0(i){return 4===i.type&&i.value!==zs}function jl(i,o,a){return o===(4!==i.type||a?i.value:zs)}function ug(i,o,a){let l=4;const d=i.attrs||[],p=function rt(i){for(let o=0;o<i.length;o++)if(Fn(i[o]))return o;return i.length}(d);let y=!1;for(let E=0;E<o.length;E++){const D=o[E];if("number"!=typeof D){if(!y)if(4&l){if(l=2|1&l,""!==D&&!jl(i,D,a)||""===D&&1===o.length){if(Pr(l))return!1;y=!0}}else{const T=8&l?D:o[++E];if(8&l&&null!==i.attrs){if(!SA(i.attrs,T,a)){if(Pr(l))return!1;y=!0}continue}const F=Gt(8&l?"class":D,d,e0(i),a);if(-1===F){if(Pr(l))return!1;y=!0;continue}if(""!==T){let B;B=F>p?"":d[F+1].toLowerCase();const W=8&l?B:null;if(W&&-1!==Xw(W,T,0)||2&l&&T!==B){if(Pr(l))return!1;y=!0}}}}else{if(!y&&!Pr(l)&&!Pr(D))return!1;if(y&&Pr(D))continue;y=!1,l=D|1&l}}return Pr(l)||y}function Pr(i){return 0==(1&i)}function Gt(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let p=!1;for(;d<o.length;){const y=o[d];if(y===i)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function $_(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function t0(i,o,a=!1){for(let l=0;l<o.length;l++)if(ug(i,o[l],a))return!0;return!1}function At(i,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(i.length===l.length){for(let d=0;d<i.length;d++)if(i[d]!==l[d])continue e;return!0}}return!1}function rf(i,o){return i?":not("+o.trim()+")":o}function G_(i){let o=i[0],a=1,l=2,d="",p=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const E=i[++a];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!Pr(y)&&(o+=rf(p,d),d=""),l=y,p=p||!Pr(l);a++}return""!==d&&(o+=rf(p,d)),o}const Ct={};function n0(i){r0(Ot(),Ce(),mr()+i,su())}function r0(i,o,a,l){if(!l)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&ma(o,p,a)}else{const p=i.preOrderHooks;null!==p&&lu(o,p,0,a)}Ns(a)}function lr(i,o){return i<<17|o<<2}function $i(i){return i>>17&32767}function z_(i){return 2|i}function Ta(i){return(131068&i)>>2}function lg(i,o){return-131069&i|o<<2}function W_(i){return 1|i}function ny(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],p=a[l+1];if(-1!==p){const y=i.data[p];cl(d),y.contentQueries(2,o[p],p)}}}function vd(i,o,a,l,d,p,y,E,D,T){const M=o.blueprint.slice();return M[0]=d,M[2]=140|l,Ms(M),M[3]=M[15]=i,M[8]=a,M[10]=y||i&&i[10],M[11]=E||i&&i[11],M[12]=D||i&&i[12]||null,M[9]=T||i&&i[9]||null,M[6]=p,M[16]=2==o.type?i[16]:M,M}function $l(i,o,a,l,d){let p=i.data[o];if(null===p)p=function hf(i,o,a,l,d){const p=Lo(),y=il(),D=i.data[o]=function sy(i,o,a,l,d,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=D),null!==p&&(y?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D)),D}(i,o,a,l,d),function al(){return ht.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const y=function Vo(){const i=ht.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return zr(p,!0),p}function Gl(i,o,a,l){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function ff(i,o,a){io(o);try{const l=i.viewQuery;null!==l&&Ag(1,l,a);const d=i.template;null!==d&&mg(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&ny(i,o),i.staticViewQueries&&Ag(2,i.viewQuery,a);const p=i.components;null!==p&&function hb(i,o){for(let a=0;a<o.length;a++)fy(i,o[a])}(o,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,oo()}}function bu(i,o,a,l){const d=o[2];if(256==(256&d))return;io(o);const p=su();try{Ms(o),function ou(i){return ht.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&mg(i,o,a,2,l);const y=3==(3&d);if(!p)if(y){const T=i.preOrderCheckHooks;null!==T&&ma(o,T,null)}else{const T=i.preOrderHooks;null!==T&&lu(o,T,0,null),Pn(o,0)}if(function T0(i){for(let o=wu(i);null!==o;o=Eu(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],p=d[3];0==(1024&d[2])&&xs(p,1),d[2]|=1024}}}(o),function hy(i){for(let o=wu(i);null!==o;o=Eu(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];es(l)&&bu(d,l,d.template,l[8])}}(o),null!==i.contentQueries&&ny(i,o),!p)if(y){const T=i.contentCheckHooks;null!==T&&ma(o,T)}else{const T=i.contentHooks;null!==T&&lu(o,T,1),Pn(o,1)}!function ty(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Ns(~d);else{const p=d,y=a[++l],E=a[++l];uu(y,p),E(2,o[p])}}}finally{Ns(-1)}}(i,o);const E=i.components;null!==E&&function m0(i,o){for(let a=0;a<o.length;a++)A0(i,o[a])}(o,E);const D=i.viewQuery;if(null!==D&&Ag(2,D,l),!p)if(y){const T=i.viewCheckHooks;null!==T&&ma(o,T)}else{const T=i.viewHooks;null!==T&&lu(o,T,2),Pn(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,xs(o[3],-1))}finally{oo()}}function ry(i,o,a,l){const d=o[10],p=!su(),y=Ss(o);try{p&&!y&&d.begin&&d.begin(),y&&ff(i,o,l),bu(i,o,a,l)}finally{p&&!y&&d.end&&d.end()}}function mg(i,o,a,l,d){const p=mr(),y=2&l;try{Ns(-1),y&&o.length>20&&r0(i,o,20,su()),a(l,d)}finally{Ns(p)}}function Dr(i,o,a){if(Mc(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const y=i.data[p];y.contentQueries&&y.contentQueries(1,a[p],p)}}}function Cr(i,o,a){!iu()||(function gb(i,o,a,l){const d=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||gn(a,o),kr(l,o);const y=a.initialInputs;for(let E=d;E<p;E++){const D=i.data[E],T=Hr(D);T&&gf(o,a,D);const M=wi(o,i,E,a);kr(M,o),null!==y&&I0(0,E-d,M,D,0,y),T&&(gr(a.index,o)[8]=M)}}(i,o,a,pr(a,o)),128==(128&a.flags)&&function mb(i,o,a){const l=a.directiveStart,d=a.directiveEnd,y=a.index,E=function ul(){return ht.lFrame.currentDirectiveIndex}();try{Ns(y);for(let D=l;D<d;D++){const T=i.data[D],M=o[D];pa(D),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&zl(T,M)}}finally{Ns(-1),pa(E)}}(i,o,a))}function wd(i,o,a=pr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const y=l[p+1],E=-1===y?a(o,i):i[y];i[d++]=E}}}function _g(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=yg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function yg(i,o,a,l,d,p,y,E,D,T){const M=20+l,F=M+d,B=function fb(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:Ct);return a}(M,F),W="function"==typeof T?T():T;return B[1]={type:i,blueprint:B,template:a,queries:null,viewQuery:E,declTNode:o,data:B.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:D,consts:W,incompleteFirstPass:!1}}function vg(i,o,a,l){const d=M0(o);null===a?d.push(l):(d.push(a),i.firstCreatePass&&Cd(i).push(l,d.length-1))}function y0(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function ls(i,o,a,l,d,p,y,E){const D=pr(o,a);let M,T=o.inputs;!E&&null!=T&&(M=T[l])?(bd(i,a,M,l,d),Cs(o)&&function wg(i,o){const a=gr(o,i);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function v0(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=y?y(d,o.value||"",l):d,dn(p)?p.setProperty(D,l,d):Rr(l)||(D.setProperty?D.setProperty(l,d):D[l]=d))}function Dg(i,o,a,l){let d=!1;if(iu()){const p=function _b(i,o,a){const l=i.directiveRegistry;let d=null;if(l)for(let p=0;p<l.length;p++){const y=l[p];t0(a,y.selectors,!1)&&(d||(d=[]),Ps(gn(a,o),i,y.type),Hr(y)?(C0(i,a),d.unshift(y)):d.push(y))}return d}(i,o,a),y=null===l?null:{"":-1};if(null!==p){d=!0,pf(a,i.data.length,p.length);for(let M=0;M<p.length;M++){const F=p[M];F.providersResolver&&F.providersResolver(F)}let E=!1,D=!1,T=Gl(i,o,p.length,null);for(let M=0;M<p.length;M++){const F=p[M];a.mergedAttrs=_r(a.mergedAttrs,F.hostAttrs),ly(i,a,o,T,F),b0(T,F,y),null!==F.contentQueries&&(a.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(a.flags|=128);const B=F.type.prototype;!E&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!D&&(B.ngOnChanges||B.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),D=!0),T++}!function oy(i,o){const l=o.directiveEnd,d=i.data,p=o.attrs,y=[];let E=null,D=null;for(let T=o.directiveStart;T<l;T++){const M=d[T],F=M.inputs,B=null===p||e0(o)?null:mf(F,p);y.push(B),E=y0(F,T,E),D=y0(M.outputs,T,D)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=D}(i,a)}y&&function ql(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new ke(-301,!1);l.push(o[d],p)}}}(a,l,y)}return a.mergedAttrs=_r(a.mergedAttrs,a.attrs),d}function uy(i,o,a,l,d,p){const y=p.hostBindings;if(y){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const D=~o.index;(function Cg(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=D&&E.push(D),E.push(l,d,y)}}function zl(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function C0(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function b0(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;Hr(o)&&(a[""]=i)}}function pf(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function ly(i,o,a,l,d){i.data[l]=d;const p=d.factory||(d.factory=$r(d.type)),y=new Uo(p,Hr(d),null);i.blueprint[l]=y,a[l]=y,uy(i,o,0,l,Gl(i,a,d.hostVars,Ct),d)}function gf(i,o,a){const l=pr(o,i),d=_g(a),p=i[10],y=Ed(i,vd(i,d,null,a.onPush?64:16,l,o,p,p.createRenderer(l,a),null,null));i[o.index]=y}function wo(i,o,a,l,d,p){const y=pr(i,o);!function Zr(i,o,a,l,d,p,y){if(null==p)dn(i)?i.removeAttribute(o,d,a):o.removeAttribute(d);else{const E=null==y?fe(p):y(p,l||"",d);dn(i)?i.setAttribute(o,d,E,a):a?o.setAttributeNS(a,d,E):o.setAttribute(d,E)}}(o[11],y,p,i.value,a,l,d)}function I0(i,o,a,l,d,p){const y=p[o];if(null!==y){const E=l.setInput;for(let D=0;D<y.length;){const T=y[D++],M=y[D++],F=y[D++];null!==E?l.setInput(a,F,T,M):a[M]=F}}}function mf(i,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function dy(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}function A0(i,o){const a=gr(o,i);if(es(a)){const l=a[1];80&a[2]?bu(l,a,l.template,a[8]):a[5]>0&&Wl(a)}}function Wl(i){for(let l=wu(i);null!==l;l=Eu(l))for(let d=10;d<l.length;d++){const p=l[d];if(1024&p[2]){const y=p[1];bu(y,p,y.template,p[8])}else p[5]>0&&Wl(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=gr(a[l],i);es(d)&&d[5]>0&&Wl(d)}}function fy(i,o){const a=gr(o,i),l=a[1];(function py(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),ff(l,a,a[8])}function Ed(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function Dd(i){for(;i;){i[2]|=64;const o=In(i);if(wh(i)&&!o)return i;i=o}return null}function gy(i,o,a){const l=o[10];l.begin&&l.begin();try{bu(i,o,i.template,a)}catch(d){throw yf(o,d),d}finally{l.end&&l.end()}}function Ig(i){!function bg(i){for(let o=0;o<i.components.length;o++){const a=i.components[o],l=Gh(a),d=l[1];ry(d,l,d.template,a)}}(i[8])}function Ag(i,o,a){cl(0),o(i,a)}const S0=(()=>Promise.resolve(null))();function M0(i){return i[7]||(i[7]=[])}function Cd(i){return i.cleanup||(i.cleanup=[])}function yf(i,o){const a=i[9],l=a?a.get(Er,null):null;l&&l.handleError(o)}function bd(i,o,a,l,d){for(let p=0;p<a.length;){const y=a[p++],E=a[p++],D=o[y],T=i.data[y];null!==T.setInput?T.setInput(D,d,l,E):D[E]=d}}function Ai(i,o,a){const l=ro(o,i);!function pd(i,o,a){dn(i)?i.setValue(o,a):o.textContent=a}(i[11],l,a)}function Id(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?p=E:1==p?d=ce(d,E):2==p&&(l=ce(l,E+": "+o[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const wf=new mn("INJECTOR",-1);class Iu{get(o,a=ho){if(a===ho){const l=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw l.name="NullInjectorError",l}return a}}const Sg=new mn("Set Injector scope."),Ef={},Zl={};let Eo;function Df(){return void 0===Eo&&(Eo=new Iu),Eo}function Cf(i,o=null,a=null,l){const d=bf(i,o,a,l);return d._resolveInjectorDefTypes(),d}function bf(i,o=null,a=null,l){return new x0(i,a,o||Df(),l)}class x0{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&ui(a,E=>this.processProvider(E,o,a)),ui([o],E=>this.processInjectorType(E,[],p)),this.records.set(wf,Xo(void 0,this));const y=this.records.get(Sg);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof o?null:he(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=ho,l=lt.Default){this.assertNotDestroyed();const d=Me(this),p=Vn(void 0);try{if(!(l&lt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const D=function If(i){return"function"==typeof i||"object"==typeof i&&i instanceof mn}(o)&&jt(o);E=D&&this.injectableDefInScope(D)?Xo(yn(o),Ef):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&lt.Self?Df():this.parent).get(o,a=l&lt.Optional&&a===ho?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[pu]=y[pu]||[]).unshift(he(o)),d)throw y;return function Wo(i,o,a,l){const d=i[pu];throw o[L]&&d.unshift(o[L]),i.message=function fo(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=he(o);if(Array.isArray(o))d=o.map(he).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):he(E)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(I,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[pu]=null,i}(y,o,"R3InjectorError",this.source)}throw y}finally{Vn(p),Me(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(he(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processInjectorType(o,a,l){if(!(o=J(o)))return!1;let d=Ar(o);const p=null==d&&o.ngModule||void 0,y=void 0===p?o:p,E=-1!==l.indexOf(y);if(void 0!==p&&(d=Ar(p)),null==d)return!1;if(null!=d.imports&&!E){let M;l.push(y);try{ui(d.imports,F=>{this.processInjectorType(F,a,l)&&(void 0===M&&(M=[]),M.push(F))})}finally{}if(void 0!==M)for(let F=0;F<M.length;F++){const{ngModule:B,providers:W}=M[F];ui(W,_e=>this.processProvider(_e,B,W||ct))}}this.injectorDefTypes.add(y);const D=$r(y)||(()=>new y);this.records.set(y,Xo(D,Ef));const T=d.providers;if(null!=T&&!E){const M=o;ui(T,F=>this.processProvider(F,M,T))}return void 0!==p&&void 0!==o.providers}processProvider(o,a,l){let d=Ad(o=J(o))?o:J(o&&o.provide);const p=function wb(i,o,a){return Td(i)?Xo(void 0,i.useValue):Xo(R0(i),Ef)}(o);if(Ad(o)||!0!==o.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=Xo(void 0,Ef,!0),y.factory=()=>Dt(y.multi),this.records.set(d,y)),d=o,y.multi.push(o)}this.records.set(d,p)}hydrate(o,a){return a.value===Ef&&(a.value=Zl,a.value=a.factory()),"object"==typeof a.value&&a.value&&function bb(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=J(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function yn(i){const o=jt(i),a=null!==o?o.factory:$r(i);if(null!==a)return a;if(i instanceof mn)throw new ke(204,!1);if(i instanceof Function)return function Mg(i){const o=i.length;if(o>0)throw Ci(o,"?"),new ke(204,!1);const a=function ei(i){const o=i&&(i[Oi]||i[Wi]);if(o){const a=function ys(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ke(204,!1)}function R0(i,o,a){let l;if(Ad(i)){const d=J(i);return $r(d)||yn(d)}if(Td(i))l=()=>J(i.useValue);else if(function O0(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Dt(i.deps||[]));else if(function Eb(i){return!(!i||!i.useExisting)}(i))l=()=>et(J(i.useExisting));else{const d=J(i&&(i.useClass||i.provide));if(!function Cb(i){return!!i.deps}(i))return $r(d)||yn(d);l=()=>new d(...Dt(i.deps))}return l}function Xo(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Td(i){return null!==i&&"object"==typeof i&&q in i}function Ad(i){return"function"==typeof i}let Kr=(()=>{class i{static create(a,l){var d;if(Array.isArray(a))return Cf({name:""},l,a,"");{const p=null!==(d=a.name)&&void 0!==d?d:"";return Cf({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=ho,i.NULL=new Iu,i.\u0275prov=Qt({token:i,providedIn:"any",factory:()=>et(wf)}),i.__NG_ELEMENT_ID__=-1,i})();function j0(i,o){ts(Gh(i)[1],pn())}function by(i){let o=function H0(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let d;if(Hr(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ke(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const y=i;y.inputs=kg(i.inputs),y.declaredInputs=kg(i.declaredInputs),y.outputs=kg(i.outputs);const E=d.hostBindings;E&&Ng(i,E);const D=d.viewQuery,T=d.contentQueries;if(D&&$0(i,D),T&&G0(i,T),ie(i.inputs,d.inputs),ie(i.declaredInputs,d.declaredInputs),ie(i.outputs,d.outputs),Hr(d)&&d.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let y=0;y<p.length;y++){const E=p[y];E&&E.ngInherit&&E(i),E===by&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Mb(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=_r(d.hostAttrs,a=_r(a,d.hostAttrs))}}(l)}function kg(i){return i===ir?{}:i===ct?[]:i}function $0(i,o){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function G0(i,o){const a=i.contentQueries;i.contentQueries=a?(l,d,p)=>{o(l,d,p),a(l,d,p)}:o}function Ng(i,o){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let Pg=null;function Tu(){if(!Pg){const i=Vt.Symbol;if(i&&i.iterator)Pg=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Pg=l)}}}return Pg}function xd(i){return!!Lg(i)&&(Array.isArray(i)||!(i instanceof Map)&&Tu()in i)}function Lg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function hi(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Vg(i,o,a,l){const d=Ce();return hi(d,Os(),o)&&(Ot(),wo(En(),d,i,o,a,l)),Vg}function Ru(i,o,a,l){return hi(i,Os(),a)?o+fe(a)+l:Ct}function K0(i,o,a,l,d,p,y,E){const D=Ce(),T=Ot(),M=i+20,F=T.firstCreatePass?function xy(i,o,a,l,d,p,y,E,D){const T=o.consts,M=$l(o,i,4,y||null,Gr(T,E));Dg(o,a,M,Gr(T,D)),ts(o,M);const F=M.tViews=yg(2,M,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,M),F.queries=o.queries.embeddedTView(M)),M}(M,T,D,o,a,l,d,p,y):T.data[M];zr(F,!1);const B=D[11].createComment("");og(T,D,B,F),kr(B,D),Ed(D,D[M]=dy(B,D,B,F)),qa(F)&&Cr(T,D,F),null!=y&&wd(D,F,E)}function Ry(i){return function _i(i,o){return i[o]}(function ol(){return ht.lFrame.contextLView}(),20+i)}function xf(i,o=lt.Default){const a=Ce();return null===a?et(i,o):Fs(pn(),a,J(i),o)}function br(){throw new Error("invalid")}function ku(i,o,a){const l=Ce();return hi(l,Os(),o)&&ls(Ot(),En(),l,i,o,l[11],a,!1),ku}function Py(i,o,a,l,d){const y=d?"class":"style";bd(i,a,o.inputs[y],y,l)}function $g(i,o,a,l){const d=Ce(),p=Ot(),y=20+i,E=d[11],D=d[y]=gd(E,o,function n_(){return ht.lFrame.currentNamespace}()),T=p.firstCreatePass?function Ir(i,o,a,l,d,p,y){const E=o.consts,T=$l(o,i,2,d,Gr(E,p));return Dg(o,a,T,Gr(E,y)),null!==T.attrs&&Id(T,T.attrs,!1),null!==T.mergedAttrs&&Id(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(y,p,d,0,o,a,l):p.data[y];zr(T,!0);const M=T.mergedAttrs;null!==M&&ft(E,D,M);const F=T.classes;null!==F&&nf(E,D,F);const B=T.styles;return null!==B&&Nr(E,D,B),64!=(64&T.flags)&&og(p,d,D,T),0===function fa(){return ht.lFrame.elementDepthCount}()&&kr(D,d),function nu(){ht.lFrame.elementDepthCount++}(),qa(T)&&(Cr(p,d,T),Dr(p,T,d)),null!==l&&wd(d,T),$g}function Do(){let i=pn();il()?sl():(i=i.parent,zr(i,!1));const o=i;!function ru(){ht.lFrame.elementDepthCount--}();const a=Ot();return a.firstCreatePass&&(ts(a,i),Mc(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function bh(i){return 0!=(16&i.flags)}(o)&&Py(a,o,Ce(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Vp(i){return 0!=(32&i.flags)}(o)&&Py(a,o,Ce(),o.stylesWithoutHost,!1),Do}function On(i,o,a,l){return $g(i,o,a,l),Do(),On}function Rf(i,o,a){const l=Ce(),d=Ot(),p=i+20,y=d.firstCreatePass?function Fy(i,o,a,l,d){const p=o.consts,y=Gr(p,l),E=$l(o,i,8,"ng-container",y);return null!==y&&Id(E,y,!0),Dg(o,a,E,Gr(p,d)),null!==o.queries&&o.queries.elementStart(o,E),E}(p,d,l,o,a):d.data[p];zr(y,!0);const E=l[p]=l[11].createComment("");return og(d,l,E,y),kr(E,l),qa(y)&&(Cr(d,l,y),Dr(d,y,l)),null!=a&&wd(l,y),Rf}function Nu(){let i=pn();const o=Ot();return il()?sl():(i=i.parent,zr(i,!1)),o.firstCreatePass&&(ts(o,i),Mc(i)&&o.queries.elementEnd(i)),Nu}function Ly(i,o,a){return Rf(i,o,a),Nu(),Ly}function ea(){return Ce()}function Ma(i){return!!i&&"function"==typeof i.then}function kd(i){return!!i&&"function"==typeof i.subscribe}const Vy=kd;function je(i,o,a,l){const d=Ce(),p=Ot(),y=pn();return function Pu(i,o,a,l,d,p,y,E){const D=qa(l),M=i.firstCreatePass&&Cd(i),F=o[8],B=M0(o);let W=!0;if(3&l.type||E){const He=pr(l,o),it=E?E(He):He,be=B.length,pt=E?qt=>E(on(qt[l.index])):l.index;if(dn(a)){let qt=null;if(!E&&D&&(qt=function rE(i,o,a,l){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===a&&d[p+1]===l){const E=o[7],D=d[p+2];return E.length>D?E[D]:null}"string"==typeof y&&(p+=2)}return null}(i,o,d,l.index)),null!==qt)(qt.__ngLastListenerFn__||qt).__ngNextListenerFn__=p,qt.__ngLastListenerFn__=p,W=!1;else{p=oc(l,o,F,p,!1);const _t=a.listen(it,d,p);B.push(p,_t),M&&M.push(d,pt,be,be+1)}}else p=oc(l,o,F,p,!0),it.addEventListener(d,p,y),B.push(p),M&&M.push(d,pt,be,y)}else p=oc(l,o,F,p,!1);const _e=l.outputs;let Fe;if(W&&null!==_e&&(Fe=_e[d])){const He=Fe.length;if(He)for(let it=0;it<He;it+=2){const Ks=o[Fe[it]][Fe[it+1]].subscribe(p),fh=B.length;B.push(p,Ks),M&&M.push(d,l.index,fh,-(fh+1))}}}(p,d,d[11],y,i,o,!!a,l),je}function Co(i,o,a,l){try{return!1!==a(l)}catch(d){return yf(i,d),!1}}function oc(i,o,a,l,d){return function p(y){if(y===Function)return l;const E=2&i.flags?gr(i.index,o):o;0==(32&o[2])&&Dd(E);let D=Co(o,0,l,y),T=p.__ngNextListenerFn__;for(;T;)D=Co(o,0,T,y)&&D,T=T.__ngNextListenerFn__;return d&&!1===D&&(y.preventDefault(),y.returnValue=!1),D}}function xa(i=1){return function ks(i){return(ht.lFrame.contextLView=function hl(i,o){for(;i>0;)o=o[15],i--;return o}(i,ht.lFrame.contextLView))[8]}(i)}function iE(i,o){let a=null;const l=function Ia(i){const o=i.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(i);for(let d=0;d<o.length;d++){const p=o[d];if("*"!==p){if(null===l?t0(i,p,!0):At(l,p))return d}else a=d}return a}function ac(i){const o=Ce()[16][6];if(!o.projection){const l=o.projection=Ci(i?i.length:1,null),d=l.slice();let p=o.child;for(;null!==p;){const y=i?iE(p,i):0;null!==y&&(d[y]?d[y].projectionNext=p:l[y]=p,d[y]=p),p=p.next}}}function Gg(i,o=0,a){const l=Ce(),d=Ot(),p=$l(d,20+i,16,null,a||null);null===p.projection&&(p.projection=o),sl(),64!=(64&p.flags)&&function ye(i,o,a){yd(o[11],0,o,a,sg(i,a,o),Kw(a.parent||o[6],a,o))}(d,l,p)}function Ra(i,o,a){return Of(i,"",o,"",a),Ra}function Of(i,o,a,l,d){const p=Ce(),y=Ru(p,o,a,l);return y!==Ct&&ls(Ot(),En(),p,i,y,p[11],d,!1),Of}function $y(i,o,a,l,d){const p=i[a+1],y=null===o;let E=l?$i(p):Ta(p),D=!1;for(;0!==E&&(!1===D||y);){const M=i[E+1];Tn(i[E],o)&&(D=!0,i[E+1]=l?W_(M):z_(M)),E=l?$i(M):Ta(M)}D&&(i[a+1]=l?z_(p):W_(p))}function Tn(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Hs(i,o)>=0}function Ud(i,o,a){return Io(i,o,a,!1),Ud}function Wg(i,o){return Io(i,o,null,!0),Wg}function Io(i,o,a,l){const d=Ce(),p=Ot(),y=function yi(i){const o=ht.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);p.firstUpdatePass&&function hE(i,o,a,l){const d=i.data;if(null===d[a+1]){const p=d[mr()],y=function dE(i,o){return o>=i.expandoStartIndex}(i,a);(function Zg(i,o){return 0!=(i.flags&(o?16:32))})(p,l)&&null===o&&!y&&(o=!1),o=function Ub(i,o,a,l){const d=function ga(i){const o=ht.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=jd(a=zy(null,i,o,a,l),o.attrs,l),p=null);else{const y=o.directiveStylingLast;if(-1===y||i[y]!==d)if(a=zy(d,i,o,a,l),null===p){let D=function Bb(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Ta(l))return i[$i(l)]}(i,o,l);void 0!==D&&Array.isArray(D)&&(D=zy(null,i,o,D[1],l),D=jd(D,o.attrs,l),function Lu(i,o,a,l){i[$i(a?o.classBindings:o.styleBindings)]=l}(i,o,l,D))}else p=function Bd(i,o,a){let l;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)l=jd(l,i[p].hostAttrs,a);return jd(l,o.attrs,a)}(i,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,l),function aE(i,o,a,l,d,p){let y=p?o.classBindings:o.styleBindings,E=$i(y),D=Ta(y);i[l]=a;let M,T=!1;if(Array.isArray(a)){const F=a;M=F[1],(null===M||Hs(F,M)>0)&&(T=!0)}else M=a;if(d)if(0!==D){const B=$i(i[E+1]);i[l+1]=lr(B,E),0!==B&&(i[B+1]=lg(i[B+1],l)),i[E+1]=function Du(i,o){return 131071&i|o<<17}(i[E+1],l)}else i[l+1]=lr(E,0),0!==E&&(i[E+1]=lg(i[E+1],l)),E=l;else i[l+1]=lr(D,0),0===E?E=l:i[D+1]=lg(i[D+1],l),D=l;T&&(i[l+1]=z_(i[l+1])),$y(i,M,l,!0),$y(i,M,l,!1),function fi(i,o,a,l,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&Hs(p,o)>=0&&(a[l+1]=W_(a[l+1]))}(o,M,i,l,p),y=lr(E,D),p?o.classBindings=y:o.styleBindings=y}(d,p,o,a,y,l)}}(p,i,y,l),o!==Ct&&hi(d,y,o)&&function lc(i,o,a,l,d,p,y,E){if(!(3&o.type))return;const D=i.data,T=D[E+1];cc(function q_(i){return 1==(1&i)}(T)?Nf(D,o,a,d,Ta(T),y):void 0)||(cc(p)||function Fr(i){return 2==(2&i)}(T)&&(p=Nf(D,null,a,d,E,y)),function H_(i,o,a,l,d){const p=dn(i);if(o)d?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let y=-1===l.indexOf("-")?void 0:se.DashCase;if(null==d)p?i.removeStyle(a,l,y):a.style.removeProperty(l);else{const E="string"==typeof d&&d.endsWith("!important");E&&(d=d.slice(0,-10),y|=se.Important),p?i.setStyle(a,l,d,y):a.style.setProperty(l,d,E?"important":"")}}}(l,y,ro(mr(),a),d,p))}(p,p.data[mr()],d,d[11],i,d[y+1]=function qy(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=he($s(i)))),i}(o,a),l,y)}function zy(i,o,a,l,d){let p=null;const y=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<y&&(p=o[E],l=jd(l,p.hostAttrs,d),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function jd(i,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?d=y:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Bn(i,y,!!a||o[++p]))}return void 0===i?null:i}function Nf(i,o,a,l,d,p){const y=null===o;let E;for(;d>0;){const D=i[d],T=Array.isArray(D),M=T?D[1]:D,F=null===M;let B=a[d+1];B===Ct&&(B=F?ct:void 0);let W=F?Il(B,l):M===l?B:void 0;if(T&&!cc(W)&&(W=Il(D,l)),cc(W)&&(E=W,y))return E;const _e=i[d+1];d=y?$i(_e):Ta(_e)}if(null!==o){let D=p?o.residualClasses:o.residualStyles;null!=D&&(E=Il(D,l))}return E}function cc(i){return void 0!==i}function Kg(i,o=""){const a=Ce(),l=Ot(),d=i+20,p=l.firstCreatePass?$l(l,d,1,o,null):l.data[d],y=a[d]=function fd(i,o){return dn(i)?i.createText(o):i.createTextNode(o)}(a[11],o);og(l,a,y,p),zr(p,!1)}function Vu(i){return Si("",i,""),Vu}function Si(i,o,a){const l=Ce(),d=Ru(l,i,o,a);return d!==Ct&&Ai(l,mr(),d),Si}const Bu=void 0;var Vf=["en",[["a","p"],["AM","PM"],Bu],[["AM","PM"],Bu,Bu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bu,"{1} 'at' {0}",Bu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function TE(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let ju={};function zn(i){const o=function em(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=tv(o);if(a)return a;const l=o.split("-")[0];if(a=tv(l),a)return a;if("en"===l)return Vf;throw new Error(`Missing locale data for the locale "${i}".`)}function ev(i){return zn(i)[Qe.PluralCase]}function tv(i){return i in ju||(ju[i]=Vt.ng&&Vt.ng.common&&Vt.ng.common.locales&&Vt.ng.common.locales[i]),ju[i]}var Qe=(()=>((Qe=Qe||{})[Qe.LocaleId=0]="LocaleId",Qe[Qe.DayPeriodsFormat=1]="DayPeriodsFormat",Qe[Qe.DayPeriodsStandalone=2]="DayPeriodsStandalone",Qe[Qe.DaysFormat=3]="DaysFormat",Qe[Qe.DaysStandalone=4]="DaysStandalone",Qe[Qe.MonthsFormat=5]="MonthsFormat",Qe[Qe.MonthsStandalone=6]="MonthsStandalone",Qe[Qe.Eras=7]="Eras",Qe[Qe.FirstDayOfWeek=8]="FirstDayOfWeek",Qe[Qe.WeekendRange=9]="WeekendRange",Qe[Qe.DateFormat=10]="DateFormat",Qe[Qe.TimeFormat=11]="TimeFormat",Qe[Qe.DateTimeFormat=12]="DateTimeFormat",Qe[Qe.NumberSymbols=13]="NumberSymbols",Qe[Qe.NumberFormats=14]="NumberFormats",Qe[Qe.CurrencyCode=15]="CurrencyCode",Qe[Qe.CurrencySymbol=16]="CurrencySymbol",Qe[Qe.CurrencyName=17]="CurrencyName",Qe[Qe.Currencies=18]="Currencies",Qe[Qe.Directionality=19]="Directionality",Qe[Qe.PluralCase=20]="PluralCase",Qe[Qe.ExtraData=21]="ExtraData",Qe))();const Uf="en-US";let Wd=Uf;function Oa(i,o,a,l,d){if(i=J(i),Array.isArray(i))for(let p=0;p<i.length;p++)Oa(i[p],o,a,l,d);else{const p=Ot(),y=Ce();let E=Ad(i)?i:J(i.provide),D=R0(i);const T=pn(),M=1048575&T.providerIndexes,F=T.directiveStart,B=T.providerIndexes>>20;if(Ad(i)||!i.multi){const W=new Uo(D,d,xf),_e=am(E,o,d?M:M+B,F);-1===_e?(Ps(gn(T,y),p,E),av(p,i,o.length),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(W),y.push(W)):(a[_e]=W,y[_e]=W)}else{const W=am(E,o,M+B,F),_e=am(E,o,M,M+B),Fe=W>=0&&a[W],He=_e>=0&&a[_e];if(d&&!He||!d&&!Fe){Ps(gn(T,y),p,E);const it=function lv(i,o,a,l,d){const p=new Uo(i,a,xf);return p.multi=[],p.index=o,p.componentProviders=0,Hu(p,d,l&&!a),p}(d?eD:uv,a.length,d,l,D);!d&&He&&(a[_e].providerFactory=it),av(p,i,o.length,0),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(it),y.push(it)}else av(p,i,W>-1?W:_e,Hu(a[d?_e:W],D,!d&&l));!d&&l&&He&&a[_e].componentProviders++}}}function av(i,o,a,l){const d=Ad(o),p=function Db(i){return!!i.useClass}(o);if(d||p){const D=(p?J(o.useClass):o).prototype.ngOnDestroy;if(D){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const M=T.indexOf(a);-1===M?T.push(a,[l,D]):T[M+1].push(l,D)}else T.push(a,D)}}}function Hu(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function am(i,o,a,l){for(let d=a;d<l;d++)if(o[d]===i)return d;return-1}function uv(i,o,a,l){return cr(this.multi,[])}function eD(i,o,a,l){const d=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=wi(a,a[1],this.providerFactory.index,l);p=E.slice(0,y),cr(d,p);for(let D=y;D<E.length;D++)p.push(E[D])}else p=[],cr(d,p);return p}function cr(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function um(i,o=[]){return a=>{a.providersResolver=(l,d)=>function Zf(i,o,a){const l=Ot();if(l.firstCreatePass){const d=Hr(i);Oa(a,l.data,l.blueprint,d,!0),Oa(o,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,o)}}class ka{}class lm{resolveComponentFactory(o){throw function tD(i){const o=Error(`No component factory found for ${he(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let ia=(()=>{class i{}return i.NULL=new lm,i})();function gc(){return Mo(pn(),Ce())}function Mo(i,o){return new Na(pr(i,o))}let Na=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=gc,i})();function rD(i){return i instanceof Na?i.nativeElement:i}class cm{}let sD=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function oD(){const i=Ce(),a=gr(pn().index,i);return function hI(i){return i[11]}(mi(a)?a:i)}(),i})(),aD=(()=>{class i{}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:()=>null}),i})();class dm{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const th=new dm("13.3.5"),Pa={};function hm(i,o,a,l,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(on(p)),ri(p))for(let E=10;E<p.length;E++){const D=p[E],T=D[1].firstChild;null!==T&&hm(D[1],D,T,l)}const y=a.type;if(8&y)hm(i,o,a.child,l);else if(32&y){const E=tt(a,o);let D;for(;D=E();)l.push(D)}else if(16&y){const E=Jw(o,a);if(Array.isArray(E))l.push(...E);else{const D=In(o[16]);hm(D[1],D,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class nh{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return hm(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ri(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(O_(o,l),os(a,l))}this._attachedToViewContainer=!1}k_(this._lView[1],this._lView)}onDestroy(o){vg(this._lView[1],this._lView,null,o)}markForCheck(){Dd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){gy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Tg(i,o,a){Rs(!0);try{gy(i,o,a)}finally{Rs(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new ke(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function rg(i,o){ag(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ke(902,"");this._appRef=o}}class fI extends nh{constructor(o){super(o),this._view=o}detectChanges(){Ig(this._view)}checkNoChanges(){!function my(i){Rs(!0);try{Ig(i)}finally{Rs(!1)}}(this._view)}get context(){return null}}class uD extends ia{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=$t(o);return new Fa(a,this.ngModule)}}function lD(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class Fa extends ka{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function sf(i){return i.map(G_).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return lD(this.componentDef.inputs)}get outputs(){return lD(this.componentDef.outputs)}create(o,a,l,d){const p=(d=d||this.ngModule)?function $u(i,o){return{get:(a,l,d)=>{const p=i.get(a,Pa,d);return p!==Pa||l===Pa?p:o.get(a,l,d)}}}(o,d.injector):o,y=p.get(cm,Fo),E=p.get(aD,null),D=y.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",M=l?function _0(i,o,a){if(dn(i))return i.selectRootElement(o,a===Ht.ShadowDom);let l="string"==typeof o?i.querySelector(o):o;return l.textContent="",l}(D,l,this.componentDef.encapsulation):gd(y.createRenderer(null,this.componentDef),T,function Kf(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(T)),F=this.componentDef.onPush?576:528,B=function er(i,o){return{components:[],scheduler:i||S_,clean:S0,playerHandler:o||null,flags:0}}(),W=yg(0,null,null,1,0,null,null,null,null,null),_e=vd(null,W,B,F,null,null,y,D,E,p);let Fe,He;io(_e);try{const it=function Md(i,o,a,l,d,p){const y=a[1];a[20]=i;const D=$l(y,20,2,"#host",null),T=D.mergedAttrs=o.hostAttrs;null!==T&&(Id(D,T,!0),null!==i&&(ft(d,i,T),null!==D.classes&&nf(d,i,D.classes),null!==D.styles&&Nr(d,i,D.styles)));const M=l.createRenderer(i,o),F=vd(a,_g(o),null,o.onPush?64:16,a[20],D,l,M,p||null,null);return y.firstCreatePass&&(Ps(gn(D,a),y,o.type),C0(y,D),pf(D,a.length,1)),Ed(a,F),a[20]=F}(M,this.componentDef,_e,y,D);if(M)if(l)ft(D,M,["ng-version",th.full]);else{const{attrs:be,classes:pt}=function ob(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===d?""!==p&&o.push(p,i[++l]):8===d&&a.push(p);else{if(!Pr(d))break;d=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);be&&ft(D,M,be),pt&&pt.length>0&&nf(D,M,pt.join(" "))}if(He=ha(W,20),void 0!==a){const be=He.projection=[];for(let pt=0;pt<this.ngContentSelectors.length;pt++){const qt=a[pt];be.push(null!=qt?Array.from(qt):null)}}Fe=function B0(i,o,a,l,d){const p=a[1],y=function D0(i,o,a){const l=pn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),ly(i,l,o,Gl(i,o,1,null),a));const d=wi(o,i,l.directiveStart,l);kr(d,o);const p=pr(l,o);return p&&kr(p,o),d}(p,a,o);if(l.components.push(y),i[8]=y,d&&d.forEach(D=>D(y,o)),o.contentQueries){const D=pn();o.contentQueries(1,y,D.directiveStart)}const E=pn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Ns(E.index),uy(a[1],E,0,E.directiveStart,E.directiveEnd,o),zl(o,y)),y}(it,this.componentDef,_e,B,[j0]),ff(W,_e,null)}finally{oo()}return new pI(this.componentType,Fe,Mo(He,_e),_e,He)}}class pI extends class cv{}{constructor(o,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new fI(d),this.componentType=o}get injector(){return new Ei(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class xo{}class dD{}const mc=new Map;class Qf extends xo{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new uD(this);const l=un(o);this._bootstrapComponents=g(l.bootstrap),this._r3Injector=bf(o,a,[{provide:xo,useValue:this},{provide:ia,useValue:this.componentFactoryResolver}],he(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=Kr.THROW_IF_NOT_FOUND,l=lt.Default){return o===Kr||o===xo||o===wf?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Jf extends dD{constructor(o){super(),this.moduleType=o,null!==un(o)&&function pm(i){const o=new Set;!function a(l){const d=un(l,!0),p=d.id;null!==p&&(function Yf(i,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${i} - ${he(o)} vs ${he(o.name)}`)}(p,mc.get(p),l),mc.set(p,l));const y=g(d.imports);for(const E of y)o.has(E)||(o.add(E),a(E))}(i)}(o)}create(o){return new Qf(this.moduleType,o)}}function fv(i){return o=>{setTimeout(i,void 0,o)}}const Ro=class ED extends c.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,p,y;let E=o,D=a||(()=>null),T=l;if(o&&"object"==typeof o){const F=o;E=null===(d=F.next)||void 0===d?void 0:d.bind(F),D=null===(p=F.error)||void 0===p?void 0:p.bind(F),T=null===(y=F.complete)||void 0===y?void 0:y.bind(F)}this.__isAsync&&(D=fv(D),E&&(E=fv(E)),T&&(T=fv(T)));const M=super.subscribe({next:E,error:D,complete:T});return o instanceof Y.w0&&o.add(M),M}};function pv(){return this._results[Tu()]()}class ep{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Tu(),l=ep.prototype;l[a]||(l[a]=pv)}get changes(){return this._changes||(this._changes=new Ro)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=vr(o);(this._changesDetected=!function wl(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],p=o[l];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let La=(()=>{class i{}return i.__NG_ELEMENT_ID__=wI,i})();const mm=La,gv=class extends mm{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=vd(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),ff(a,l,o),new nh(l)}};function wI(){return oh(pn(),Ce())}function oh(i,o){return 4&i.type?new gv(o,i,Mo(i,o)):null}let tp=(()=>{class i{}return i.__NG_ELEMENT_ID__=EI,i})();function EI(){return yv(pn(),Ce())}const DD=tp,mv=class extends DD{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Mo(this._hostTNode,this._hostLView)}get injector(){return new Ei(this._hostTNode,this._hostLView)}get parentInjector(){const o=ai(this._hostTNode,this._hostLView);if(Wc(o)){const a=vi(o,this._hostLView),l=cn(o);return new Ei(a[1].data[l+8],a)}return new Ei(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=_m(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,p){const y=o&&!function zo(i){return"function"==typeof i}(o);let E;if(y)E=a;else{const F=a||{};E=F.index,l=F.injector,d=F.projectableNodes,p=F.ngModuleRef}const D=y?o:new Fa($t(o)),T=l||this.parentInjector;if(!p&&null==D.ngModule){const B=(y?T:this.parentInjector).get(xo,null);B&&(p=B)}const M=D.create(T,d,void 0,p);return this.insert(M.hostView,E),M}insert(o,a){const l=o._lView,d=l[1];if(function eu(i){return ri(i[3])}(l)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const F=l[3],B=new mv(F,F[6],F[3]);B.detach(B.indexOf(o))}}const p=this._adjustIndex(a),y=this._lContainer;!function ig(i,o,a,l){const d=10+l,p=a.length;l>0&&(a[d-1][4]=o),l<p-10?(o[4]=a[d],El(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const y=o[17];null!==y&&a!==y&&function md(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(i),o[2]|=128}(d,l,y,p);const E=V_(p,y),D=l[11],T=tf(D,y[7]);return null!==T&&function ef(i,o,a,l,d,p){l[0]=d,l[6]=o,ag(i,l,a,1,d,p)}(d,y[6],D,l,T,E),o.attachToViewContainerRef(),El(_v(y),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=_m(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=O_(this._lContainer,a);l&&(os(_v(this._lContainer),a),k_(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=O_(this._lContainer,a);return l&&null!=os(_v(this._lContainer),a)?new nh(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function _m(i){return i[8]}function _v(i){return i[8]||(i[8]=[])}function yv(i,o){let a;const l=o[i.index];if(ri(l))a=l;else{let d;if(8&i.type)d=on(l);else{const p=o[11];d=p.createComment("");const y=pr(i,o);us(p,tf(p,y),d,function sb(i,o){return dn(i)?i.nextSibling(o):o.nextSibling}(p,y),!1)}o[i.index]=a=dy(l,o,d,i),Ed(o,a)}return new mv(a,i,o)}class qu{constructor(o){this.queryList=o,this.matches=null}clone(){return new qu(this.queryList)}setDirty(){this.queryList.setDirty()}}class Wu{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<l;p++){const y=a.getByIndex(p);d.push(this.queries[y.indexInDeclarationView].clone())}return new Wu(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==RD(o,a).matches&&this.queries[a].setDirty()}}class ym{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class ah{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new ah(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class vm{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new vm(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,a,bD(a,p)),this.matchTNodeWithReadOption(o,a,Ls(a,o,p,!1,!1))}else l===La?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Ls(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Na||d===tp||d===La&&4&a.type)this.addMatch(a.index,-2);else{const p=Ls(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function bD(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function CI(i,o,a,l){return-1===a?function ID(i,o){return 11&i.type?Mo(i,o):4&i.type?oh(i,o):null}(o,i):-2===a?function vv(i,o,a){return a===Na?Mo(o,i):a===La?oh(o,i):a===tp?yv(o,i):void 0}(i,o,l):wi(i,i[1],a,o)}function TD(i,o,a,l){const d=o[19].queries[l];if(null===d.matches){const p=i.data,y=a.matches,E=[];for(let D=0;D<y.length;D+=2){const T=y[D];E.push(T<0?null:CI(o,p[T],y[D+1],a.metadata.read))}d.matches=E}return d.matches}function np(i,o,a,l){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const y=TD(i,o,d,a);for(let E=0;E<p.length;E+=2){const D=p[E];if(D>0)l.push(y[E/2]);else{const T=p[E+1],M=o[-D];for(let F=10;F<M.length;F++){const B=M[F];B[17]===B[3]&&np(B[1],B,T,l)}if(null!==M[9]){const F=M[9];for(let B=0;B<F.length;B++){const W=F[B];np(W[1],W,T,l)}}}}}return l}function AD(i){const o=Ce(),a=Ot(),l=ll();cl(l+1);const d=RD(a,l);if(i.dirty&&Ss(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?np(a,o,l,[]):TD(a,o,d,l);i.reset(p,rD),i.notifyOnChanges()}return!0}return!1}function SD(i,o,a){const l=Ot();l.firstCreatePass&&(xD(l,new ym(i,o,a),-1),2==(2&o)&&(l.staticViewQueries=!0)),MD(l,Ce(),o)}function wm(i,o,a,l){const d=Ot();if(d.firstCreatePass){const p=pn();xD(d,new ym(o,a,l),p.index),function II(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}MD(d,Ce(),a)}function Tr(){return function bI(i,o){return i[19].queries[o].queryList}(Ce(),ll())}function MD(i,o,a){const l=new ep(4==(4&a));vg(i,o,l,l.destroy),null===o[19]&&(o[19]=new Wu),o[19].queries.push(new qu(l))}function xD(i,o,a){null===i.queries&&(i.queries=new ah),i.queries.track(new vm(o,a))}function RD(i,o){return i.queries.getByIndex(o)}function ch(...i){}const km=new mn("Application Initializer");let Nv=(()=>{class i{constructor(a){this.appInits=a,this.resolve=ch,this.reject=ch,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Ma(p))a.push(p);else if(Vy(p)){const y=new Promise((E,D)=>{p.subscribe({complete:E,error:D})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(et(km,8))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Nm=new mn("AppId",{providedIn:"root",factory:function jD(){return`${Pm()}${Pm()}${Pm()}`}});function Pm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Fm=new mn("Platform Initializer"),Pv=new mn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Lm=new mn("appBootstrapListener");let Zu=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Ku=new mn("LocaleId",{providedIn:"root",factory:()=>Tt(Ku,lt.Optional|lt.SkipSelf)||function Fv(){return"undefined"!=typeof $localize&&$localize.locale||Uf}()}),dh=new mn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class NI{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Lv=(()=>{class i{compileModuleSync(a){return new Jf(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=g(un(a).declarations).reduce((y,E)=>{const D=$t(E);return D&&y.push(new Fa(D)),y},[]);return new NI(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Uv=(()=>Promise.resolve(0))();function Bv(i){"undefined"==typeof Zone?Uv.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class fs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ro(!1),this.onMicrotaskEmpty=new Ro(!1),this.onStable=new Ro(!1),this.onError=new Ro(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function PI(){let i=Vt.requestAnimationFrame,o=Vt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function FI(i){const o=()=>{!function GD(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Vt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Vm(i),i.isCheckStableRunning=!0,Hv(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Vm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,y,E)=>{try{return $v(i),a.invokeTask(d,p,y,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),Gv(i)}},onInvoke:(a,l,d,p,y,E,D)=>{try{return $v(i),a.invoke(d,p,y,E,D)}finally{i.shouldCoalesceRunChangeDetection&&o(),Gv(i)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Vm(i),Hv(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(fs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,o,jv,ch,ch);try{return p.runTask(y,a,l)}finally{p.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const jv={};function Hv(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Vm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function $v(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Gv(i){i._nesting--,Hv(i)}class zD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ro,this.onMicrotaskEmpty=new Ro,this.onStable=new Ro,this.onError=new Ro}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let qD=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fs.assertNotInAngularZone(),Bv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Bv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(et(fs))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac}),i})(),LI=(()=>{class i{constructor(){this._applications=new Map,lp.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return lp.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class VI{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function UI(i){lp=i}let lp=new VI,Ba=null;const Um=new mn("AllowMultipleToken"),WD=new mn("PlatformOnDestroy");class ZD{constructor(o,a){this.name=o,this.token=a}}function Zv(i,o,a=[]){const l=`Platform: ${o}`,d=new mn(l);return(p=[])=>{let y=cp();if(!y||y.injector.get(Um,!1)){const E=[...a,...p,{provide:d,useValue:!0}];i?i(E):function Wv(i){if(Ba&&!Ba.get(Um,!1))throw new ke(400,"");Ba=i;const o=i.get(KD),a=i.get(Fm,null);a&&a.forEach(l=>l())}(function Kv(i=[],o){return Kr.create({name:o,providers:[{provide:Sg,useValue:"platform"},{provide:WD,useValue:()=>Ba=null},...i]})}(E,l))}return function BI(i){const o=cp();if(!o)throw new ke(401,"");return o}()}}function cp(){var i;return null!==(i=null==Ba?void 0:Ba.get(KD))&&void 0!==i?i:null}let KD=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function Yv(i,o){let a;return a="noop"===i?new zD:("zone.js"===i?void 0:i)||new fs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),D=[{provide:fs,useValue:E}];return E.run(()=>{const T=Kr.create({providers:D,parent:this.injector,name:a.moduleType.name}),M=a.create(T),F=M.injector.get(Er,null);if(!F)throw new ke(402,"");return E.runOutsideAngular(()=>{const B=E.onError.subscribe({next:W=>{F.handleError(W)}});M.onDestroy(()=>{hp(this._modules,M),B.unsubscribe()})}),function jI(i,o,a){try{const l=a();return Ma(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(F,E,()=>{const B=M.injector.get(Nv);return B.runInitializers(),B.donePromise.then(()=>(function zb(i){nn(i,"Expected localeId to be defined"),"string"==typeof i&&(Wd=i.toLowerCase().replace(/_/g,"-"))}(M.injector.get(Ku,Uf)||Uf),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,l=[]){const d=Bm({},l);return function zv(i,o,a){const l=new Jf(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get(dp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new ke(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(WD,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(et(Kr))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Bm(i,o){return Array.isArray(o)?o.reduce(Bm,i):Object.assign(Object.assign({},i),o)}let dp=(()=>{class i{constructor(a,l,d,p){this._zone=a,this._injector=l,this._exceptionHandler=d,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new P.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),E=new P.y(D=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{fs.assertNotInAngularZone(),Bv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{fs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{T.unsubscribe(),M.unsubscribe()}});this.isStable=(0,oe.T)(y,E.pipe((0,ee.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new ke(405,"");let d;d=a instanceof ka?a:this._injector.get(ia).resolveComponentFactory(a),this.componentTypes.push(d.componentType);const p=function qv(i){return i.isBoundToModule}(d)?void 0:this._injector.get(xo),E=d.create(Kr.NULL,[],l||d.selector,p),D=E.location.nativeElement,T=E.injector.get(qD,null),M=T&&E.injector.get(LI);return T&&M&&M.registerApplication(D,T),E.onDestroy(()=>{this.detachView(E.hostView),hp(this.components,E),M&&M.unregisterApplication(D)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new ke(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;hp(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Lm,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(et(fs),et(Kr),et(Er),et(Nv))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function hp(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let jm=!0,QD=!1;function Qv(){return QD=!0,jm}function ja(){if(QD)throw new Error("Cannot enable prod mode after platform setup.");jm=!1}let HI=(()=>{class i{}return i.__NG_ELEMENT_ID__=$I,i})();function $I(i){return function Jv(i,o,a){if(Cs(i)&&!a){const l=gr(i.index,o);return new nh(l,l)}return 47&i.type?new nh(o[16],o):null}(pn(),Ce(),16==(16&i))}class _p{constructor(){}supports(o){return xd(o)}create(o){return new WI(o)}}const qI=(i,o)=>o;class WI{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||qI}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const y=!l||a&&a.currentIndex<Gm(l,d,p)?a:l,E=Gm(y,d,p),D=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{p||(p=[]);const T=E-d,M=D-d;if(T!=M){for(let B=0;B<T;B++){const W=B<p.length?p[B]:p[B]=0,_e=W+B;M<=_e&&_e<T&&(p[B]=W+1)}p[y.previousIndex]=M-T}}E!==D&&o(y,E,D)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!xd(o))throw new ke(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],y=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,p,y,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,y,E),l=!0),a=a._next}else d=0,function Fg(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Tu()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{y=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,E,y,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new ZI(a,l),p,d),o}_verifyReinsertion(o,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new iw),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new iw),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ZI{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class KI{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class iw{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new KI,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Gm(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class sw{constructor(){}supports(o){return o instanceof Map||Lg(o)}create(){return new ow}}class ow{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Lg(o)))throw new ke(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const l=new aw(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class aw{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function zm(){return new hh([new _p])}let hh=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||zm()),deps:[[i,new po,new ci]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new ke(901,"")}}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:zm}),i})();function uw(){return new yp([new sw])}let yp=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||uw()),deps:[[i,new po,new ci]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new ke(901,"")}}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:uw}),i})();const YI=Zv(null,"core",[]);let QI=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(et(dp))},i.\u0275mod=Q({type:i}),i.\u0275inj=Wt({}),i})()},3942:(at,Ie,N)=>{N.d(Ie,{Z:()=>ke});var c=N(2090),Y=N(4859),P=N(9681),oe=N(1877);class ee{constructor(fe,Ee){this._delegate=fe,this.firebase=Ee,(0,P._addComponent)(fe,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(fe,Ee=P._DEFAULT_ENTRY_NAME){var nt;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(fe);return!Ye.isInitialized()&&"EXPLICIT"===(null===(nt=Ye.getComponent())||void 0===nt?void 0:nt.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:Ee})}_removeServiceInstance(fe,Ee=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(Ee)}_addComponent(fe){(0,P._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,P._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function ce(){const Ve=function he(Ve){const fe={},Ee={__esModule:!0,initializeApp:function Te($e,re={}){const Ke=P.initializeApp($e,re);if((0,c.r3)(fe,Ke.name))return fe[Ke.name];const X=new Ve(Ke,Ee);return fe[Ke.name]=X,X},app:Ye,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function we($e){const re=$e.name,Ke=re.replace("-compat","");if(P._registerComponent($e)&&"PUBLIC"===$e.type){const X=(ae=Ye())=>{if("function"!=typeof ae[Ke])throw ie.create("invalid-app-argument",{appName:re});return ae[Ke]()};void 0!==$e.serviceProps&&(0,c.ZB)(X,$e.serviceProps),Ee[Ke]=X,Ve.prototype[Ke]=function(...ae){return this._getService.bind(this,re).apply(this,$e.multipleInstances?ae:[])}}return"PUBLIC"===$e.type?Ee[Ke]:null},removeApp:function nt($e){delete fe[$e]},useAsService:function Ge($e,re){return"serverAuth"===re?null:re},modularAPIs:P}};function Ye($e){if(!(0,c.r3)(fe,$e=$e||P._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:$e});return fe[$e]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function ve(){return Object.keys(fe).map($e=>fe[$e])}}),Ye.App=Ve,Ee}(ee);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function fe(Ee){(0,c.ZB)(Ve,Ee)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Ve}(),$=new oe.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=H;!function Se(Ve){(0,P.registerVersion)("@firebase/app-compat","0.1.23",Ve)}()},9681:(at,Ie,N)=>{N.r(Ie),N.d(Ie,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Ar,_DEFAULT_ENTRY_NAME:()=>zt,_addComponent:()=>Zn,_addOrOverwriteComponent:()=>vn,_apps:()=>ze,_clearComponents:()=>jt,_components:()=>Bt,_getProvider:()=>gi,_registerComponent:()=>Qt,_removeServiceInstance:()=>Wt,deleteApp:()=>Zi,getApp:()=>Sr,getApps:()=>Wi,initializeApp:()=>Oi,onLog:()=>Kn,registerVersion:()=>jr,setLogLevel:()=>Vn});var c=N(5861),Y=N(4859),P=N(1877),oe=N(2090);class ee{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function ge(Je){const Ae=Je.getComponent();return"VERSION"===(null==Ae?void 0:Ae.type)}(Xe)){const dt=Xe.getImmediate();return`${dt.library}/${dt.version}`}return null}).filter(Xe=>Xe).join(" ")}}const ie="@firebase/app",ce=new P.Yd("@firebase/app"),zt="[DEFAULT]",nn={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ze=new Map,Bt=new Map;function Zn(Je,Ae){try{Je.container.addComponent(Ae)}catch(Xe){ce.debug(`Component ${Ae.name} failed to register with FirebaseApp ${Je.name}`,Xe)}}function vn(Je,Ae){Je.container.addOrOverwriteComponent(Ae)}function Qt(Je){const Ae=Je.name;if(Bt.has(Ae))return ce.debug(`There were multiple attempts to register component ${Ae}.`),!1;Bt.set(Ae,Je);for(const Xe of ze.values())Zn(Xe,Je);return!0}function gi(Je,Ae){const Xe=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),Je.container.getProvider(Ae)}function Wt(Je,Ae,Xe=zt){gi(Je,Ae).clearInstance(Xe)}function jt(){Bt.clear()}const ei=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ys{constructor(Ae,Xe,dt){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=dt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}}const Ar="9.7.0";function Oi(Je,Ae={}){"object"!=typeof Ae&&(Ae={name:Ae});const Xe=Object.assign({name:zt,automaticDataCollectionEnabled:!1},Ae),dt=Xe.name;if("string"!=typeof dt||!dt)throw ei.create("bad-app-name",{appName:String(dt)});const Lt=ze.get(dt);if(Lt){if((0,oe.vZ)(Je,Lt.options)&&(0,oe.vZ)(Xe,Lt.config))return Lt;throw ei.create("duplicate-app",{appName:dt})}const Rt=new Y.H0(dt);for(const V of Bt.values())Rt.addComponent(V);const j=new ys(Je,Xe,Rt);return ze.set(dt,j),j}function Sr(Je=zt){const Ae=ze.get(Je);if(!Ae)throw ei.create("no-app",{appName:Je});return Ae}function Wi(){return Array.from(ze.values())}function Zi(Je){return lt.apply(this,arguments)}function lt(){return(lt=(0,c.Z)(function*(Je){const Ae=Je.name;ze.has(Ae)&&(ze.delete(Ae),yield Promise.all(Je.container.getProviders().map(Xe=>Xe.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function jr(Je,Ae,Xe){var dt;let Lt=null!==(dt=nn[Je])&&void 0!==dt?dt:Je;Xe&&(Lt+=`-${Xe}`);const Rt=Lt.match(/\s|\//),j=Ae.match(/\s|\//);if(Rt||j){const V=[`Unable to register library "${Lt}" with version "${Ae}":`];return Rt&&V.push(`library name "${Lt}" contains illegal characters (whitespace or "/")`),Rt&&j&&V.push("and"),j&&V.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void ce.warn(V.join(" "))}Qt(new Y.wA(`${Lt}-version`,()=>({library:Lt,version:Ae}),"VERSION"))}function Kn(Je,Ae){if(null!==Je&&"function"!=typeof Je)throw ei.create("invalid-log-argument");(0,P.Am)(Je,Ae)}function Vn(Je){(0,P.Ub)(Je)}const fn="firebase-heartbeat-store";let Yn=null;function vs(){return Yn||(Yn=(0,oe.X3)("firebase-heartbeat-database",1,(Je,Ae)=>{0===Ae&&Je.createObjectStore(fn)}).catch(Je=>{throw ei.create("storage-open",{originalErrorMessage:Je.message})})),Yn}function Ht(){return(Ht=(0,c.Z)(function*(Je){try{return(yield vs()).transaction(fn).objectStore(fn).get(rr(Je))}catch(Ae){throw ei.create("storage-get",{originalErrorMessage:Ae.message})}})).apply(this,arguments)}function ot(Je,Ae){return yt.apply(this,arguments)}function yt(){return(yt=(0,c.Z)(function*(Je,Ae){try{const dt=(yield vs()).transaction(fn,"readwrite");return yield dt.objectStore(fn).put(Ae,rr(Je)),dt.complete}catch(Xe){throw ei.create("storage-set",{originalErrorMessage:Xe.message})}})).apply(this,arguments)}function rr(Je){return`${Je.name}!${Je.options.appId}`}class Qs{constructor(Ae){this.container=Ae,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new ct(Xe),this._heartbeatsCachePromise=this._storage.read().then(dt=>(this._heartbeatsCache=dt,dt))}triggerHeartbeat(){var Ae=this;return(0,c.Z)(function*(){const dt=Ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Lt=dr();if(null===Ae._heartbeatsCache&&(Ae._heartbeatsCache=yield Ae._heartbeatsCachePromise),Ae._heartbeatsCache.lastSentHeartbeatDate!==Lt&&!Ae._heartbeatsCache.heartbeats.some(Rt=>Rt.date===Lt))return Ae._heartbeatsCache.heartbeats.push({date:Lt,agent:dt}),Ae._heartbeatsCache.heartbeats=Ae._heartbeatsCache.heartbeats.filter(Rt=>{const j=new Date(Rt.date).valueOf();return Date.now()-j<=2592e6}),Ae._storage.overwrite(Ae._heartbeatsCache)})()}getHeartbeatsHeader(){var Ae=this;return(0,c.Z)(function*(){if(null===Ae._heartbeatsCache&&(yield Ae._heartbeatsCachePromise),null===Ae._heartbeatsCache||0===Ae._heartbeatsCache.heartbeats.length)return"";const Xe=dr(),{heartbeatsToSend:dt,unsentEntries:Lt}=function ir(Je,Ae=1024){const Xe=[];let dt=Je.slice();for(const Lt of Je){const Rt=Xe.find(j=>j.agent===Lt.agent);if(Rt){if(Rt.dates.push(Lt.date),hr(Xe)>Ae){Rt.dates.pop();break}}else if(Xe.push({agent:Lt.agent,dates:[Lt.date]}),hr(Xe)>Ae){Xe.pop();break}dt=dt.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:dt}}(Ae._heartbeatsCache.heartbeats),Rt=(0,oe.L)(JSON.stringify({version:2,heartbeats:dt}));return Ae._heartbeatsCache.lastSentHeartbeatDate=Xe,Lt.length>0?(Ae._heartbeatsCache.heartbeats=Lt,yield Ae._storage.overwrite(Ae._heartbeatsCache)):(Ae._heartbeatsCache.heartbeats=[],Ae._storage.overwrite(Ae._heartbeatsCache)),Rt})()}}function dr(){return(new Date).toISOString().substring(0,10)}class ct{constructor(Ae){this.app=Ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ae=this;return(0,c.Z)(function*(){return(yield Ae._canUseIndexedDBPromise)&&(yield function oa(Je){return Ht.apply(this,arguments)}(Ae.app))||{heartbeats:[]}})()}overwrite(Ae){var Xe=this;return(0,c.Z)(function*(){var dt;if(yield Xe._canUseIndexedDBPromise){const Rt=yield Xe.read();return ot(Xe.app,{lastSentHeartbeatDate:null!==(dt=Ae.lastSentHeartbeatDate)&&void 0!==dt?dt:Rt.lastSentHeartbeatDate,heartbeats:Ae.heartbeats})}})()}add(Ae){var Xe=this;return(0,c.Z)(function*(){var dt;if(yield Xe._canUseIndexedDBPromise){const Rt=yield Xe.read();return ot(Xe.app,{lastSentHeartbeatDate:null!==(dt=Ae.lastSentHeartbeatDate)&&void 0!==dt?dt:Rt.lastSentHeartbeatDate,heartbeats:[...Rt.heartbeats,...Ae.heartbeats]})}})()}}function hr(Je){return(0,oe.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function Nt(Je){Qt(new Y.wA("platform-logger",Ae=>new ee(Ae),"PRIVATE")),Qt(new Y.wA("heartbeat",Ae=>new Qs(Ae),"PRIVATE")),jr(ie,"0.7.22",Je),jr(ie,"0.7.22","esm2017"),jr("fire-js","")}("")},4859:(at,Ie,N)=>{N.d(Ie,{H0:()=>he,wA:()=>P});var c=N(5861),Y=N(2090);class P{constructor(H,$,J){this.name=H,this.instanceFactory=$,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const oe="[DEFAULT]";class ee{constructor(H,$){this.name=H,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const $=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has($)){const J=new Y.BH;if(this.instancesDeferred.set($,J),this.isInitialized($)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:$});We&&J.resolve(We)}catch(We){}}return this.instancesDeferred.get($).promise}getImmediate(H){var $;const J=this.normalizeInstanceIdentifier(null==H?void 0:H.identifier),We=null!==($=null==H?void 0:H.optional)&&void 0!==$&&$;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Se){if(We)return null;throw Se}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function ie(ce){return"EAGER"===ce.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:oe})}catch($){}for(const[$,J]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier($);try{const Se=this.getOrInitializeService({instanceIdentifier:We});J.resolve(Se)}catch(Se){}}}}clearInstance(H=oe){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,c.Z)(function*(){const $=Array.from(H.instances.values());yield Promise.all([...$.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...$.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=oe){return this.instances.has(H)}getOptions(H=oe){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:$={}}=H,J=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:J,options:$});for(const[Se,ke]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Se)&&ke.resolve(We);return We}onInit(H,$){var J;const We=this.normalizeInstanceIdentifier($),Se=null!==(J=this.onInitCallbacks.get(We))&&void 0!==J?J:new Set;Se.add(H),this.onInitCallbacks.set(We,Se);const ke=this.instances.get(We);return ke&&H(ke,We),()=>{Se.delete(H)}}invokeOnInitCallbacks(H,$){const J=this.onInitCallbacks.get($);if(J)for(const We of J)try{We(H,$)}catch(Se){}}getOrInitializeService({instanceIdentifier:H,options:$={}}){let J=this.instances.get(H);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=H,ce===oe?void 0:ce),options:$}),this.instances.set(H,J),this.instancesOptions.set(H,$),this.invokeOnInitCallbacks(J,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,J)}catch(We){}var ce;return J||null}normalizeInstanceIdentifier(H=oe){return this.component?this.component.multipleInstances?H:oe:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const $=this.getProvider(H.name);if($.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);$.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const $=new ee(H,this);return this.providers.set(H,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(at,Ie,N)=>{N.d(Ie,{Am:()=>ce,Ub:()=>he,Yd:()=>ie,in:()=>Y});const c=[];var Y=(()=>{return(H=Y||(Y={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",Y;var H})();const P={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},oe=Y.INFO,ee={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},ge=(H,$,...J)=>{if($<H.logLevel)return;const We=(new Date).toISOString(),Se=ee[$];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Se](`[${We}]  ${H.name}:`,...J)};class ie{constructor($){this.name=$,this._logLevel=oe,this._logHandler=ge,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Y))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?P[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...$),this._logHandler(this,Y.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...$),this._logHandler(this,Y.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...$),this._logHandler(this,Y.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...$),this._logHandler(this,Y.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...$),this._logHandler(this,Y.ERROR,...$)}}function he(H){c.forEach($=>{$.setLogLevel(H)})}function ce(H,$){for(const J of c){let We=null;$&&$.level&&(We=P[$.level]),J.userLogHandler=null===H?null:(Se,ke,...Ve)=>{const fe=Ve.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch(nt){return null}}).filter(Ee=>Ee).join(" ");ke>=(null!=We?We:Se.logLevel)&&H({level:Y[ke].toLowerCase(),message:fe,args:Ve,type:Se.name})}}}},5861:(at,Ie,N)=>{function c(P,oe,ee,ge,ie,he,ce){try{var H=P[he](ce),$=H.value}catch(J){return void ee(J)}H.done?oe($):Promise.resolve($).then(ge,ie)}function Y(P){return function(){var oe=this,ee=arguments;return new Promise(function(ge,ie){var he=P.apply(oe,ee);function ce($){c(he,ge,ie,ce,H,"next",$)}function H($){c(he,ge,ie,ce,H,"throw",$)}ce(void 0)})}}N.d(Ie,{Z:()=>Y})}},at=>{at(at.s=2805)}]);